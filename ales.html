

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Active-Learning Exercises &#8212; Computational Thinking and Problem Solving</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ales';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="Chapter 15: Embrace Runtime Debugging" href="chap15.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="welcome.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/mike_flat.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/mike_flat.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="welcome.html">
                    A Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="chap01.html">Chapter 1: Read a Children’s Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap02.html">Chapter 2: Grab the Dialogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap03.html">Chapter 3: Replace Text With Emoji</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap04.html">Chapter 4: Query a Web Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap05.html">Chapter 5: Play Guess-a-number with a Friend</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap06.html">Chapter 6: Do You See My Dog?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap07.html">Chapter 7: Many Numbers But Not Any Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap08.html">Chapter 8: What Is My Problem?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap09.html">Chapter 9: Find a Phrase</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap10.html">Chapter 10: Build an Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap11.html">Chapter 11: Discover Driving Directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap12.html">Chapter 12: Divide and Conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap13.html">Chapter 13: Rewrite the Error Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap14.html">Chapter 14: The Dream of Bug Fixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap15.html">Chapter 15: Embrace Runtime Debugging</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Active-Learning Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/ales.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Active-Learning Exercises</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-1-hello-world">ALE 1.1: Hello World</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-2-too-long">ALE 1.2: Too long?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-3-close-the-screen-door">ALE 1.3: Close the screen door!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-4-from-story-to-contract">ALE 1.4: From story to contract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-1-counting-stuff">ALE 2.1: Counting stuff</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-2-counting-lines">ALE 2.2: Counting lines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-3-counting-characters">ALE 2.3: Counting characters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-4-counting-words">ALE 2.4: Counting words</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-5-counting-sentences">ALE 2.5: Counting sentences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-6-abstractions">ALE 2.6: Abstractions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-7-problem-not-solved">ALE 2.7: Problem not solved!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-1-two-kinds-of-loops">ALE 3.1: Two kinds of loops</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-2-getting-comfortable-with-range">ALE 3.2: Getting comfortable with `range`</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-3-return-with-something">ALE 3.3: Return with something</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-4-visualize-a-function-call">ALE 3.4: Visualize a function call</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-5-two-different-sequences">ALE 3.5: Two different sequences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-6-what-happens-when">ALE 3.6: What happens when?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-7-imports-and-the-namespace">ALE 3.7: Imports and the namespace?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-8-scope-and-the-danger-of-globals">ALE 3.8: Scope and the Danger of Globals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-1-this-and-that">ALE 4.1: This and that</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-2-tuples-a-box-for-everything">ALE 4.2: Tuples, a box for everything</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-3-but-it-must-be-true">ALE 4.3: But it must be true!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-4-a-mashup">ALE 4.4: A Mashup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-5-json-makes-my-eyes-ache">ALE 4.5: JSON makes my eyes ache</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-1-too-many-guesses">ALE 5.1: Too many guesses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-2-so-many-ways-to-pick">ALE 5.2: So many ways to pick</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-3-catching-exceptions">ALE 5.3: Catching exceptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-4-adding-metadata-to-your-messages">ALE 5.4: Adding metadata to your messages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-1-capturing-color">ALE 6.1: Capturing color</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-2-diagonal-fade-to-a-color">ALE 6.2: Diagonal fade to a color</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-3-creating-a-checkerboard">ALE 6.3: Creating a checkerboard</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-4-counting-with-python-integers">ALE 6.4: Counting with Python integers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-5-color-the-duck-s-world">ALE 6.5: Color the duck’s world</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-8-1-parameters-and-parentheses">ALE 8.1: Parameters and Parentheses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-8-2-erase-the-duck">ALE 8.2: Erase the Duck</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-8-3-create-and-fix-your-own-photobomb">ALE 8.3: Create and Fix Your Own Photobomb</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="active-learning-exercises">
<h1>Active-Learning Exercises<a class="headerlink" href="#active-learning-exercises" title="Permalink to this heading">#</a></h1>
<section id="ale-1-1-hello-world">
<h2>ALE 1.1: Hello World<a class="headerlink" href="#ale-1-1-hello-world" title="Permalink to this heading">#</a></h2>
<p>Using your chosen IDE, follow the steps below to practice with Python commands you learned in Chapter 1 and to become more comfortable creating named Python objects.</p>
<p><strong>Step 1.</strong> In your IDE, make a new Python project.</p>
<p><strong>Step 2.</strong> In the editor pane, write a script that prints <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World</span></code> using only the <code class="docutils literal notranslate"><span class="pre">print</span></code> command. Run your script to make sure it executes correctly.</p>
<p><strong>Step 3.</strong> Now change your script so that it assigns the string literal <code class="docutils literal notranslate"><span class="pre">'Hello</span> <span class="pre">World'</span></code> to the variable <code class="docutils literal notranslate"><span class="pre">exclamation</span></code>, and then have your script print <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World</span></code> using this variable. Run this updated script to make sure it executes correctly.</p>
<p><strong>Step 4.</strong> Change your script again. Assign the string literal <code class="docutils literal notranslate"><span class="pre">'World'</span></code> to the variable <code class="docutils literal notranslate"><span class="pre">what</span></code>, and have your script use two print statements to print <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World</span></code>. It’s okay if <code class="docutils literal notranslate"><span class="pre">World</span></code> is on its own line, but one of these print statements must use the variable <code class="docutils literal notranslate"><span class="pre">what</span></code>. Run your script and fix any issues that arise.</p>
<p><strong>Step 5.</strong> Replace both print statements in your script with the single statement: <code class="docutils literal notranslate"><span class="pre">print(&quot;Hello&quot;,</span> <span class="pre">what)</span></code>. Run the script.</p>
<ol class="arabic simple">
<li><p>Look carefully at the output and compare it to the two objects you gave as inputs to <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p></li>
<li><p>In the console pane, type <code class="docutils literal notranslate"><span class="pre">help(print)</span></code> and hit return – remember that this is how you invoke the interactive Python interpreter. Consider the explanation. It should help you understand why <code class="docutils literal notranslate"><span class="pre">print(&quot;Hello&quot;,</span> <span class="pre">what)</span></code> includes a space between the two words even though there was no space in either of the string literals passed as inputs to the print command. If not, ask a member of the teaching staff.</p></li>
</ol>
<p><strong>Congratulations!</strong> You are over the first big hump: You’ve started using a tool that will help you think computationally and will give you the freedom to solve problems creatively. We just looked at four different ways to print the same short phrase, and while not terribly creative, you will learn many more ways to format what you want to print and will learn to solve much more complex problems.</p>
<p>If you’re interested in the history and lore behind the tradition of printing “Hello World” in your first program, please see <a class="reference external" href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">this wikipedia page</a>.</p>
</section>
<section id="ale-1-2-too-long">
<h2>ALE 1.2: Too long?<a class="headerlink" href="#ale-1-2-too-long" title="Permalink to this heading">#</a></h2>
<p>Let’s solve a new problem that continues to use the context of reading bedtime stories.</p>
<p>My children loved the stories we read, and they would often grab another book immediately after we finished the current one. As night fell, I’d begin to consider the length of each book they brought me. If it was late, I wouldn’t start a long book.</p>
<p>So let’s write a script that makes this decision for us. It will count the number of lines in a book and then print “Let’s read this” if the book’s length is less than 20 lines and “We can’t read this” if it isn’t.</p>
<p>To get started solving this problem, let’s practice Step 5 in our problem-solving process, which states that we should identify old scripts that can help us in writing our new one. Obviously, doing this can save us work, but more generally, this approach avoids the fears many of us have when we start a project by staring at a blank page.</p>
<p><strong>Step 1.</strong> In your IDE, make a new Python project and paste into the editor pane the script we completed at the end of Chapter 1.</p>
<p><strong>Step 2.</strong> Think about which statements in this old script you need to solve this new problem. For example, do you need to ask the user for the name of the book to be read? Yup, that would be helpful, and so we’ll keep that <code class="docutils literal notranslate"><span class="pre">input</span></code> command and the <code class="docutils literal notranslate"><span class="pre">open</span></code> command that uses its result. Do we need to loop through all the lines in the open file? Yup, keep that while-loop.</p>
<p>Skipping ahead, do we need to print the lines we read from the open file? No, we don’t. So we can delete that line.</p>
<p>Consider each statement in our previous script and ask whether you need it or not, leaving alone those lines that are helpful and deleting those that aren’t. What’s left is a frame into which you can write new pseudocode. Bam! You’re well on your way to solving this new problem.</p>
<p><strong>Step 3.</strong> To count the number of lines in our input file, we’re going to want to keep track of the number of lines we’ve seen in previous iterations of the while-loop. What do you want to call this variable? It’s a variable because the object it names changes from one iteration of the loop to the next.</p>
<p><strong>Step 4.</strong> What happens to this variable inside the while-loop? Can you write Python code that implements your answer to this question?</p>
<p><strong>Step 5.</strong> Does this variable need to be initialized before the while-loop? If yes, what value should you use to initialize it? HINT: It does, and the value you use to initialize it depends on the where in the while-loop you update it. Think about the proper initialization value for an update at each possible position in the while-loop body.</p>
<p><strong>Step 6.</strong> When our scripts sees EOF returned from <code class="docutils literal notranslate"><span class="pre">readline</span></code>, it breaks out of the while-loop. Previously, there was nothing after this while-loop, and the script ended. Now, however, we want to test the value computed across the iterations of the while-loop and then print one of two phrases. This sounds like a job for an if-statement. But to this point, we have only used if-statements to <em>protect</em> a block of code. In this problem, we want the test in our if-statement to <em>select</em> one of two blocks of code. The syntax for this version of an if-statement looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="n">the_test</span><span class="p">:</span>
<span class="linenos">2</span>    <span class="c1"># statements done on a True test outcome</span>
<span class="linenos">3</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">4</span>    <span class="c1"># statements done on a False test outcome</span>
</pre></div>
</div>
<p><strong>Step 7.</strong> Write and test the complete script!</p>
</section>
<section id="ale-1-3-close-the-screen-door">
<h2>ALE 1.3: Close the screen door!<a class="headerlink" href="#ale-1-3-close-the-screen-door" title="Permalink to this heading">#</a></h2>
<p>Create yourself yet another Python project, and again copy in the entire script from the end of Chapter 1. For this exercise, we’re not going to change its functionality, but simply make it more <em>robust</em>.</p>
<p><strong>Step 1.</strong> A piece of this work involves creating a separate directory for its input files. By putting all the input text files in a subdirectory called <code class="docutils literal notranslate"><span class="pre">txts</span></code>, we’ll avoid mistakenly overwriting one of our scripts while performing file operations on the input texts. Look at the changes to the <code class="docutils literal notranslate"><span class="pre">open</span></code> parameter in the second line of the following script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">my_book</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;What book would you like to read? &#39;</span><span class="p">)</span>
<span class="linenos"> 2</span><span class="n">my_open_book</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;txts/&#39;</span> <span class="o">+</span> <span class="n">my_book</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos"> 5</span>    <span class="n">the_line</span> <span class="o">=</span> <span class="n">my_open_book</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="linenos"> 6</span>    <span class="nb">print</span><span class="p">(</span><span class="n">the_line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>    <span class="k">if</span> <span class="n">the_line</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
<span class="linenos"> 8</span>        <span class="c1"># We&#39;ve read the entire book!</span>
<span class="linenos"> 9</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The End.&quot;</span><span class="p">)</span>
<span class="linenos">10</span>        <span class="k">break</span>
</pre></div>
</div>
<p>We will learn more about this syntax in Chapter 2, but briefly, it treats the infix <code class="docutils literal notranslate"><span class="pre">+</span></code> operator as string concatenation when the <code class="docutils literal notranslate"><span class="pre">+</span></code> is placed between two string objects.</p>
<p>Update the script in your editor pane so that it matches the code above. Make sure you create the <code class="docutils literal notranslate"><span class="pre">txts</span></code> subdirectory in your IDE file browser and move your text files into that new subdirectory before you try running this new script.</p>
<p><strong>Step 2.</strong> Now add a new statement to the end of your script, as illustrated in the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">my_book</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;What book would you like to read? &#39;</span><span class="p">)</span>
<span class="linenos"> 2</span><span class="n">my_open_book</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;txts/&#39;</span> <span class="o">+</span> <span class="n">my_book</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos"> 5</span>    <span class="n">the_line</span> <span class="o">=</span> <span class="n">my_open_book</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="linenos"> 6</span>    <span class="nb">print</span><span class="p">(</span><span class="n">the_line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>    <span class="k">if</span> <span class="n">the_line</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
<span class="linenos"> 8</span>        <span class="c1"># We&#39;ve read the entire book!</span>
<span class="linenos"> 9</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The End.&quot;</span><span class="p">)</span>
<span class="linenos">10</span>        <span class="k">break</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="n">my_open_book</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Adding this <code class="docutils literal notranslate"><span class="pre">close</span></code> statement doesn’t add a new feature to our script.  Run this script to verify this claim. The purpose of this <code class="docutils literal notranslate"><span class="pre">close</span></code> statement is to tell the interpreter that we’re done with the open file and it can close it.</p>
<p>You should always pair a <code class="docutils literal notranslate"><span class="pre">close</span></code> for every <code class="docutils literal notranslate"><span class="pre">open</span></code> you write, but it is often hard to remember to do this. When I first started programming, I often forgot this pairing, and now I use a story from my childhood to help me remember.</p>
<p>When I was a small boy, my parents would constantly remind me to close the screen door. Why did they do that? Yes, they wanted me to keep the bugs out of the house. We won’t go, at this time, into the details of the bugs/errors that can occur if you don’t close a file when you’re done with it, but suffice it to say if you ever open a file, you should close it.</p>
<p>It’s perfectly fine to do this at the end of your script, as I’ve done here, since the interpreter stops executing your script when it reaches the script’s end. Putting this <code class="docutils literal notranslate"><span class="pre">close</span></code> command right before the end of the script ensures that closing the file is one of the last things the interpreter does for us before stopping execution.</p>
<p><strong>Step 3.</strong> What if I wanted to close the file earlier in the script? I could do that, but if I’m making as many changes to the script as we made last time, I might mistakenly move the <code class="docutils literal notranslate"><span class="pre">close</span></code> to some point before I’m actually done reading the file. For example, let’s move the <code class="docutils literal notranslate"><span class="pre">close</span></code> statement into the loop and execute the script again.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">my_book</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;What book would you like to read? &#39;</span><span class="p">)</span>
<span class="linenos"> 2</span><span class="n">my_open_book</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;txts/&#39;</span> <span class="o">+</span> <span class="n">my_book</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos"> 5</span>    <span class="n">the_line</span> <span class="o">=</span> <span class="n">my_open_book</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="linenos"> 6</span>    <span class="nb">print</span><span class="p">(</span><span class="n">the_line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>    <span class="k">if</span> <span class="n">the_line</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
<span class="linenos"> 8</span>        <span class="c1"># We&#39;ve read the entire book!</span>
<span class="linenos"> 9</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The End.&quot;</span><span class="p">)</span>
<span class="linenos">10</span>        <span class="k">break</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="n">my_open_book</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Yuk. We got a <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">I/O</span> <span class="pre">operation</span> <span class="pre">on</span> <span class="pre">closed</span> <span class="pre">file.</span></code></p>
<p>Notice that there’s very little difference between the first and second pieces of code. Basically, four little spaces. This is a nightmare waiting to happen.</p>
<p>To avoid such nightmares, Python provides us with a piece of syntactic sugar that lets us automatically include a <code class="docutils literal notranslate"><span class="pre">close</span></code> with each <code class="docutils literal notranslate"><span class="pre">open</span></code>. It accomplishes this by turning the <code class="docutils literal notranslate"><span class="pre">open</span></code> into a <code class="docutils literal notranslate"><span class="pre">with-as</span></code> <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html">compound statement</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">my_book</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;What book would you like to read? &#39;</span><span class="p">)</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;txts/&#39;</span> <span class="o">+</span> <span class="n">my_book</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_open_book</span><span class="p">:</span>
<span class="linenos"> 4</span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos"> 5</span>        <span class="n">the_line</span> <span class="o">=</span> <span class="n">my_open_book</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="linenos"> 6</span>        <span class="nb">print</span><span class="p">(</span><span class="n">the_line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>        <span class="k">if</span> <span class="n">the_line</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
<span class="linenos"> 8</span>            <span class="c1"># We&#39;ve read the entire book!</span>
<span class="linenos"> 9</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The End.&quot;</span><span class="p">)</span>
<span class="linenos">10</span>            <span class="k">break</span>
</pre></div>
</div>
<p>The block of code nested inside the <code class="docutils literal notranslate"><span class="pre">with-as</span></code> statement does the <code class="docutils literal notranslate"><span class="pre">open</span></code> and assigns our virtual finger to the name <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> just as before, but it also recognizes when control leaves this nested code block and automatically calls <code class="docutils literal notranslate"><span class="pre">close</span></code> on <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> for us. I wish I had something like this when I was a kid.</p>
<p>This is one example of a way that designers include new language features that help you to avoid common errors and problems (i.e., errors and problems that repeatedly haunted programmers in older languages). Of course, you’re protected only if you use these features! I encourage you to use this form for your own scripts.</p>
<p>Update the code in your editor pane and run it. Everything should continue to work as before, but your code is more robust!</p>
</section>
<section id="ale-1-4-from-story-to-contract">
<h2>ALE 1.4: From story to contract<a class="headerlink" href="#ale-1-4-from-story-to-contract" title="Permalink to this heading">#</a></h2>
<p>Let’s turn an input story into a legal contract by numbering each paragraph, where a new paragraph is defined to start on a line of text that follows a blank line. Here is a specification for your solution script:</p>
<ul class="simple">
<li><p>If you look at a legal contract, you’ll typically see that every paragraph in the document is numbered so that it is easy to refer to specific paragraphs in the negotiations surrounding the contract. The first paragraph in the contract is given the number 1, and the numbering continues sequentially until the last paragraph in the body.</p></li>
<li><p>To make things simple, your script should print the string <code class="docutils literal notranslate"><span class="pre">'PARAGRAPH</span> <span class="pre">1\n'</span></code> when numbering the first paragraph in the text. In other words, <code class="docutils literal notranslate"><span class="pre">PARAGRAPH</span> <span class="pre">1</span></code> appears on its own line and then is followed by the first text line of the first paragraph. Follow this pattern for the rest of the paragraphs in the story.</p></li>
<li><p>Your solution script will need to recognize blank lines (i.e., lines that contain only a newline character).</p></li>
<li><p>Make sure that your script uses the <code class="docutils literal notranslate"><span class="pre">input</span></code> function and <code class="docutils literal notranslate"><span class="pre">with-as</span></code> statement. HINT: What code have you written that you might want to use as your starting point for this problem?</p></li>
</ul>
<p>The paragraphs in <code class="docutils literal notranslate"><span class="pre">CatInTheHat.txt</span></code> are separated by blank lines, and so you can use this input to test your script.</p>
<p>Good luck!</p>
<p>[Version 20230709]</p>
</section>
<section id="ale-2-1-counting-stuff">
<h2>ALE 2.1: Counting stuff<a class="headerlink" href="#ale-2-1-counting-stuff" title="Permalink to this heading">#</a></h2>
<p>The solutions to many problems employ sequence and string processing. We learned that Python strings are a type of Python sequence (i.e., an ordered collection of items, and for strings, the items are characters). In the first several exercises, you’ll gain experience with the methods on sequences and on strings, which will also prepare you for the second programming problem set.</p>
<p>Exercises 1-5 use the following code (<code class="docutils literal notranslate"><span class="pre">chap02/count32.py</span></code>), which runs but doesn’t count anything correctly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap02/count32.py</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c1"># Grab the text blurb to process</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos"> 5</span><span class="c1">#print(&quot;sys.argv =&quot;, sys.argv)</span>
<span class="linenos"> 6</span><span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="n">blurb</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Text: &#39;</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="k">elif</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
<span class="linenos"> 9</span>    <span class="n">input_file</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos">10</span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;txts/&#39;</span> <span class="o">+</span> <span class="n">input_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_open_file</span><span class="p">:</span>
<span class="linenos">11</span>        <span class="n">blurb</span> <span class="o">=</span> <span class="n">my_open_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="linenos">12</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">13</span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;Usage: python3 count32.py [blurb.txt]&quot;</span><span class="p">)</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c1"># Count the number of non-blank lines in the blurb</span>
<span class="linenos">16</span><span class="c1"># using the Python string method `split`.</span>
<span class="linenos">17</span><span class="n">lines</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">18</span><span class="c1"># REPLACE ME with a for-loop</span>
<span class="linenos">19</span><span class="nb">print</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="s2">&quot;line(s)&quot;</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="c1"># Count the number of alphabet characters in the blurb</span>
<span class="linenos">22</span><span class="c1"># using the Python string method `isalpha`.</span>
<span class="linenos">23</span><span class="n">letters</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">24</span><span class="c1"># REPLACE ME with a for-loop</span>
<span class="linenos">25</span><span class="nb">print</span><span class="p">(</span><span class="n">letters</span><span class="p">,</span> <span class="s2">&quot;letter(s)&quot;</span><span class="p">)</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="c1"># Count the number of words in the blurb, where a word</span>
<span class="linenos">28</span><span class="c1"># is any sequence of non-whitespace characters surrounded</span>
<span class="linenos">29</span><span class="c1"># by any amount of whitespace. Please use the Python string</span>
<span class="linenos">30</span><span class="c1"># method `split` and one function on sequences.</span>
<span class="linenos">31</span><span class="n">words</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># REPLACE THE 0 with an expression</span>
<span class="linenos">32</span><span class="nb">print</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="s2">&quot;word(s)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice the four blocks of code in <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> separated by blank lines. The first block is complete and working code; you deal with the commented-out print statement in a moment.</p>
<p>The other three blocks compute counts of things in the <code class="docutils literal notranslate"><span class="pre">blurb</span></code> produced by the first code block. What each counts is described by the variable in which they store their counts: <code class="docutils literal notranslate"><span class="pre">lines</span></code>, <code class="docutils literal notranslate"><span class="pre">letters</span></code>, and <code class="docutils literal notranslate"><span class="pre">words</span></code>. Or I should say that they will count these things after you finish your work in the next three exercises. Currently, the script simply sets these counts to zero.</p>
<p>This exercise explains what the first code block in <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> does. You can ignore the <code class="docutils literal notranslate"><span class="pre">import</span></code> statement, which is discussed in an upcoming chapter. After this import-statement and the commented-out print-statement, there is an if-statement checking the length of the variable <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>, which we can do because <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> is a sequence.</p>
<aside class="margin sidebar">
<p class="sidebar-title">Running in the Shell</p>
<p>On the webpage describing how to get started with your chosen IDE, there are complete instructions on how to run Python scripts in the IDE’s Shell panel.</p>
</aside>
<p><strong>Step 1.</strong> Uncomment the print-statement, and run <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> in your IDE’s shell as follows:</p>
<p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">count32.py</span> <span class="pre">HomeView3.txt</span></code></p>
<p>It should print:</p>
<p><code class="docutils literal notranslate"><span class="pre">sys.argv</span> <span class="pre">=</span> <span class="pre">['count32.py',</span> <span class="pre">'HomeView3.txt']</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">line(s)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">letter(s)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">word(s)</span></code></p>
<p>That square bracket notation is how Python prints a sequence. As you can see, <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> contains the “words” on the command line after <code class="docutils literal notranslate"><span class="pre">python3</span></code>. The Shell defines a word as any sequence of non-whitespace characters surrounded by any amount of whitespace, where whitespace is any space, tab, or return characters (i.e., invisible characters that represent horizontal or vertical space).</p>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> expects to find the input files specified on the command line in a folder called <code class="docutils literal notranslate"><span class="pre">txts</span></code>. This folder should be visible at the same level of the file explorer as the <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> script.</p>
<p><strong>Step 2.</strong> Re-comment the print-statement. And now let’s look at the <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">elif</span></code>, and <code class="docutils literal notranslate"><span class="pre">else</span></code> statements.</p>
<p>In the chapter, we learned that the else-statement captures all the cases where the condition in the proceeding if-statement evaluated to <code class="docutils literal notranslate"><span class="pre">False</span></code>. An elif-statement stands for “else if”, and it generalizes the selection of which code block to run based on the evaluation of a sequence of conditions.</p>
<p>For instance, in <code class="docutils literal notranslate"><span class="pre">count32.py</span></code>, the first code block wants to know if the number of words in <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> is 1, 2, or something other than 1 or 2. The if-statement asks whether <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> has length 1. If not, the interpreter skips to the elif-statement and checks whether <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> has length 2. If not, the interpreter does the work in the else-statement. If either of the first two checks had evaluated to <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the statements dependent upon that condition (and not any of the others) would have been executed.</p>
<p>The following is another way of looking at the if-elif-else block of statements:</p>
<ol class="arabic simple">
<li><p>The if-statement condition is <code class="docutils literal notranslate"><span class="pre">True</span></code> when you don’t give the script an input parameter. It assumes you want to provide a <code class="docutils literal notranslate"><span class="pre">blurb</span></code> of text by being prompted with an input-statement. This is useful for testing the script with short blurbs.</p></li>
<li><p>The elif-statement condition is <code class="docutils literal notranslate"><span class="pre">True</span></code> when you give the script a single command-line parameter, which the script assumes is the name of the file whose contents you want to become the <code class="docutils literal notranslate"><span class="pre">blurb</span></code>.</p></li>
<li><p>The else-statement executes when you give our script more than one command-line parameter. This is an error, and the script exits after telling you how to properly use it.</p></li>
</ol>
<p>If you wanted to select between four independent conditions, you’d insert another elif-statement either before or after the current one. In general, you can add as many elif-statements as you need between the first if-statement and the optional final else-statement.</p>
<p>Let’s try this. Modify the first code block in <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> to set blurb to the concatenation of the last two string elements of <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> when <code class="docutils literal notranslate"><span class="pre">len(sys.argv)</span> <span class="pre">==</span> <span class="pre">3</span></code>. You should separate these two “words” with a space.</p>
<p><strong>Bonus information.</strong> Look again at the body of the original elif-statement. A lot of this should look familiar, but if you look closely, you’ll see that we use the method <code class="docutils literal notranslate"><span class="pre">read</span></code> and not <code class="docutils literal notranslate"><span class="pre">readline</span></code>. The <code class="docutils literal notranslate"><span class="pre">read</span></code> method reads all of the lines in the file and names the resulting (possibly very long) string <code class="docutils literal notranslate"><span class="pre">blurb</span></code>.</p>
<p>If you want to verify this, print <code class="docutils literal notranslate"><span class="pre">blurb</span></code> after the completion of the first code block.</p>
<p><strong>More bonus information.</strong> Look at the body of the else-statement. To this point, we have only ever exited our scripts by having the Python interpreter run off the bottom of the script. If you ever need to exit your script without running off the bottom of it, you should call <code class="docutils literal notranslate"><span class="pre">sys.exit()</span></code>. You might read about other methods to end the execution of your Python script, but I recommend that you use this approach. It safely cleans up the execution state of your script so you don’t encounter any strangeness. You probably feel everything is strange enough already!</p>
</section>
<section id="ale-2-2-counting-lines">
<h2>ALE 2.2: Counting lines<a class="headerlink" href="#ale-2-2-counting-lines" title="Permalink to this heading">#</a></h2>
<p>Let’s count things! We’ll start with another way to count the lines in a file, or in our case now <code class="docutils literal notranslate"><span class="pre">blurb</span></code>. To make this more interesting, we’ll make <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> count non-blank lines. What is a blank line? A line containing only a <code class="docutils literal notranslate"><span class="pre">\n</span></code> character.</p>
<p>You are going to replace the first comment that says <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">REPLACE</span> <span class="pre">ME</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">for-loop</span></code> with a for-loop. Ideally, the sequence in this for-loop would be an ordered collection of the lines in the blurb.</p>
<p>How do we turn <code class="docutils literal notranslate"><span class="pre">blurb</span></code> into a sequence where each element is a line in the blurb? We will use the Python string <code class="docutils literal notranslate"><span class="pre">split</span></code> method. If the blurb was <code class="docutils literal notranslate"><span class="pre">'1,22,333'</span></code> and I asked the Python interpreter to give me the result of <code class="docutils literal notranslate"><span class="pre">blurb.split(',')</span></code>, it would return <code class="docutils literal notranslate"><span class="pre">['1',</span> <span class="pre">'22',</span> <span class="pre">'333']</span></code>. The interpreter found each comma in the blurb and made the strings to the left and right of each comma into elements in the resulting sequence. Notice that the commas do not appear in the resulting list of strings.</p>
<p><strong>Step 1.</strong> Use the interactive Python interpreter to try this and other examples. Make sure you try examples with a blank line!</p>
<p><strong>Step 2.</strong> Update <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> so that it counts the non-blank lines in <code class="docutils literal notranslate"><span class="pre">blurb</span></code>. What character do you want to split on? What condition will you test before incrementing the variable <code class="docutils literal notranslate"><span class="pre">lines</span></code>?</p>
</section>
<section id="ale-2-3-counting-characters">
<h2>ALE 2.3: Counting characters<a class="headerlink" href="#ale-2-3-counting-characters" title="Permalink to this heading">#</a></h2>
<p>Next, we will count the number of English alphabet characters in <code class="docutils literal notranslate"><span class="pre">blurb</span></code>. This again has us practice writing a for-loop, but the for-loop sequence this time should contain the numbers from <code class="docutils literal notranslate"><span class="pre">0</span></code> to one less than the length of the blurb. Recall that the chapter used the <code class="docutils literal notranslate"><span class="pre">range</span></code> function to produce such a sequence.</p>
<p>You’ll also need to know how to test to see if a character is from the set of characters in the English alphabet. You can do this in Python with the string method called <code class="docutils literal notranslate"><span class="pre">isalpha</span></code>, which takes no input parameters.</p>
<p><strong>Step 1.</strong> Try <code class="docutils literal notranslate"><span class="pre">'b'.isalpha()</span></code> and <code class="docutils literal notranslate"><span class="pre">'a2c'[1].isalpha()</span></code> in the interactive Python interpreter. Make sure you can explain what takes place in the second of these examples. Try a few other examples.</p>
<p><strong>Step 2.</strong> Update <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> (i.e., replace the second <code class="docutils literal notranslate"><span class="pre">REPLACE</span> <span class="pre">ME</span></code> comment) so that it counts the English alphabet characters in <code class="docutils literal notranslate"><span class="pre">blurb</span></code>.</p>
</section>
<section id="ale-2-4-counting-words">
<h2>ALE 2.4: Counting words<a class="headerlink" href="#ale-2-4-counting-words" title="Permalink to this heading">#</a></h2>
<p>Now, let’s count the number of words in <code class="docutils literal notranslate"><span class="pre">blurb</span></code>, where a word is defined like the Shell defined words above. Amazingly, we can do this in one short expression that uses <code class="docutils literal notranslate"><span class="pre">len</span></code> and <code class="docutils literal notranslate"><span class="pre">split</span></code>.</p>
<p><strong>Step 1.</strong> Read <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html">the Python documentation about the string split method</a> (search the webpage for <code class="docutils literal notranslate"><span class="pre">str.split</span></code> and pay attention to what it does when you don’t provide an input parameter to <code class="docutils literal notranslate"><span class="pre">split</span></code>). Try it on a few examples in the interactive Python interpreter.</p>
<p><strong>Step 2.</strong> Update <code class="docutils literal notranslate"><span class="pre">count32.py</span></code> (i.e., replace the <code class="docutils literal notranslate"><span class="pre">REPLACE</span> <span class="pre">THE</span> <span class="pre">0</span></code> comment) so that it counts the number of words in <code class="docutils literal notranslate"><span class="pre">blurb</span></code>.</p>
</section>
<section id="ale-2-5-counting-sentences">
<h2>ALE 2.5: Counting sentences<a class="headerlink" href="#ale-2-5-counting-sentences" title="Permalink to this heading">#</a></h2>
<p>Finally, let’s try counting the number of sentences in <code class="docutils literal notranslate"><span class="pre">blurb</span></code>. What constitutes a sentence in English can be quite tricky to define. For this exercise, we will keep it simple: any sequence of characters and whitespace that ends in a <code class="docutils literal notranslate"><span class="pre">'.'</span></code>, <code class="docutils literal notranslate"><span class="pre">'?'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'!'</span></code> is a sentence. This means that your script will incorrectly report that the string <code class="docutils literal notranslate"><span class="pre">'Mr.</span> <span class="pre">and</span> <span class="pre">Mrs.</span> <span class="pre">Smith</span> <span class="pre">left</span> <span class="pre">for</span> <span class="pre">vacation.'</span></code> contains three sentences. We will avoid this shortcoming by never passing your script any tricky input.</p>
<p>You may be tempted to dive right in and start writing some Python code. You might try to use the <code class="docutils literal notranslate"><span class="pre">split</span></code> method. A bit of advice, don’t do either.</p>
<p><strong>Step 1.</strong> Take a moment and think about the problem as stated. Think in pseudocode about what you need to do. <strong>HINT:</strong> Why does the string <code class="docutils literal notranslate"><span class="pre">'Mr.</span> <span class="pre">and</span> <span class="pre">Mrs.</span> <span class="pre">Smith</span> <span class="pre">left</span> <span class="pre">for</span> <span class="pre">vacation.'</span></code> contain three sentences? Is there <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#common-sequence-operations">a method common to all sequences</a> that might help you simply solve this problem?</p>
<p><strong>Step 2.</strong> Add a new code block to the end of <code class="docutils literal notranslate"><span class="pre">count32.py</span></code>, which counts the number of sentences in <code class="docutils literal notranslate"><span class="pre">blurb</span></code>.</p>
<p>To test your solution, force the variable blurb to each of the following string values by placing an assignment to blurb just before your new code block. These assignments use Python’s ability to easily create multiline strings using triple quotes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">blurb</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;This is a test. A test of what? A test</span>
<span class="linenos"> 2</span><span class="s1">with every type of sentence in it!&#39;&#39;&#39;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># blurb = &#39;Mr. and Mrs. Smith left for vacation.&#39;</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c1"># blurb = &#39;&#39;&#39;Phronsie still stood just where Polly left her.</span>
<span class="linenos"> 7</span><span class="c1"># Two hundred candles! oh! what could it mean! She gazed up</span>
<span class="linenos"> 8</span><span class="c1"># to the old beams overhead, and around the dingy walls, and</span>
<span class="linenos"> 9</span><span class="c1"># to the old black stove, with the fire nearly out, and then</span>
<span class="linenos">10</span><span class="c1"># over everything the kitchen contained, trying to think how</span>
<span class="linenos">11</span><span class="c1"># it would seem.&#39;&#39;&#39;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Blurb:&quot;</span><span class="p">,</span> <span class="n">blurb</span><span class="p">)</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="n">sentences</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># REPLACE THE 0 with an expression</span>
<span class="linenos">16</span><span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">,</span> <span class="s2">&quot;sentence(s)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ale-2-6-abstractions">
<h2>ALE 2.6: Abstractions<a class="headerlink" href="#ale-2-6-abstractions" title="Permalink to this heading">#</a></h2>
<p>Let’s take some time to understand that <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#common-sequence-operations">the set of common operations on sequences</a> is different than <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#string-methods">the set of methods available on Python strings</a>. Every string is a Python sequence, but not every Python sequence is a string (i.e., able to use the Python string methods). Explain to a friend (or member of the teaching staff) how this connects to the idea of abstraction.</p>
</section>
<section id="ale-2-7-problem-not-solved">
<h2>ALE 2.7: Problem not solved!<a class="headerlink" href="#ale-2-7-problem-not-solved" title="Permalink to this heading">#</a></h2>
<p>Although we made great progress in this chapter to create a Python script that converts a story into a theatrical script, we didn’t completely solve the problem. While this was on purpose (i.e., we were practicing solving a few instances of the problem before writing a script to solve any instance), it is important to understand which cases of dialogue across file lines that the chapter’s script does and doesn’t handle.</p>
<p>Let’s review the test inputs that the chapter’s last script (<code class="docutils literal notranslate"><span class="pre">chap02/script4.py</span></code>) does handle correctly:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Talkative1.txt</span></code>: This blurb of text has at most one double-quote character on a file line. And it contains only one line of dialogue.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Talkative2.txt</span></code>: This blurb of text also has at most one double-quote character on a file line, but it contains two lines of dialogue.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HomeView3.txt</span></code>: In this blurb, a line of dialogue can start and stop on a single file line, but there’s at most two double-quote characters on a file line. It continues to handle multiple lines of dialogue in the input file.</p></li>
</ul>
<p>What happens if a file line contains more than two double-quote characters? Let’s try with a cleaned-up version of <code class="docutils literal notranslate"><span class="pre">script4.py</span></code> that we will call <code class="docutils literal notranslate"><span class="pre">script32.py</span></code>. If you look at <code class="docutils literal notranslate"><span class="pre">script32.py</span></code>, you’ll notice that it:</p>
<ul class="simple">
<li><p>Takes the input filename from the command line to make it a bit easier to test the script with multiple different input files (i.e., it removes the need for the script to prompt the user for the input file).</p></li>
<li><p>Cleans up the comments so that it is a bit easier to understand what the different blocks of statements do.</p></li>
</ul>
<p><strong>Step 1.</strong> Run <code class="docutils literal notranslate"><span class="pre">script32.py</span></code> on <code class="docutils literal notranslate"><span class="pre">HomeView6.txt</span></code>. You should find that the first piece of dialogue was printed correctly, but the script fails to recognize the start of the second piece of dialogue in the first file line of <code class="docutils literal notranslate"><span class="pre">HomeView6.txt</span></code>. Do you see the reason why?</p>
<p>Don’t read on until you have a reason.</p>
<p>If you answered that <code class="docutils literal notranslate"><span class="pre">script32.py</span></code> handles at most two double-quote characters on a file line and the first file line of <code class="docutils literal notranslate"><span class="pre">HomeView6.txt</span></code> contains three double quotes, you’re absolutely correct! At some point in designing this script, we have to stop thinking about handling <em>a specific number</em> of double-quote characters on a file line and write a script that handles <em>any number</em> of double-quote characters on a file line.</p>
<p>Recall that we started Chapter 2 talking about the desire to make our scripts handle more than a single instance of a problem, and this is a terrific example of thinking in that generalized way.</p>
<p><strong>Step 2.</strong> We are not going to code a solution here to the general problem of finding every piece of dialogue within and across file lines, but you will in the programming problem set at the end of Chapter 3. Instead, this exercise will help you to discover the pattern that you’ll need to solve this general problem (i.e., understanding this pattern will help you to structure your code).</p>
<ul class="simple">
<li><p>Characterize the text before and after the double quote character on each of the following two file lines. Remember that our task is to find dialogue, and so your characterization should be related to this goal.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">I</span> <span class="pre">said,</span> <span class="pre">&quot;Just</span> <span class="pre">one</span> <span class="pre">quote\n</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">per</span> <span class="pre">file</span> <span class="pre">line,</span> <span class="pre">please.&quot;\n</span></code></p>
<ul class="simple">
<li><p>Now characterize the text before and after each double quote character in this file line:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&quot;Just</span> <span class="pre">one?&quot;</span> <span class="pre">you</span> <span class="pre">said.\n</span></code></p>
<ul class="simple">
<li><p>And what about a file line with three double quote characters followed by one with a single double quote character:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&quot;But</span> <span class="pre">your</span> <span class="pre">line</span> <span class="pre">had</span> <span class="pre">two,&quot;</span> <span class="pre">I</span> <span class="pre">shouted.</span> <span class="pre">&quot;And\n</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">that's</span> <span class="pre">not</span> <span class="pre">one,</span> <span class="pre">except</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">file</span> <span class="pre">line.&quot;\n</span></code></p>
<ul class="simple">
<li><p>Finally, characterize the text before and after the double quote characters in this line with four double quotes:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&quot;Wait!&quot;</span> <span class="pre">and</span> <span class="pre">you</span> <span class="pre">shake</span> <span class="pre">your</span> <span class="pre">head.</span> <span class="pre">&quot;Will</span> <span class="pre">this</span> <span class="pre">end?&quot;\n</span></code></p>
<p>These examples ask you to label the text on either side of a double-quote character as if you split the file line on this character. Did you spot the pattern that emerges? Understanding this pattern is the key to writing code that processes a file line with any number of double quotes in it!</p>
<p>[Version 20230709]</p>
</section>
<section id="ale-3-1-two-kinds-of-loops">
<h2>ALE 3.1: Two kinds of loops<a class="headerlink" href="#ale-3-1-two-kinds-of-loops" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Use while-loops when you want to loop until you hit a some exit condition.</p></li>
<li><p>Use for-loops when you want to iterate over a sequence.</p></li>
</ul>
<p>As a bit of practice, consider what the string-find method looks like behind the scenes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">the_string</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">the_string</span><span class="p">)):</span>
<span class="linenos">3</span>        <span class="k">if</span> <span class="n">the_string</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">pattern</span><span class="p">:</span>
<span class="linenos">4</span>            <span class="k">return</span> <span class="n">i</span>
<span class="linenos">5</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">6</span>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>Let’s try it out, i.e., run the next code block.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">a_string</span> <span class="o">=</span> <span class="s1">&#39;Cosmo the dog&#39;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="c1"># a_string.find(&#39;m&#39;)</span>
<span class="linenos">4</span><span class="n">find</span><span class="p">(</span><span class="n">a_string</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> Look carefully at the function body of <code class="docutils literal notranslate"><span class="pre">find</span></code>. By reading the code, do you understand the purpose of the for-loop? Can you describe the conditions under which it returns?</p>
<p>Yes, you can put an <code class="docutils literal notranslate"><span class="pre">else</span></code> on a for-loop. It means “do the else-block if you exhausted the sequence without hitting an exit condition.”</p>
<p><strong>Step 2.</strong> Complete the last statement in the following code block so that it fails to find a <code class="docutils literal notranslate"><span class="pre">pattern</span></code> of your choosing in <code class="docutils literal notranslate"><span class="pre">a_string</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">a_string</span> <span class="o">=</span> <span class="s1">&#39;Cosmo the dog&#39;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="c1"># a_string.find(...)</span>
<span class="linenos">4</span><span class="n">find</span><span class="p">(</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 3.</strong> Think about the connection between a for-loop and a while-loop. Can you create rewrite the <code class="docutils literal notranslate"><span class="pre">find</span></code> function we’ve been using so that it uses a while-loop instead of a for-loop?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">def</span> <span class="nf">find_w</span><span class="p">(</span><span class="n">the_string</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="c1"># Put your code here</span>
</pre></div>
</div>
<p><strong>Step 4.</strong> Create a code block that tests your <code class="docutils literal notranslate"><span class="pre">find_w</span></code> function.</p>
</section>
<section id="ale-3-2-getting-comfortable-with-range">
<h2>ALE 3.2: Getting comfortable with `range`<a class="headerlink" href="#ale-3-2-getting-comfortable-with-range" title="Permalink to this heading">#</a></h2>
<p>What is that <code class="docutils literal notranslate"><span class="pre">range</span></code> command? We discussed it as a function that produces an integer sequence whose length is its input parameter. Used in a for-loop, the loop can then assign each element of the generated sequence to its loop variable (e.g., variable <code class="docutils literal notranslate"><span class="pre">i</span></code> in the example below) and execute the loop body for each element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>Questions:</p>
<ol class="arabic simple">
<li><p>What is the first number printed? Why is that the default for the first value produced by `range`? What does it make easy? There is a way to specify the starting value of the range produced. Can you figure out how to change the starting value?</p></li>
<li><p>What is the difference between our input value to <code class="docutils literal notranslate"><span class="pre">range</span></code> and the final number printed? Why is this? When you change the starting value, what is the final value printed? What does the single parameter to <code class="docutils literal notranslate"><span class="pre">range</span></code> represent if it isn’t the final value printed?</p></li>
</ol>
<p>Feel free to change the code block above as you answer these questions!</p>
</section>
<section id="ale-3-3-return-with-something">
<h2>ALE 3.3: Return with something<a class="headerlink" href="#ale-3-3-return-with-something" title="Permalink to this heading">#</a></h2>
<p>Python functions always return a value. Whether you explicitly use a return-statement without an expression or end your function without a return statement, the Python interpreter will return the special object <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Execute the following code block, which illustrates the ways we can end a function’s execution.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">def</span> <span class="nf">my_f1</span><span class="p">():</span>
<span class="linenos"> 2</span>    <span class="k">return</span> <span class="kc">None</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">my_f2</span><span class="p">():</span>
<span class="linenos"> 5</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">def</span> <span class="nf">my_f3</span><span class="p">():</span>
<span class="linenos"> 8</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos"> 9</span>    <span class="k">return</span> 
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">def</span> <span class="nf">my_f4</span><span class="p">():</span>
<span class="linenos">12</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">13</span>    <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="nb">print</span><span class="p">(</span><span class="n">my_f1</span><span class="p">(),</span> <span class="n">my_f2</span><span class="p">(),</span> <span class="n">my_f3</span><span class="p">(),</span> <span class="n">my_f4</span><span class="p">())</span>
</pre></div>
</div>
<p>Make sure you can explain why each function returns the value that was printed.</p>
</section>
<section id="ale-3-4-visualize-a-function-call">
<h2>ALE 3.4: Visualize a function call<a class="headerlink" href="#ale-3-4-visualize-a-function-call" title="Permalink to this heading">#</a></h2>
<p>Understanding the execution of a program with functions can be confusing at first, and sometimes it helps to watch a step-by-step visualization of a script’s execution. We talked through the execution of <code class="docutils literal notranslate"><span class="pre">replace7.py</span></code> in the chapter, and now we’d like you to review this execution with the help of a nifty online tool called <a class="reference external" href="https://pythontutor.com/">Python Tutor</a>.</p>
<p>I’ve used the site to configure a simplified version of our <code class="docutils literal notranslate"><span class="pre">replace7.py</span></code> script. By “simplified” I mean that I ripped out the code that read the text from a file and we greatly reduced the amount of input text. In a moment, you’ll see that this simplified script still requires 324 steps to fully execute. After you start stepping around in this code, you’ll begin to appreciate, even at a mere 324 steps, why we humans are glad to let computers keep track of the work in every step of our scripts. It’s tedious work!</p>
<p><strong>Step 1.</strong> <a class="reference external" href="https://pythontutor.com/visualize.html#code=def%20my_replace(s,%20old,%20new):%0A%20%20%20%20i%20=%200%20%20%20%20%20%20%20%20%20%20%20%23%20tracks%20where%20we%20are%20in%20the%20input%20string%0A%20%20%20%20j%20=%20len(old)%20%20%20%20%23%20skip-ahead%20amount%20for%20index%20calculations%0A%20%20%20%20new_s%20=%20s%5B0:0%5D%20%20%23%20the%20new%20string%20we're%20building%0A%0A%20%20%20%20while%20i%20%3C%20len(s):%0A%20%20%20%20%20%20%20%20if%20s%5Bi:i+j%5D%20==%20old:%0A%20%20%20%20%20%20%20%20%20%20%20%20new_s%20=%20new_s%20+%20new%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20+=%20j%0A%20%20%20%20%20%20%20%20else:%0A%20%20%20%20%20%20%20%20%20%20%20%20new_s%20=%20new_s%20+%20s%5Bi:i+1%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20+=%201%0A%0A%20%20%20%20return%20new_s%0A%0Amy_open_book%20=%20%5B%0A%20%20%20%20'And%20...',%0A%20%20%20%20'The%20Cat%20in%20the%20Hat!',%0A%20%20%20%20'And%20...',%0A%20%20%20%20''%0A%20%20%20%20%5D%0Awhile%20True:%0A%20%20%20%20the_line%20=%20my_open_book.pop(0)%0A%0A%20%20%20%20%23%20Having%20some%20fun%20with%20text%20substitution%0A%20%20%20%20the_line%20=%20my_replace(the_line,%20'Cat',%20'%5CN%7Bcat%20face%20with%20wry%20smile%7D')%0A%20%20%20%20the_line%20=%20my_replace(the_line,%20'Hat',%20'%5CN%7Btop%20hat%7D')%0A%0A%20%20%20%20print(the_line)%0A%0A%20%20%20%20if%20the_line%20==%20'':%0A%20%20%20%20%20%20%20%20%23%20We've%20read%20the%20entire%20book!%0A%20%20%20%20%20%20%20%20print(%22%5CnThe%20End.%22)%0A%20%20%20%20%20%20%20%20break&amp;cumulative=false&amp;heapPrimitives=nevernest&amp;mode=edit&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false">Click this link</a>. It will take you to Python Tutor’s visualization page, which is preloaded with our simplified script. Scroll up and down in the leftmost panel and make sure you recognize the code. The variable <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> has become a list of text lines from which we pop one line at a time for the processing that takes place in our infinite loop. You should otherwise recognize all the code.</p>
<p><strong>Step 2.</strong> Click the “Visualize Execution” button under the code. Then, click the “Next” button that should have appeared under the code. You may need to scroll up to see the location of the green and red arrows. Notice what the interpreter did on this first execution step. It added the name <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> to the namespace of what’s called the “Global frame”. What <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> names is a function object, as represented by the arrow in the rightmost panel.</p>
<p>Keep clicking “Next” and watch the arrows. At step 6, we see another object placed in the global frame’s namespace. At step 8, <code class="docutils literal notranslate"><span class="pre">the_line</span></code> appears and <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> loses its first element as a result of the <code class="docutils literal notranslate"><span class="pre">pop</span></code> operation. You can click “Prev” if you want to replay any steps.</p>
<p>Keep stepping and watch what happens at the call to our <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function. Make sure you understand why <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">old</span></code>, and <code class="docutils literal notranslate"><span class="pre">new</span></code> were initialized with the values you see in the frame named <code class="docutils literal notranslate"><span class="pre">my_replace</span></code>. Notice that the program is using this <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> frame while it is executing inside the <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function. It won’t touch the global frame again until it hits the <code class="docutils literal notranslate"><span class="pre">return</span></code> statement.</p>
<p><strong>Step 3.</strong> What happens between steps 43 and 44?</p>
<p>That’s right! The frame that was created for first execution of <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> disappears. That’s because we don’t need it anymore after we’re done with the first function call. The machine will create another frame as scratchpad space for its next invocation of <code class="docutils literal notranslate"><span class="pre">my_replace</span></code>. Given the way we’ve written our <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function, nothing done in one execution hangs around to affect any later executions. The only thing we care about from an execution of our function is the value we return to the code that called the function.</p>
<p>Go ahead and use the slider to move around in the code and see what happens at different parts of its execution. Feel free to edit the code (click the link below the script’s listing) and then click “Visualize Execution” to return to the visualization mode. You can even put in your own example scripts. Just keep them short and self-contained (i.e., no file I/O)!</p>
</section>
<section id="ale-3-5-two-different-sequences">
<h2>ALE 3.5: Two different sequences<a class="headerlink" href="#ale-3-5-two-different-sequences" title="Permalink to this heading">#</a></h2>
<p>We’ve discussed two different types of objects that adhere to the Python sequence abstraction: strings and lists. The following code block defines one of each of these objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Two sequences</span>
<span class="linenos">2</span><span class="n">a_string</span> <span class="o">=</span> <span class="s1">&#39;Cosmo the dog&#39;</span>
<span class="linenos">3</span><span class="n">a_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Cosmo&#39;</span><span class="p">,</span> <span class="s1">&#39;CatInTheHat.txt&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> What does this mean that both of these objects adhere to the same abstraction? Here are a few examples that might help you come up with an answer to this question:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># What is the length of a sequence?</span>
<span class="linenos">2</span><span class="n">c1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_string</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">c2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Getting an element in a sequence</span>
<span class="linenos">2</span><span class="n">e1</span> <span class="o">=</span> <span class="n">a_string</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="linenos">3</span><span class="n">e2</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Slice out a piece of the sequence</span>
<span class="linenos">2</span><span class="n">s1</span> <span class="o">=</span> <span class="n">a_string</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span>
<span class="linenos">3</span><span class="n">s2</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Test if an object is a member of the sequence</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m&#39;</span> <span class="ow">in</span> <span class="n">a_string</span><span class="p">)</span>
<span class="linenos">3</span><span class="nb">print</span><span class="p">(</span><span class="mi">0</span> <span class="ow">in</span> <span class="n">a_list</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> But strings are not lists and lists are not strings. In addition to sharing an abstraction, strings and lists have their own methods. We’ve used the string-find method, and we can see that it doesn’t work on lists.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">i</span> <span class="o">=</span> <span class="n">a_string</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">i</span> <span class="o">=</span> <span class="n">a_list</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>What is the equivalent to string-find with a list? Search the online documentation for this answer and try it out on <code class="docutils literal notranslate"><span class="pre">a_list</span></code> (i.e., fix the broken statement containing <code class="docutils literal notranslate"><span class="pre">a_list.find(10)</span></code>.</p>
</section>
<section id="ale-3-6-what-happens-when">
<h2>ALE 3.6: What happens when?<a class="headerlink" href="#ale-3-6-what-happens-when" title="Permalink to this heading">#</a></h2>
<p>Modules are a powerful way of building off code that others have written and published. However, it often isn’t obvious what the <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code> design pattern is doing for us. To better understand this pattern, consider these two silly scripts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/module32.py</span>
<span class="linenos"> 2</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: At start of script&quot;</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize a variable in this module</span>
<span class="linenos"> 5</span><span class="n">i</span> <span class="o">=</span> <span class="mi">42</span>
<span class="linenos"> 6</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: Initialized i&quot;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">def</span> <span class="nf">still42</span><span class="p">():</span>
<span class="linenos"> 9</span>    <span class="k">return</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">42</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">12</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: At start of main&quot;</span><span class="p">)</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: Before check of __name__ =&quot;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<span class="linenos">15</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">16</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/import.py</span>
<span class="linenos"> 2</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import.py: At start of script&quot;</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">module32</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos"> 7</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import.py: At start of main&quot;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;i = </span><span class="si">{</span><span class="n">module32</span><span class="o">.</span><span class="n">i</span><span class="si">}</span><span class="s2">; &quot;</span><span class="p">)</span>
<span class="linenos">10</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;still42? </span><span class="si">{</span><span class="n">module32</span><span class="o">.</span><span class="n">still42</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import.py: Before check of __name__ =&quot;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<span class="linenos">13</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">14</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> Put these two scripts into a directory.</p>
<p><strong>Step 2.</strong> In the Shell, run: <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">import.py</span></code></p>
<p>Look at the output and then at the code in <code class="docutils literal notranslate"><span class="pre">import.py</span></code> and <code class="docutils literal notranslate"><span class="pre">module32.py</span></code>. Make sure you understand how the Python interpreter moved through each of the files, which statements in each file it executed, and what the value of the special variable <code class="docutils literal notranslate"><span class="pre">__name__</span></code> was as the interpreter processed each file.</p>
<p><strong>Step 3.</strong> In the Shell, run: <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">module32.py</span></code></p>
<p>Compare this output to the last, focusing on the lines that start with <code class="docutils literal notranslate"><span class="pre">module32.py</span></code>. Remember that modules in Python are just scripts that we import to get access to some functions and objects we don’t want to write for ourselves!</p>
</section>
<section id="ale-3-7-imports-and-the-namespace">
<h2>ALE 3.7: Imports and the namespace?<a class="headerlink" href="#ale-3-7-imports-and-the-namespace" title="Permalink to this heading">#</a></h2>
<p>Let’s use the scripts from ALE 3.6 to see what happens to the global namespace as we use two different forms of the import-statement.</p>
<p><strong>Step 1.</strong> In the same directory that you placed <code class="docutils literal notranslate"><span class="pre">import.py</span></code> and <code class="docutils literal notranslate"><span class="pre">module32.py</span></code>, start the interactive Python interpreter (i.e., run <code class="docutils literal notranslate"><span class="pre">python3</span></code> at the Shell prompt).</p>
<p>At the interactive Python interpreter prompt, run: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>This is a list of the names that the interpreter has defined before it reads any of your script.</p>
<p>Next, in the interactive interpreter run: <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module32</span> <span class="pre">import</span> <span class="pre">still42</span></code></p>
<p>You should recognize the printed output from the work you did in ALE 3.6. Notice that the import-statement doesn’t just read a file, but it executes it too.</p>
<p>Finally, in the interactive interpreter, again run: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>Notice what has been added to the namespace. Is it what you expected given the form of the import-statement we used?</p>
<p><strong>Step 2.</strong> Type <code class="docutils literal notranslate"><span class="pre">exit()</span></code> or the key combination <em>control-d</em> at the interactive interpreter’s prompt. This quits the interpreter so that we can again start from a clean environment.</p>
<p><strong>Step 3.</strong> Restart the interactive Python interpreter (i.e., run <code class="docutils literal notranslate"><span class="pre">python3</span></code> at the Shell prompt), and at the interactive Python interpreter prompt, verify that we have a clean environment by running: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>Next, run: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">module32</span></code></p>
<p>Did the printed output change? It won’t because the form of the import-statement doesn’t affect the execution of the script; it only affects what gets put into the namespace.</p>
<p>Finally, in the interactive interpreter, again run: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>Notice what has been added to the namespace. Is it what you expected given the form of the import-statement we used? You might also run <code class="docutils literal notranslate"><span class="pre">dir(module32)</span></code> to see what’s in that particular namespace.</p>
<p><strong>Step 4.</strong> Quit the interactive Python interpreter as you’re done!</p>
</section>
<section id="ale-3-8-scope-and-the-danger-of-globals">
<h2>ALE 3.8: Scope and the Danger of Globals<a class="headerlink" href="#ale-3-8-scope-and-the-danger-of-globals" title="Permalink to this heading">#</a></h2>
<p>Computer scientists talk <em>scope rules</em> when they explain how the interpreter knows which version of a name (i.e., a variable or function) you mean at some point in your script. Scope is a concept closely related to namespaces, which we’ve been discussing since the first chapter. I’ve put off a discussion of scope because it gets … complicated. However, now that you know how to build your own functions, it is time to say a few words about scope.</p>
<p>When we started writing our scripts, we wrote statements without enclosing them in a function, as illustrated with this short script from Chapter 1:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Open the book so we can read it</span>
<span class="linenos">2</span><span class="n">my_open_book</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;CatInTheHat.txt&#39;</span><span class="p">)</span>
<span class="linenos">3</span><span class="c1"># Read the first line using that thing that you computed</span>
<span class="linenos">4</span><span class="n">the_line</span> <span class="o">=</span> <span class="n">my_open_book</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">the_line</span><span class="p">)</span>
</pre></div>
</div>
<p>Since the names <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> and <code class="docutils literal notranslate"><span class="pre">the_line</span></code> do not reside within a function, they are names in Python’s <em>global</em> scope. This was a fine thing to do when our scripts were very short. But as they grew longer, we’ve learned to chunk our work into sensible pieces and encapsulate those pieces in reusable functions.</p>
<p>With functions, we gained a new scope. Names like <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code>, <code class="docutils literal notranslate"><span class="pre">old</span></code>, and <code class="docutils literal notranslate"><span class="pre">new</span></code> in Chapter 3’s <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function are in Python’s <em>local</em> scope, which is separate from Python’s global scope.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">def</span> <span class="nf">my_replace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a string replacing all occurrences of old with new.&quot;&quot;&quot;</span>
<span class="linenos"> 3</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>           <span class="c1"># tracks where we are in the input string</span>
<span class="linenos"> 4</span>    <span class="n">j</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>    <span class="c1"># skip-ahead amount for index calculations</span>
<span class="linenos"> 5</span>    <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># the new string we&#39;re building</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos"> 8</span>        <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">old</span><span class="p">:</span>
<span class="linenos"> 9</span>            <span class="n">new_s</span> <span class="o">=</span> <span class="n">new_s</span> <span class="o">+</span> <span class="n">new</span>
<span class="linenos">10</span>            <span class="n">i</span> <span class="o">+=</span> <span class="n">j</span>
<span class="linenos">11</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">12</span>            <span class="n">new_s</span> <span class="o">=</span> <span class="n">new_s</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos">13</span>            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">return</span> <span class="n">new_s</span>
</pre></div>
</div>
<p>What the difference? A local variable like <code class="docutils literal notranslate"><span class="pre">j</span></code> is available only within the enclosing function. It is not known outside of the body of this function. This is a Good Thing because any names we use within this function won’t conflict with any names used within another function. Think about how hard it would be to write your script if you had to know all the names used by the authors of every module you imported!</p>
<p>Global variables, on the other hand, are names that are known anywhere in your module (i.e., anywhere in the file that holds your script). This includes inside any functions you define in that module. Global names within a module can be made global to any other module by importing them.</p>
<p>The following code block illustrates global and local names using an example without any import-statements.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/scope.py</span>
<span class="linenos"> 2</span><span class="n">capitalize</span> <span class="o">=</span> <span class="kc">True</span>   <span class="c1"># a global variable setting a mode for the script</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">my_print</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="k">if</span> <span class="n">capitalize</span><span class="p">:</span>
<span class="linenos"> 6</span>        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="linenos"> 7</span>    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">def</span> <span class="nf">my_scramble</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos">10</span>    <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">11</span>    <span class="k">return</span> <span class="n">new_s</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;just some fun&#39;</span>
<span class="linenos">14</span><span class="n">my_print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="linenos">15</span><span class="nb">print</span><span class="p">(</span><span class="n">my_scramble</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="linenos">16</span><span class="c1">#print(new_s)  # produces a NameError</span>
</pre></div>
</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">capitalize</span></code> is defined outside of any function and is thus available within any of the functions (e.g., in <code class="docutils literal notranslate"><span class="pre">my_print</span></code>, where it tells us whether we should be capitalizing the first letter of the string we’re about to print). Namespaces keep this global name from colliding with the method of the same name in the <code class="docutils literal notranslate"><span class="pre">str</span></code> object.</p>
<p>The name <code class="docutils literal notranslate"><span class="pre">s</span></code> is both a global and a local name. It is a global name when it is defined on line 13, and a local name inside both <code class="docutils literal notranslate"><span class="pre">my_print</span></code> and <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code>, as formal parameters are local names. These local <code class="docutils literal notranslate"><span class="pre">s</span></code> names hide the global <code class="docutils literal notranslate"><span class="pre">s</span></code> within the two functions. By hide, I mean that you cannot access the global <code class="docutils literal notranslate"><span class="pre">s</span></code> inside these functions; Python assumes you mean the local name. Again, this defined behavior is typically what we want.</p>
<p>Finally, the name <code class="docutils literal notranslate"><span class="pre">new_s</span></code> inside <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code> is a local variable. If you try to print the value of this variable by removing the first comment character on the script’s last line, you’ll get an error. The name is thrown away with the local scope of <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code> as <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code> returns. Go ahead and try it.</p>
<p><strong>The danger.</strong> As you begin writing functions, you’ll find that you need to reference a value in the function that you haven’t sent to the function as a parameter. What should you do?</p>
<ol class="arabic simple">
<li><p>You could add a new formal parameter and then change all the call sites to provide a value for that formal parameter.</p></li>
<li><p>Or, you’ll think to yourself, “I could just put the value I need in the global scope and not have to change the function or any of the call sites.”</p></li>
</ol>
<p>Resist the urge to do the second thing except in one limited case, which I’ll describe in a moment. But first, let’s see what happens to our script if we remove the formal parameters—heck, the global variable is already named what the two function bodies reference, right?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/scope_broken.py</span>
<span class="linenos"> 2</span><span class="n">capitalize</span> <span class="o">=</span> <span class="kc">True</span>   <span class="c1"># a global variable setting a mode for the script</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">my_print</span><span class="p">():</span>
<span class="linenos"> 5</span>    <span class="k">if</span> <span class="n">capitalize</span><span class="p">:</span>
<span class="linenos"> 6</span>        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="linenos"> 7</span>    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">def</span> <span class="nf">my_scramble</span><span class="p">():</span>
<span class="linenos">10</span>    <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">11</span>    <span class="k">return</span> <span class="n">new_s</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;just some fun&#39;</span>
<span class="linenos">14</span><span class="n">my_print</span><span class="p">()</span>
<span class="linenos">15</span><span class="nb">print</span><span class="p">(</span><span class="n">my_scramble</span><span class="p">())</span>
</pre></div>
</div>
<p>The script dies with an <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> on line 6, where we tried to update the global variable within the function <code class="docutils literal notranslate"><span class="pre">my_print</span></code>. Python gives you a way to fix this with a global-statement, but you’re just heading down dark and bumpy road with more problems to come. For example, did you really want to update the global variable or just a local copy of it?</p>
<p>The only time in this book that you’ll be encouraged to use a global variable is in situations like we saw with <code class="docutils literal notranslate"><span class="pre">capitalize</span></code>. Think about how we’re using this name: We set it once at the start of the script and then only ever reference its value. We never try to change it. Global variables are great things to read, and a real pain to update. You’ll feel this pain if you ever have to debug a global variable that you read and write all over your (probably long) script.</p>
<p>If you want to know more about scope and the scope rules in Python, I recommend <a class="reference external" href="https://realpython.com/python-scope-legb-rule/">this Real Python tutorial</a>.</p>
<p>[Version 20230709]</p>
</section>
<section id="ale-4-1-this-and-that">
<h2>ALE 4.1: This and that<a class="headerlink" href="#ale-4-1-this-and-that" title="Permalink to this heading">#</a></h2>
<p>Python allows you to assign multiple values to multiple names in one assignment-statement.  Here are the semantics:</p>
<ul class="simple">
<li><p>The lefthand side of the assignment operator must be a comma-separated list of names.</p></li>
<li><p>The righthand side of the assignment operator can be</p>
<ul>
<li><p>a comma-separated values, or</p></li>
<li><p>a value that adheres to the sequence abstraction.</p></li>
</ul>
</li>
</ul>
<p>The first value on the left is given the first name on the right; the second on the left is given the second on the right;  and so forth. For the operation to complete without an error, the comma-separated lists on both sides of the assignment operator must have the same number of elements. Similarly, the length of the sequence value on the right must be the same as the number of comma-separated names on the left.</p>
<p>This is not an operation you’d want to do all the time, since it can quickly become confusing to lump different things together in a single assignment statement. There are, however, two cases where this functionality is very helpful:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># CASE 1: Unpacking a sequence into its component pieces</span>
<span class="linenos">2</span><span class="c1"># so that you can operate on each separately</span>
<span class="linenos">3</span><span class="n">answer</span> <span class="o">=</span> <span class="s1">&#39;16.83 million books are in the Harvard library&#39;</span>
<span class="linenos">4</span>
<span class="hll"><span class="linenos">5</span><span class="n">num</span><span class="p">,</span> <span class="n">magnitude</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">answer</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</span><span class="linenos">6</span>
<span class="linenos">7</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;num =&quot;</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
<span class="linenos">8</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;magnitude =&quot;</span><span class="p">,</span> <span class="n">magnitude</span><span class="p">)</span>
<span class="linenos">9</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;units =&quot;</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># CASE 2: Swapping two values</span>
<span class="linenos">2</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">3</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">4</span>
<span class="hll"><span class="linenos">5</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>
</span><span class="linenos">6</span>
<span class="linenos">7</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;x = </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">, y = </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> Write an equivalent sequence of statements to implement the swapping of two values without using multiple assignment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Swapping two values without multiple assignment</span>
<span class="linenos">2</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">3</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="c1"># YOUR CODE HERE</span>
<span class="linenos">6</span>
<span class="linenos">7</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;x = </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">, y = </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> Look at the code in CASE 2 and the code that you wrote. Which is easier to understand?</p>
</section>
<section id="ale-4-2-tuples-a-box-for-everything">
<h2>ALE 4.2: Tuples, a box for everything<a class="headerlink" href="#ale-4-2-tuples-a-box-for-everything" title="Permalink to this heading">#</a></h2>
<p>A <em>tuple</em> is yet another kind of Python sequence.  They may look like a Python <code class="docutils literal notranslate"><span class="pre">list</span></code>, but they are immutable.</p>
<p>Be careful.  Tuples are always printed with surrounding parentheses, but you don’t need parentheses to create a tuple. A comma is sufficient.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">t1</span> <span class="o">=</span> <span class="s1">&#39;is blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Who changed the sky?!?&#39;</span>
<span class="linenos"> 2</span><span class="nb">print</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="n">t2</span> <span class="o">=</span> <span class="s1">&#39;is blue&#39;</span><span class="p">,</span> <span class="mi">1</span>
<span class="linenos"> 5</span><span class="nb">print</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">t3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="linenos"> 8</span><span class="nb">print</span><span class="p">(</span><span class="n">t3</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="n">t4</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">11</span><span class="nb">print</span><span class="p">(</span><span class="n">t4</span><span class="p">)</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="nb">print</span><span class="p">(</span><span class="n">t3</span> <span class="o">==</span> <span class="n">t4</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> Run the code in the code block above. Notice the different ways you can make a tuple.</p>
<p><strong>Step 2.</strong> And here is some stuff not to do. Execute each code statement and talk with your partner(s) about what’s wrong.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># an error</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># not an error, but hard to understand</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 3.</strong> We’ve been looking at tuples with just two values in them, but a tuple can also contain a single value or many values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">a_big_tuple</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="n">a_big_tuple</span><span class="p">)</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="n">a_big_tuple</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">a_big_tuple</span><span class="p">)</span>
<span class="linenos">6</span>
<span class="linenos">7</span><span class="n">a_big_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,)</span>
<span class="linenos">8</span><span class="nb">print</span><span class="p">(</span><span class="n">a_big_tuple</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that you can add a comma after the last element in a tuple, and the Python interpreter happily throws it away. However, you need this to be able to define a tuple with a single element:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">a_tuple</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="n">a_tuple</span><span class="p">)</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="n">not_a_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">not_a_tuple</span><span class="p">)</span>
<span class="linenos">6</span>
<span class="linenos">7</span><span class="nb">print</span><span class="p">(</span><span class="n">a_tuple</span> <span class="o">==</span> <span class="n">not_a_tuple</span><span class="p">)</span>
</pre></div>
</div>
<p>Before you execute the following code block, answer for yourself if the expression that is the parameter to <code class="docutils literal notranslate"><span class="pre">print</span></code> will evaluate <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>, given the definitions of the variables from above.</p>
<p>Now run the code block to check your work.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">a_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">not_a_tuple</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We’ve played around with the syntax of tuples, and now I’ll mention one reason why they are useful. One of their most convenient uses is to return multiple values from a function. Remember that a function returns only a single object. A tuple is a convenient way to box up every result you have computed in a function and return them in a single object, which the caller can pull apart using multiple assignment!</p>
</div>
</section>
<section id="ale-4-3-but-it-must-be-true">
<h2>ALE 4.3: But it must be true!<a class="headerlink" href="#ale-4-3-but-it-must-be-true" title="Permalink to this heading">#</a></h2>
<p>When you’re first coding a solution to a problem, you will find yourself making assumptions. You could document them in a comment, but it is often more helpful to include an <em>assert-statement</em> in your code.</p>
<p>The assert-statement takes a condition, which is what you expect to be <code class="docutils literal notranslate"><span class="pre">True</span></code> every time you hit this point in your code. As long as the condition evaluates <code class="docutils literal notranslate"><span class="pre">True</span></code>, execution proceeds as if the assert-statement wasn’t there (i.e., your assumption holds). However, if the assert condition evaluates to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the statement throws an <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>, which tells you that something about your thinking was wrong.</p>
<p><strong>Step 1.</strong> To experience an assertion failure, run the following silly example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">the_sky</span> <span class="o">=</span> <span class="s1">&#39;is red&#39;</span>
<span class="linenos">2</span><span class="k">assert</span><span class="p">(</span><span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span><span class="p">)</span>
<span class="linenos">3</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It must be because execution got here!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> Be careful with your parentheses in this statement.  <code class="docutils literal notranslate"><span class="pre">assert</span></code> is <strong>not</strong> a command, but a kind of Python statement. We can rewrite the code block above in the follow ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Adds a space after `assert`</span>
<span class="linenos">2</span><span class="n">the_sky</span> <span class="o">=</span> <span class="s1">&#39;is red&#39;</span>
<span class="linenos">3</span><span class="k">assert</span> <span class="p">(</span><span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span><span class="p">)</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It must be because execution got here!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Removes the parentheses on the assert condition</span>
<span class="linenos">2</span><span class="n">the_sky</span> <span class="o">=</span> <span class="s1">&#39;is red&#39;</span>
<span class="linenos">3</span><span class="k">assert</span> <span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It must be because execution got here!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the two code blocks to prove to yourself that they’re all equivalent.</p>
<p><strong>Step 3.</strong> An assert-statement also takes an optional second argument, which is the string you’d like printed when the assertion fails. Make sure you see the difference between the first assert-statement, which doesn’t do what we want, and the two that follow, which do.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># The INCORRECT way to include an assert message</span>
<span class="linenos">2</span><span class="n">the_sky</span> <span class="o">=</span> <span class="s1">&#39;is red&#39;</span>
<span class="linenos">3</span><span class="k">assert</span><span class="p">(</span><span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Who changed the sky?!?&#39;</span><span class="p">)</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It must be because execution got here!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># The CORRECT way to include an assert message</span>
<span class="linenos">2</span><span class="n">the_sky</span> <span class="o">=</span> <span class="s1">&#39;is red&#39;</span>
<span class="linenos">3</span><span class="k">assert</span> <span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Who changed the sky?!?&#39;</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It must be because execution got here!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># The CORRECT way to use parentheses around the assert condition</span>
<span class="linenos">2</span><span class="n">the_sky</span> <span class="o">=</span> <span class="s1">&#39;is red&#39;</span>
<span class="linenos">3</span><span class="k">assert</span> <span class="p">(</span><span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span><span class="p">),</span> <span class="s1">&#39;Who changed the sky?!?&#39;</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It must be because execution got here!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 4.</strong> Where you put the closing parenthesis makes all the difference. Keep in mind that parentheses mean many different things in Python depending upon the context, as we just saw with tuples!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Parentheses surrounding a comma-separated list of objects</span>
<span class="linenos">2</span><span class="c1"># AFTER A FUNCTION NAME mean: &quot;Here are the arguments.&quot;</span>
<span class="linenos">3</span><span class="nb">print</span><span class="p">(</span><span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Who changed the sky?!?&#39;</span><span class="p">)</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="c1"># Parentheses surrounding a comma-separated list of objects</span>
<span class="linenos">6</span><span class="c1"># IN SOME OTHER CONTEXTS mean: &quot;Make a tuple.&quot;</span>
<span class="linenos">7</span><span class="n">a_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;is blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Who changed the sky?!?&#39;</span><span class="p">)</span>
<span class="linenos">8</span><span class="nb">print</span><span class="p">(</span><span class="n">a_tuple</span><span class="p">)</span>
</pre></div>
</div>
<p>Can you explain what was wrong in this INCORRECT use of assert?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span><span class="p">(</span><span class="n">the_sky</span> <span class="o">==</span> <span class="s1">&#39;is blue&#39;</span><span class="p">,</span> <span class="s1">&#39;Who changed the sky?!?&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ale-4-4-a-mashup">
<h2>ALE 4.4: A Mashup<a class="headerlink" href="#ale-4-4-a-mashup" title="Permalink to this heading">#</a></h2>
<p>Let’s combine what we learned in the ALEs 4.1-4.3 with the basics of web programming from the chapter to create what’s called a <em>mashup</em>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">qweb8.py</span></code> script at the end of the chapter queries a single web resource. Had we programmed it to query multiple resources, we would written what’s called a mashup: an application that grabs content from multiple web services to power its own new service. We can build an amazing range of applications by taking advantage of the information available to us around the Internet. Look at what the researchers at IBM accomplished with <a class="reference external" href="https://www.techrepublic.com/article/ibm-watson-the-inside-story-of-how-the-jeopardy-winning-supercomputer-was-born-and-what-it-wants-to-do-next/">Watson, a software program running on 100 servers that was able to quickly sift through 200 million pages of information</a>. In 2011, IBM Watson took on the best-ever human contestants in the TV quiz show Jeopardy, and it beat them.</p>
<p>Today, we talk to our cell phones and home appliances running software agents (e.g., Apple’s Siri, Amazon’s Alexa, Google’s Assistant, and Microsoft’s Cortana), which do much the same work: You ask them a question. They analyze and parse the wave form that is your question, trying to understand what you want to know. Then they query many different resources around the Internet and evaluate what they get back to determine if the information is pertinent to the question they think you asked. Finally, they take the best ranked response and present it to you.</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>As September 2020, none of the assistants I tried could answer this seemingly simple question. In July 2023, I asked ChatGPT 3.5 this question, and it answered it, although it admitted that its data was two years old.</p>
</aside>
<p>While these software agents are quite sophisticated, we can build a script that does mashup work. In particular, let’s say we want to know: <em>does Harvard Library contain more books than Wikipedia has articles?</em></p>
<p>The script <code class="docutils literal notranslate"><span class="pre">mashup32.py</span></code> (listed below) breaks this question into its two pieces and asks each to <a class="reference external" href="https://www.wolframalpha.com/">Wolfram Alpha</a>, a site on the Internet with the goal of accepting free-form questions and returning relevant and clearly presented answers. We can think of it as a voice assistant without the voice interface.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap04/mashup32.py -- not executable without a Wolfram Alpha dev key</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">requests</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">xmltodict</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">def</span> <span class="nf">walpha</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">appid</span><span class="p">):</span>
<span class="linenos"> 6</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Asking Wolfram|Alpha &quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">&quot; ...&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<span class="linenos"> 8</span>        <span class="s1">&#39;http://api.wolframalpha.com/v2/query&#39;</span><span class="p">,</span>
<span class="linenos"> 9</span>        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
<span class="linenos">10</span>                <span class="s1">&#39;appid&#39;</span><span class="p">:</span> <span class="n">appid</span><span class="p">,</span>
<span class="linenos">11</span>                <span class="s1">&#39;podtitle&#39;</span><span class="p">:</span> <span class="s1">&#39;Result&#39;</span>
<span class="linenos">12</span>                <span class="p">}</span>
<span class="linenos">13</span>    <span class="p">)</span>
<span class="linenos">14</span>    <span class="k">assert</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="n">jlike_response</span> <span class="o">=</span> <span class="n">xmltodict</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="linenos">17</span>    <span class="n">answer</span> <span class="o">=</span> <span class="n">jlike_response</span><span class="p">[</span><span class="s2">&quot;queryresult&quot;</span><span class="p">][</span><span class="s2">&quot;pod&quot;</span><span class="p">][</span><span class="s2">&quot;subpod&quot;</span><span class="p">][</span><span class="s2">&quot;plaintext&quot;</span><span class="p">]</span>
<span class="linenos">18</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;... answered &quot;</span><span class="si">{</span><span class="n">answer</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
<span class="linenos">19</span>    <span class="k">return</span> <span class="n">answer</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">22</span>    <span class="c1"># Compare wikipedia&#39;s and Harvard library&#39;s knowledge base.</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Grab Mike&#39;s Wolfram Alpha develop key</span>
<span class="linenos">25</span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;walpha-id.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">26</span>        <span class="n">appid</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos">27</span>
<span class="linenos">28</span>    <span class="n">h_query</span> <span class="o">=</span> <span class="s1">&#39;how many books are in the harvard library&#39;</span>
<span class="linenos">29</span>    <span class="n">h_answer</span> <span class="o">=</span> <span class="n">walpha</span><span class="p">(</span><span class="n">h_query</span><span class="p">,</span> <span class="n">appid</span><span class="p">)</span>
<span class="linenos">30</span>    <span class="n">h_num</span><span class="p">,</span> <span class="n">h_magnitude</span><span class="p">,</span> <span class="n">h_units</span> <span class="o">=</span> <span class="n">h_answer</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="linenos">31</span>
<span class="linenos">32</span>    <span class="n">w_query</span> <span class="o">=</span> <span class="s1">&#39;how big is wikipedia&#39;</span>
<span class="linenos">33</span>    <span class="n">w_answer</span> <span class="o">=</span> <span class="n">walpha</span><span class="p">(</span><span class="n">w_query</span><span class="p">,</span> <span class="n">appid</span><span class="p">)</span>
<span class="linenos">34</span>    <span class="n">w_num</span><span class="p">,</span> <span class="n">w_magnitude</span><span class="p">,</span> <span class="n">w_units</span> <span class="o">=</span> <span class="n">w_answer</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="linenos">35</span>
<span class="linenos">36</span>    <span class="k">assert</span><span class="p">(</span><span class="n">h_magnitude</span> <span class="o">==</span> <span class="n">w_magnitude</span><span class="p">)</span>
<span class="linenos">37</span>    <span class="n">h_num</span><span class="p">,</span> <span class="n">w_num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">h_num</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">w_num</span><span class="p">)</span>
<span class="linenos">38</span>    <span class="k">if</span> <span class="n">h_num</span> <span class="o">&gt;</span> <span class="n">w_num</span><span class="p">:</span>
<span class="linenos">39</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Harvard Library has more </span><span class="si">{</span><span class="n">h_units</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">h_num</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">h_magnitude</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
<span class="linenos">40</span>              <span class="sa">f</span><span class="s1">&#39;than Wikipedia has </span><span class="si">{</span><span class="n">w_units</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">w_num</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">h_magnitude</span><span class="si">}</span><span class="s1">).&#39;</span><span class="p">)</span>
<span class="linenos">41</span>    <span class="k">elif</span> <span class="n">h_num</span> <span class="o">&lt;</span> <span class="n">w_num</span><span class="p">:</span>
<span class="linenos">42</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Wikipedia has more </span><span class="si">{</span><span class="n">w_units</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">w_num</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">w_magnitude</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
<span class="linenos">43</span>              <span class="sa">f</span><span class="s1">&#39;than Harvard Library has </span><span class="si">{</span><span class="n">h_units</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">h_num</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">h_magnitude</span><span class="si">}</span><span class="s1">).&#39;</span><span class="p">)</span>
<span class="linenos">44</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">45</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;They&#39;re the same size (</span><span class="si">{h_units}</span><span class="s2"> and </span><span class="si">{w_units}</span><span class="s2">)!&quot;</span><span class="p">)</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">48</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> See if you can understand the general logic of this script. It does contain two programming language features we haven’t studied yet:</p>
<ol class="arabic simple">
<li><p>It accepts and manipulates <em>floating-point numbers</em>, which are simply numbers with a decimal point and possibly a fractional part. We’ll cover this data type in Chapter 7.</p></li>
<li><p>The Wolfram Alpha API also doesn’t allow me to choose the format I’d like for the results; it only returns results in XML. No problem! I just looked up and used a library that converted this XML into a JSON-like dictionary.</p></li>
</ol>
<p><strong>Step 2.</strong> Would you like to run <code class="docutils literal notranslate"><span class="pre">mashup32.py</span></code>? If you try, you’ll find that you don’t have a file called <code class="docutils literal notranslate"><span class="pre">walpha-id.txt</span></code>. This file exists in my personal world — I have a Wolfram Alpha developer <code class="docutils literal notranslate"><span class="pre">appid</span></code>. Without an <code class="docutils literal notranslate"><span class="pre">appid</span></code>, the Wolfram Alpha API won’t accept your query. I’d say most sites with APIs require you to register as a developer so that they can identify bad actors (e.g., someone who tries to overload their servers).</p>
<p>If you want to build your own mashup scripts, just realize that you’ll probably have to register and receive an <code class="docutils literal notranslate"><span class="pre">appid</span></code> on the sites you use. Since this <code class="docutils literal notranslate"><span class="pre">appid</span></code> is specific to you, you shouldn’t share it with others or store it in public code repositories like GitHub. You’ll notice that I grab mine from a local file on my machine so that I can share with you my script, but not my <code class="docutils literal notranslate"><span class="pre">appid</span></code>. You too should do something like this when you write your scripts.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Don’t ever write your private information as a literal in the scripts you develop or store it in GitHub.</p>
</div>
<p><strong>Step 3 (optional).</strong> What might you try to do now that you have some skill in web programming? For example, <code class="docutils literal notranslate"><span class="pre">mashup32.py</span></code> uses the size of the English version of Wikipedia. You may consider this unfair because Harvard Library’s book count includes books written in many different languages. You could sign up for your own Wolfram Alpha <code class="docutils literal notranslate"><span class="pre">appid</span></code> and change <code class="docutils literal notranslate"><span class="pre">mashup32.py</span></code> to ask your own version of the question. Perhaps a software agent of this type might make an exciting project for you.</p>
</section>
<section id="ale-4-5-json-makes-my-eyes-ache">
<h2>ALE 4.5: JSON makes my eyes ache<a class="headerlink" href="#ale-4-5-json-makes-my-eyes-ache" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">qweb7.py</span></code> script illustrated how we can pull apart a response from Harvard’s LibraryCloud API and determine if the Harvard Library system has a copy of <em>The Cat in the Hat</em> by Dr. Seuss*.* But this script printed only the titles of each resource in the response.</p>
<p>I’ve copied <code class="docutils literal notranslate"><span class="pre">qweb7.py</span></code> below, except that it asks for the top 4 results. See if you can extend the code in the following ways. Each will require you to read through the dumped JSON response and figure out the sequence of indexing operations you need to do to access the information you need to print. Be careful as some JSON fields may be a Python dictionary in one item and a Python list in another, as our code illustrated with the <code class="docutils literal notranslate"><span class="pre">'titleInfo'</span></code> field.</p>
<ol class="arabic simple">
<li><p>Print the author’s name.</p></li>
<li><p>Print the type of resource (i.e., the item is a text or a still image).</p></li>
<li><p>If the resource is a text and the item includes an abstract, print it. The abstract for <em>The Cat in the Hat</em> is “Two children sitting at home on a rainy day are visited by the Cat in the Hat who shows them some tricks and games.”</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap04/qweb7.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">requests</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">json</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos"> 6</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Searching HOLLIS for &quot;The Cat in the Hat&quot;&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>    <span class="c1"># Concatenate the first 3 components of a URL for HTTP</span>
<span class="linenos"> 9</span>    <span class="n">protocol</span> <span class="o">=</span> <span class="s1">&#39;https&#39;</span>
<span class="linenos">10</span>    <span class="n">hostname</span> <span class="o">=</span> <span class="s1">&#39;api.lib.harvard.edu&#39;</span>
<span class="linenos">11</span>    <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/v2/items.json&#39;</span>
<span class="linenos">12</span>    <span class="n">url</span> <span class="o">=</span> <span class="n">protocol</span> <span class="o">+</span> <span class="s1">&#39;://&#39;</span> <span class="o">+</span> <span class="n">hostname</span> <span class="o">+</span> <span class="n">path</span>
<span class="linenos">13</span>
<span class="linenos">14</span>    <span class="c1"># Describe the query string as a Python dictionary</span>
<span class="linenos">15</span>    <span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="s1">&#39;The Cat in the Hat&#39;</span><span class="p">,</span>
<span class="linenos">16</span>             <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">4</span>
<span class="linenos">17</span>    <span class="p">}</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Add a field to the request header saying what we accept</span>
<span class="linenos">20</span>    <span class="n">accept</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">}</span>
<span class="linenos">21</span>
<span class="linenos">22</span>    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">accept</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Read the response body in JSON format and print it</span>
<span class="linenos">25</span>    <span class="n">j</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos">26</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;response.json() =&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="linenos">27</span>
<span class="linenos">28</span>    <span class="nb">print</span><span class="p">()</span>
<span class="linenos">29</span>
<span class="linenos">30</span>    <span class="k">if</span> <span class="n">j</span><span class="p">[</span><span class="s1">&#39;pagination&#39;</span><span class="p">][</span><span class="s1">&#39;numFound&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">31</span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Zero results&#39;</span><span class="p">)</span>
<span class="linenos">32</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">33</span>        <span class="c1"># Process each returned response</span>
<span class="linenos">34</span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="s1">&#39;mods&#39;</span><span class="p">]):</span>
<span class="linenos">35</span>            <span class="c1"># Print title info</span>
<span class="linenos">36</span>            <span class="n">ti</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;titleInfo&#39;</span><span class="p">]</span>
<span class="linenos">37</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ti</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
<span class="linenos">38</span>                <span class="c1"># Lots of title info; just print the first</span>
<span class="linenos">39</span>                <span class="n">ti</span> <span class="o">=</span> <span class="n">ti</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">40</span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Title #</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="linenos">41</span>            <span class="k">if</span> <span class="s1">&#39;nonSort&#39;</span> <span class="ow">in</span> <span class="n">ti</span><span class="p">:</span>
<span class="linenos">42</span>                <span class="nb">print</span><span class="p">(</span><span class="n">ti</span><span class="p">[</span><span class="s1">&#39;nonSort&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="linenos">43</span>            <span class="nb">print</span><span class="p">(</span><span class="n">ti</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">46</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>[Version 20230709]</p>
</section>
<section id="ale-5-1-too-many-guesses">
<h2>ALE 5.1: Too many guesses<a class="headerlink" href="#ale-5-1-too-many-guesses" title="Permalink to this heading">#</a></h2>
<p>In this chapter, we learned how to build a guess-the-number game that ran until the player correctly guessed the secret number, but some games limit the number of guesses a player has. For example, the online game <a class="reference external" href="https://www.nytimes.com/games/wordle/index.html">Wordle</a> permits you to make only six guesses, and if you haven’t guessed the secret word within those six guesses, the game ends. Wordle’s designer was inspired in part by the game Mastermind, and I own a Mini Mastermind game that also allows no more than six guesses of the hidden pattern of colored pegs.</p>
<p><strong>Step 1.</strong> Your task in this exercise is to change <code class="docutils literal notranslate"><span class="pre">guess32.py</span></code> into a game that gives the player a maximum of six guesses. If player doesn’t guess the secret number within six turns, the game should print an appropriate message and terminate.</p>
<p>Start your work from our existing <code class="docutils literal notranslate"><span class="pre">guess32.py</span></code> script, practicing Steps 5-8 of our problem-solving process.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap05/guess32.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos"> 5</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;## Welcome to GUESS THE NUMBER! ##&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>    <span class="n">secret</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="linenos"> 8</span>    <span class="c1"># print(f&#39;DEBUG: The secret number is {secret}&#39;)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>   <span class="c1"># our game loop</span>
<span class="linenos">11</span>        
<span class="linenos">12</span>        <span class="c1"># Grab a guess from the player</span>
<span class="linenos">13</span>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">14</span>            <span class="k">try</span><span class="p">:</span>
<span class="linenos">15</span>                <span class="n">guess</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please input your guess: &#39;</span><span class="p">))</span>
<span class="linenos">16</span>                <span class="k">break</span>
<span class="linenos">17</span>            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<span class="linenos">18</span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Guesses must be an integer. Try again...&#39;</span><span class="p">)</span>
<span class="linenos">19</span>        <span class="c1"># print(f&#39;DEBUG: You guessed {guess}&#39;)</span>
<span class="linenos">20</span>
<span class="linenos">21</span>        <span class="c1"># Check guess against the secret</span>
<span class="linenos">22</span>        <span class="k">if</span> <span class="n">guess</span> <span class="o">&lt;</span> <span class="n">secret</span><span class="p">:</span>
<span class="linenos">23</span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Too small!&#39;</span><span class="p">)</span>
<span class="linenos">24</span>        <span class="k">elif</span> <span class="n">guess</span> <span class="o">==</span> <span class="n">secret</span><span class="p">:</span>
<span class="linenos">25</span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exactly! You win!&#39;</span><span class="p">)</span>
<span class="linenos">26</span>            <span class="k">break</span>
<span class="linenos">27</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">28</span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Too big!&#39;</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">31</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> When you’ve got a working solution, take some time to compare it with the solution produced by your friends. When you’re looking at each other’s code, think about these questions:</p>
<ol class="arabic simple">
<li><p>What creative things did you do that they didn’t do? Does their code include creative ideas that you didn’t think about doing?</p></li>
<li><p>Did you take different approaches to limiting the number of iterations of the game loop? Of the approaches taken, notice where the comparison that ends the game loop is done. What makes its placement a good idea in each different solution?</p></li>
<li><p>In the different solutions, how easy is it to know what to change if you wanted to provide the player with 10 guesses instead of 6? If the limit is buried in the code of the script, how might you make it easier to find and be sure you made all the changes necessary?</p></li>
</ol>
</section>
<section id="ale-5-2-so-many-ways-to-pick">
<h2>ALE 5.2: So many ways to pick<a class="headerlink" href="#ale-5-2-so-many-ways-to-pick" title="Permalink to this heading">#</a></h2>
<p>Our guess-the-number game used the <code class="docutils literal notranslate"><span class="pre">randint</span></code> function in <a class="reference external" href="https://docs.python.org/3/library/random.html">Python’s <code class="docutils literal notranslate"><span class="pre">random</span></code> library</a>. This function is quite convenient if we want to pick a random integer in a closed range.</p>
<p><strong>Step 1.</strong> Using <code class="docutils literal notranslate"><span class="pre">randint</span></code>, what statement (or small number of statements) could you write to randomly choose an even integer between 2 and 100? Put your code in the next code block, and run your solution several times to make sure you did it correctly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Randomly choose an even integer in the range [2, 100]</span>
<span class="linenos">2</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># YOUR SOLUTION HERE</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> The <code class="docutils literal notranslate"><span class="pre">random</span></code> library also provides a <code class="docutils literal notranslate"><span class="pre">randrange</span></code> function that allows you to specify a <code class="docutils literal notranslate"><span class="pre">step</span></code> value that is the distance between each integer in the range. Use <code class="docutils literal notranslate"><span class="pre">randrange</span></code> instead of <code class="docutils literal notranslate"><span class="pre">randint</span></code> to again randomly choose an even integer between 2 and 100.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Randomly choose an even integer in the range [2, 100]</span>
<span class="linenos">2</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># YOUR SOLUTION HERE</span>
</pre></div>
</div>
<p><strong>Step 3.</strong> Moving away from integers, the <code class="docutils literal notranslate"><span class="pre">random</span></code> library also includes a function called <code class="docutils literal notranslate"><span class="pre">choice</span></code> that makes a random selection from a given sequence. Build yourself a sequence object containing 5 jokes from <a class="reference external" href="http://icanhazdadjoke.com">icanhazdadjoke.com</a>, and then use the choice function to randomly choose one of them. Run your code multiple times.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Randomly choose one of five bad dad jokes</span>
<span class="linenos">2</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># YOUR SOLUTION HERE</span>
</pre></div>
</div>
<p><strong>Step 4.</strong> Finally, copy your solution to Step 3 into the code block below. Now read about the function <code class="docutils literal notranslate"><span class="pre">random.seed</span></code> in the <code class="docutils literal notranslate"><span class="pre">random</span></code> library, and figure out how to use it to print out <em>the same bad dad joke every time</em> the code block is run. Gain certainty about your solution by wrapping it in a loop that iterates 25 times and prints the random choice each time. Your dad would be so proud.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Randomly choose the SAME bad dad joke with each choice</span>
<span class="linenos">2</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># YOUR SOLUTION HERE</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You’ve just learned how you can seed the pseudorandom generator inside Python’s <code class="docutils literal notranslate"><span class="pre">random</span></code> library to start at the same place in the pseudorandom sequence on each run. Use this you want to test your code using the same pseudorandom sequence.</p>
</div>
</section>
<section id="ale-5-3-catching-exceptions">
<h2>ALE 5.3: Catching exceptions<a class="headerlink" href="#ale-5-3-catching-exceptions" title="Permalink to this heading">#</a></h2>
<p>Our guess-the-number game used a try-except-statement to give the user another opportunity to input a guess if what they typed wasn’t “a string in an integer suit,” as defined by Python’s <code class="docutils literal notranslate"><span class="pre">int</span></code> type conversion function.</p>
<p><strong>Step 1.</strong> The following code block repeats that <em>design pattern</em> we used in <code class="docutils literal notranslate"><span class="pre">guess32.py</span></code>. Go ahead and run it a few times to make sure you understand how it works; feel free to insert other print statements if you want to know what executes and what doesn’t under different inputs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">2</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">3</span>        <span class="n">guess</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please input your guess: &#39;</span><span class="p">))</span>
<span class="linenos">4</span>        <span class="k">break</span>
<span class="linenos">5</span>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<span class="linenos">6</span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Guesses must be an integer. Try again...&#39;</span><span class="p">)</span>
<span class="linenos">7</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Your input guess:&#39;</span><span class="p">,</span> <span class="n">guess</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> What input-checking code would you write if we asked the user to input one of the four <code class="docutils literal notranslate"><span class="pre">suits</span></code> in a deck of playing cards? The following code block will help get you started:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">suits</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;clubs&#39;</span><span class="p">,</span> <span class="s1">&#39;diamonds&#39;</span><span class="p">,</span> <span class="s1">&#39;hearts&#39;</span><span class="p">,</span> <span class="s1">&#39;spades&#39;</span><span class="p">]</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="c1"># YOUR SOLUTION HERE</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Your input suit:&#39;</span><span class="p">,</span> <span class="n">suit</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 3.</strong> What did you learn in Step 2 about using a try-except-statement?</p>
</section>
<section id="ale-5-4-adding-metadata-to-your-messages">
<h2>ALE 5.4: Adding metadata to your messages<a class="headerlink" href="#ale-5-4-adding-metadata-to-your-messages" title="Permalink to this heading">#</a></h2>
<p>The networked guess-the-number game we’ve developed has the server send the client a message that it simply prints. In more interesting network conversations, one endpoint wants to send some data to the other endpoint and include with these data some <em>information about the data</em>. In computer science, this information about the data is called <em>metadata</em>.</p>
<p>In this exercise, you are going to modify our guess-the-number game so that server sends messages that include metadata (the client messages are unchanged). The server will continue to send text that the client should print for the user, and it will add metadata indicating the color of the text when it is printed. The game will use color to add a visual hint about how good each guess was.</p>
<p>Here are the new rules for our guess-the-number game:</p>
<ul class="simple">
<li><p>If the absolute value of the difference between the user’s guess and the secret is greater than 25, the client should print “Too small!” or “Too big!” in blue text, which will indicate that the user’s guess is very cold.</p></li>
<li><p>If the absolute value of the difference between the user’s guess and the secret is between 1 and 5 inclusive, the client should print “Too small!” or “Too big!” in red text, which will indicate that the user’s guess is very hot.</p></li>
<li><p>When the user guesses the secret, the client should print “Exactly! You win!” in green text.</p></li>
<li><p>In all other situations, the client should print the server’s response in black text.</p></li>
</ul>
<p>The messages we send between the server and the client will be split into two pieces: a header containing the metadata; and a body containing the text to be printed. The metadata indicates the color of the text in the message’s body. The escape sequences should NOT be in the message’s body.</p>
<p>Remember that our messages are just text strings, and so a message containing a header and a body is just the concatenation of two text strings. We aren’t doing anything except appending a header to the front of the text string we’re currently sending from the server to the client.</p>
<p><strong>Step 1.</strong> To design the server’s messages, you need to answer these questions:</p>
<ol class="arabic simple">
<li><p>What are all information you’ll put directly (or in an encoded fashion) in the message header?</p></li>
<li><p>How will the client know where the message header ends and the message body begins?</p></li>
</ol>
<p>There are several ways to answer these questions. Debate a few ideas with your friends, and then settle on the simplest approach. This will inform how you’ll encode the values you enumerated into the previous question.</p>
<p><strong>Step 2.</strong> To code this new version of the game, you need to know how to print text in color on a terminal screen. This involves sending some text to <code class="docutils literal notranslate"><span class="pre">print</span></code> that it interprets as an escape sequence. I demonstrate how this is done in the modified client code below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap05/ale04-client.py</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">socket32</span> <span class="kn">import</span> <span class="n">create_new_socket</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="n">HOST</span> <span class="o">=</span> <span class="s1">&#39;127.0.0.1&#39;</span>  <span class="c1"># The server&#39;s hostname or IP address</span>
<span class="linenos"> 5</span><span class="n">PORT</span> <span class="o">=</span> <span class="mi">65432</span>        <span class="c1"># The port used by the server</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Color codes for terminal printing</span>
<span class="linenos"> 8</span><span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[0m&#39;</span>
<span class="linenos"> 9</span><span class="n">black</span> <span class="o">=</span>   <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[30m&#39;</span>
<span class="linenos">10</span><span class="n">red</span> <span class="o">=</span>     <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[31m&#39;</span>
<span class="linenos">11</span><span class="n">green</span> <span class="o">=</span>   <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[32m&#39;</span>
<span class="linenos">12</span><span class="n">blue</span> <span class="o">=</span>    <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[34m&#39;</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">15</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;## Welcome to &#39;</span> <span class="o">+</span> <span class="n">blue</span> <span class="o">+</span> <span class="s1">&#39;GUESS &#39;</span>
<span class="linenos">16</span>         <span class="o">+</span> <span class="n">green</span> <span class="o">+</span> <span class="s1">&#39;THE &#39;</span> <span class="o">+</span> <span class="n">red</span> <span class="o">+</span> <span class="s1">&#39;NUMBER&#39;</span>
<span class="linenos">17</span>         <span class="o">+</span> <span class="n">default</span> <span class="o">+</span> <span class="s1">&#39;! ##&#39;</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="k">with</span> <span class="n">create_new_socket</span><span class="p">()</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
<span class="linenos">20</span>        <span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">HOST</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
<span class="linenos">21</span>
<span class="linenos">22</span>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">23</span>            <span class="c1"># Grab a guess from the player</span>
<span class="linenos">24</span>            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">25</span>                <span class="k">try</span><span class="p">:</span>
<span class="linenos">26</span>                    <span class="n">guess</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please input your guess: &#39;</span><span class="p">))</span>
<span class="linenos">27</span>                    <span class="k">break</span>
<span class="linenos">28</span>                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<span class="linenos">29</span>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Guesses must be an integer. Try again...&#39;</span><span class="p">)</span>
<span class="linenos">30</span>
<span class="linenos">31</span>            <span class="n">s</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">guess</span><span class="p">))</span>
<span class="linenos">32</span>            <span class="n">response</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">33</span>            <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span>            <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;Exactly! You win!&#39;</span><span class="p">:</span>
<span class="linenos">36</span>                <span class="k">break</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">39</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Notice that I’ve named the different escape sequences with a descriptive name. To turn on the printing of text in red, you simply print the <code class="docutils literal notranslate"><span class="pre">red</span></code> escape sequence. To turn off printing text in red, you need to insert the escape sequence of a different color or use the return-to-default-color escape sequence, which I’ve named <code class="docutils literal notranslate"><span class="pre">default</span></code>. I’ve printed the capitalized name of the game in our three different colors as an example.</p>
<p><strong>Step 3.</strong> Start <code class="docutils literal notranslate"><span class="pre">ale04-server.py</span></code> by making a copy of the <code class="docutils literal notranslate"><span class="pre">guess-server.py</span></code> script developed in the chapter. Adapt <code class="docutils literal notranslate"><span class="pre">ale04-client.py</span></code> (above) and <code class="docutils literal notranslate"><span class="pre">ale04-server.py</span></code> so that they play this enhanced guess-the-number game.</p>
<p>[Version 20230709]</p>
</section>
<section id="ale-6-1-capturing-color">
<h2>ALE 6.1: Capturing color<a class="headerlink" href="#ale-6-1-capturing-color" title="Permalink to this heading">#</a></h2>
<p>We’ve learned that digital images are nothing more than large two-dimensional arrays of pixels, which we can load into a pixel array and manipulate. Except for the <code class="docutils literal notranslate"><span class="pre">edges.py</span></code> script in which we ran a prepackaged convolution filter on a color image of my dog, we limited ourselves to grayscale images containing 8-bit pixels. With 8 bits, we could represent 256 different shades of gray from black (<code class="docutils literal notranslate"><span class="pre">0x00</span></code>) to white (<code class="docutils literal notranslate"><span class="pre">0xff</span></code>).</p>
<p>While black-and-white photos can be quite artistic, more often most of us capture color images. I used to take color pictures with a digital single lens reflex (DSLR) camera, but now I take all my photos (and videos) with my cellphone. The manufacturer describes the camera on the back of my cellphone as containing a 12-megapixel sensor, where mega- means <span class="math notranslate nohighlight">\(10^6\)</span> or 1 million.</p>
<p>The manufacturer-quoted number isn’t an exact measure. The sensor in my cellphone is actually a 2D array of size 4290 by 2800, and the color pictures taken with this camera produce just over 36 megabytes (MB) of image data (by “just over” I’m telling you that the 36MB measure also isn’t exact). Despite the inexactness of both numbers, you can use them to determine <strong>the size of each color pixel in bytes</strong>.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Write out an equation that divides the size of the color images taken by my cellphone by the total number of pixels in my cellphone’s sensor. That equation will tell you the number of bytes per pixel. In other words, you’ll know how many bytes there are per pixel in a color (i.e., RGB-encoded) image. Do the math to figure out the answer.</p>
</div>
<p>You should have found that the simplest color images (i.e., those that use <code class="docutils literal notranslate"><span class="pre">RGB</span></code> mode) use three 8-bit numbers to represent the color of a pixel. In Python, each RGB pixel is a tuple of three 8-bit numbers, where the first byte (i.e., 8-bit value) represents how much red is in the pixel. The next indicates how much green the pixel contains, and the last value is the amount of blue. Three zeros would indicate the absence of any of the three colors and would display as black; recall that 0 represents black in every mode. Three values of 255 would appear as a white pixel.</p>
</section>
<section id="ale-6-2-diagonal-fade-to-a-color">
<h2>ALE 6.2: Diagonal fade to a color<a class="headerlink" href="#ale-6-2-diagonal-fade-to-a-color" title="Permalink to this heading">#</a></h2>
<p>In this chapter, the script <code class="docutils literal notranslate"><span class="pre">edge1.py</span></code> created a grayscale image containing a diagonal fade. For this exercise, you’ll change this script so that it fades not from black to white, but from black to one of red, green, or blue. To do this, we’ll need to change the mode of the image we create from <code class="docutils literal notranslate"><span class="pre">'L'</span></code> to <code class="docutils literal notranslate"><span class="pre">'RGB'</span></code>.</p>
<aside class="margin sidebar">
<p class="sidebar-title">HINT</p>
<p><code class="docutils literal notranslate"><span class="pre">pixels[i,j]</span></code> no longer holds just a single integer. Focus on the color component you want and leave the other black (i.e., <code class="docutils literal notranslate"><span class="pre">0</span></code>).</p>
</aside>
<p><strong>Step 1.</strong> Given what you learned in ALE 6.1, complete line 16 in the script (<code class="docutils literal notranslate"><span class="pre">ale02.py</span></code>) to create a diagonal fade from black to red.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># chap06/ale02.py</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Width and height of our image</span>
<span class="linenos"> 5</span><span class="n">sz</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Create a single plane of black and white pixels, initialized to black</span>
<span class="linenos"> 8</span><span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="n">sz</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1"># Create direct access to the pixels in the image</span>
<span class="linenos">11</span><span class="n">pixels</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="c1"># Set the color of each pixel</span>
<span class="linenos">14</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sz</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="linenos">15</span>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sz</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="linenos">16</span>        <span class="c1"># pixels[i,j] = ???</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;ale02.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> Try not just a diagonal fade from black-to-red, but also create ones from black-to-green and black-to-blue.</p>
</section>
<section id="ale-6-3-creating-a-checkerboard">
<h2>ALE 6.3: Creating a checkerboard<a class="headerlink" href="#ale-6-3-creating-a-checkerboard" title="Permalink to this heading">#</a></h2>
<p>Starting again with <code class="docutils literal notranslate"><span class="pre">edge1.py</span></code>, which creates an image containing a diagonal fade, change the body of the innermost for-loop in <code class="docutils literal notranslate"><span class="pre">edge1.py</span></code> so that it creates a checkerboard pattern. The checkerboard pattern should adhere to these rules:</p>
<ul class="simple">
<li><p>Each pixel contains either the color black or white; and</p></li>
<li><p>The color of any pixel is not the same as its neighbors to the north, south, east, and west, i.e., if the current pixel is at <code class="docutils literal notranslate"><span class="pre">(i,j)</span></code>, the pixel to the north is at <code class="docutils literal notranslate"><span class="pre">(i,j-1)</span></code>, to the south <code class="docutils literal notranslate"><span class="pre">(i,j+1)</span></code>, to the east is <code class="docutils literal notranslate"><span class="pre">(i+1,j)</span></code>, and to the west is <code class="docutils literal notranslate"><span class="pre">(i-1,j)</span></code>. Don’t worry about neighbors that are not within the pixel array.</p></li>
</ul>
<p>You’ll  only need to change line 17 in <code class="docutils literal notranslate"><span class="pre">ale03.py</span></code>. It currently sets every pixel in the <code class="docutils literal notranslate"><span class="pre">pixels</span></code> array to the color white.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># chap06/ale03.py</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Width and height of our image</span>
<span class="linenos"> 5</span><span class="n">sz</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Create a single plane of black and white pixels, initialized to black</span>
<span class="linenos"> 8</span><span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="n">sz</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1"># Create direct access to the pixels in the image</span>
<span class="linenos">11</span><span class="n">pixels</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="c1"># Set the color of each pixel</span>
<span class="linenos">14</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sz</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="linenos">15</span>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sz</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="linenos">16</span>        <span class="c1"># Create a checkerboard</span>
<span class="linenos">17</span>        <span class="n">pixels</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;ale03.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ale-6-4-counting-with-python-integers">
<h2>ALE 6.4: Counting with Python integers<a class="headerlink" href="#ale-6-4-counting-with-python-integers" title="Permalink to this heading">#</a></h2>
<p>If you look carefully at the script named <code class="docutils literal notranslate"><span class="pre">edge1.py</span></code>, you’ll see that it doesn’t do arithmetic on pixels, but on the loop indices <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">j</span></code>, which are values produced by the <code class="docutils literal notranslate"><span class="pre">range</span></code> function. If you pass these names to the built-in function <code class="docutils literal notranslate"><span class="pre">type</span></code>, it will tell you that these names refer to Python integers.</p>
<p>From experience, we know that Python integers can hold values greater than 255 and less than 0, and so it is not the addition in our script that overflows and forces the saturation, but the act of trying to store the result of this addition into a location in the array <code class="docutils literal notranslate"><span class="pre">pixels</span></code> that causes an issue. In particular, the PIL library checks to see if the value we’re trying to store overflows (or underflows) the 8-bit, unsigned representation used for each pixel in the <code class="docutils literal notranslate"><span class="pre">pixels</span></code> array.</p>
<p>That’s great, but if we need to be careful with the values we put into the pixels of a black-and-white image, <strong>do we need to be careful about the values we put into a Python integer?</strong> In other words, <strong>will addition on Python integers ever overflow?</strong></p>
<p>We could go read some documentation or google an answer to this question, but we can also experiment and see what happens.</p>
<p><strong>Step 1.</strong> We have been using integers to enumerate the things in a set (e.g., shades of gray between black and white). Integers are also great when we simply want to count, and so, let’s see how far we can count with Python integers before we hit an overflow condition.</p>
<p>The script <code class="docutils literal notranslate"><span class="pre">ale04_count.py</span></code> contains an infinite loop with no exit condition. Inside this loop, we add one to the variable <code class="docutils literal notranslate"><span class="pre">i</span></code>, which we initialized to <code class="docutils literal notranslate"><span class="pre">0</span></code>, which made it a Python <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">### chap06/ale04_count.py</span>
<span class="linenos">2</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">3</span><span class="n">next_bound</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">6</span>    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">7</span>    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">next_bound</span><span class="p">:</span>
<span class="linenos">8</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Reached </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">9</span>        <span class="n">next_bound</span> <span class="o">*=</span> <span class="mi">10</span>
</pre></div>
</div>
<p>Because we’re not interested in seeing every value that <code class="docutils literal notranslate"><span class="pre">i</span></code> takes on, there’s a bit of extra code in this script to print only when <code class="docutils literal notranslate"><span class="pre">i</span></code> reaches a number that’s a power of 10. Printing takes time, and we don’t want to unnecessarily slow down our script. With a friend, walk through the statements in <code class="docutils literal notranslate"><span class="pre">ale04_count.py</span></code> and make sure you understand the entire script.</p>
<p><strong>Step 2.</strong> If you were to run this script, when will it stop running? Think about this question for a bit, jot down the reason for your answer, and then read on.</p>
<p><strong>Step 3.</strong> When we run <code class="docutils literal notranslate"><span class="pre">ale04_count.py</span></code>, we fly through the first bunch of powers of 10, showing that our computers can count much faster than we can. My computer gets to 100 million in about 10 seconds, and then it starts to take a noticeably long time between prints. If I listen carefully, I can hear its fan spin up as the processor starts working really hard.</p>
<p>Notice that there’s no break statement anywhere in the infinite loop, and so the only way that this loop will end is if a runtime exception occurs. Given the statements in the loop’s body, we’re waiting for either the addition or the multiplication to overflow.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Help! I Want It To Stop!</p>
<p>I hope you tried running <code class="docutils literal notranslate"><span class="pre">ale04_count.py</span></code>, and at some point, you’ll want it to stop. Here’s how:</p>
<ul class="simple">
<li><p>If you started the script in a Shell, push the control-key and the letter-c-key at the same time, which we’ll abbreviate as ctl+c. This key sequence tells the Shell to kill the execution of the currently running script.</p></li>
<li><p>If you clicked a play button in your IDE, the play button probably turned into a stop button, and if you click this stop button, the IDE will kill the execution of your running script.</p></li>
</ul>
</div>
<p>If you haven’t tried running <code class="docutils literal notranslate"><span class="pre">ale04_count.py</span></code>, now that you know how to stop it, run it now. Watch its output for a bit and then force it to stop using one of the two methods above.</p>
<p><strong>Step 4.</strong> Let’s think about the work your processor is doing while running <code class="docutils literal notranslate"><span class="pre">ale04_count.py</span></code>. It’s not hard work; it’s just adding 1 over and over again. But to get to a big number, it will take a lot of additions. Let’s make this concrete by doing a quick calculation:</p>
<p>If it took 10 seconds to get to 100 million, estimate how long will it take to get to a trillion, which is 1/30th of the <a class="reference external" href="https://www.usdebtclock.org/">US debt</a> (as of 2022) and therefore a number we may want to represent in a script?</p>
<p><strong>Step 5.</strong> You should have found that the answer is a lot longer than you’d like to wait. Maybe <code class="docutils literal notranslate"><span class="pre">ale04_count.py</span></code> isn’t the best way to find if addition overflows.</p>
<p>Edit the script in the code block below (<code class="docutils literal notranslate"><span class="pre">ale04_double.py</span></code>), so that it doubles <code class="docutils literal notranslate"><span class="pre">i</span></code> on each loop iteration rather than adding 1 to <code class="docutils literal notranslate"><span class="pre">i</span></code> (i.e., write Python code for the comments on lines 4 and 8).</p>
<p>Because this script will increase <code class="docutils literal notranslate"><span class="pre">i</span></code> so much faster than our last script, I’ve inserted a call to <code class="docutils literal notranslate"><span class="pre">time.sleep</span></code> and specified that the script should pause for one-half a second each time it passes the <code class="docutils literal notranslate"><span class="pre">next_bound</span></code>. If you comment out this call, you’ll see why this is necessary.</p>
<aside class="margin sidebar">
<p class="sidebar-title">Tie Back To Bits</p>
<p>When you complete it, <code class="docutils literal notranslate"><span class="pre">ale04_double.py</span></code> adds another bit (i.e., another binary digit) to the length of <code class="docutils literal notranslate"><span class="pre">i</span></code> for each execution of its loop body. Make sure you fully understand why this is true.</p>
</aside>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap06/ale04_double.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">time</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># FIXME: initialize i appropriately</span>
<span class="linenos"> 5</span><span class="n">next_bound</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="c1"># FIXME: update i so it doubles each time</span>
<span class="linenos"> 9</span>    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">next_bound</span><span class="p">:</span>
<span class="linenos">10</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Passed </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">11</span>        <span class="n">next_bound</span> <span class="o">*=</span> <span class="mi">10</span>
<span class="linenos">12</span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 6.</strong> The two scripts in this exercise demonstrate two different <em>growth rates</em>: the first exhibits <em>linear growth</em> (i.e., two successive values differ by a constant amount); and the second <em>geometric growth</em> (i.e., two successive values differ by a constant ratio). We’ll encounter growth rates again in Act II.</p>
<p><strong>Step 7.</strong> Will addition on Python integers ever overflow? Let’s finally answer this question, which was our goal in this exercise. When you run <code class="docutils literal notranslate"><span class="pre">ale04_double.py</span></code> and see <code class="docutils literal notranslate"><span class="pre">1099511627776</span></code>, the script has passed a trillion. It probably took less than 10 seconds to pass that value on your computer.</p>
<p>You can let <code class="docutils literal notranslate"><span class="pre">ale04_double.py</span></code> continue to run for a while, but at some point, kill its execution. This script clearly demonstrates that we can count pretty high in Python. In fact, Python does not restrict the size of an integer. As long as your computer has the storage necessary to hold whatever big number you can dream up, Python can handle it. This is a very nice feature of this language, and one that is not true in every other programming language.</p>
</section>
<section id="ale-6-5-color-the-duck-s-world">
<h2>ALE 6.5: Color the duck’s world<a class="headerlink" href="#ale-6-5-color-the-duck-s-world" title="Permalink to this heading">#</a></h2>
<p>Our earlier exercises created their own images. In this exercise, you will start learning how to modify an existing digital image. You’ll also learn a new set of methods for accessing and changing the value of a particular pixel in your open image.</p>
<p><strong>Step 1.</strong> In your favorite JPEG viewer, open the color image named <code class="docutils literal notranslate"><span class="pre">duck.jpg</span></code>, which you can find in <code class="docutils literal notranslate"><span class="pre">chap06/images</span></code> of the book’s GitHub repo. It should look like a perfectly normal picture that you might have taken with your own cellphone camera.</p>
<p><strong>Step 2.</strong> The script <code class="docutils literal notranslate"><span class="pre">ale05.py</span></code> uses the Python PIL library to open, read, and recolor a single input image. Read through the script and then we’ll briefly discuss what’s new in it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap06/ale05.py</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Grab the image filename</span>
<span class="linenos"> 5</span><span class="n">imfile</span> <span class="o">=</span> <span class="s1">&#39;images/&#39;</span> <span class="o">+</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Filename of image: &#39;</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">with</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">imfile</span><span class="p">)</span> <span class="k">as</span> <span class="n">im</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="c1"># Apply a filter that enhances the red and desaturates blue/green</span>
<span class="linenos"> 9</span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="linenos">10</span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="linenos">11</span>            <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">12</span>            <span class="n">im</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="o">//</span><span class="mi">50</span><span class="p">,</span> <span class="n">b</span><span class="o">//</span><span class="mi">50</span><span class="p">))</span>
<span class="linenos">13</span>
<span class="linenos">14</span>    <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;ale05.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Because we’re working with an existing image, the first thing we have to do is open the image file as we did in <code class="docutils literal notranslate"><span class="pre">edges.py</span></code>.</p>
<p>An existing image contains a 2D image array just like we encountered when we built a new image, and this means that we’ll still need our familiar nested for-loops if we are going to apply a filter to each pixel in the image.</p>
<p>How big is the image we opened? Well, we knew the size of the images we created because we specified them. Luckily, we can also ask an existing image for its width and height in pixels through the attribute called <code class="docutils literal notranslate"><span class="pre">size</span></code> because <code class="docutils literal notranslate"><span class="pre">Image.open</span></code> fills in this attribute. This attribute returns a 2-tuple of <code class="docutils literal notranslate"><span class="pre">(width,height)</span></code> over which we can iterate.</p>
<p>The body of our innermost for-loop looks a bit different than what we’ve previously seen. It uses two new methods on the image object: <code class="docutils literal notranslate"><span class="pre">getpixel</span></code> and <code class="docutils literal notranslate"><span class="pre">putpixel</span></code>. These two methods each take a parameter, which is a 2-tuple representing the <code class="docutils literal notranslate"><span class="pre">(x,y)</span></code> coordinate of the pixel we wish to get or put. In the coordinate system of the images we manipulate, <code class="docutils literal notranslate"><span class="pre">x</span></code> indexes the columns (of which there are <code class="docutils literal notranslate"><span class="pre">width</span></code> columns) and <code class="docutils literal notranslate"><span class="pre">y</span></code> indexes the rows (of which there are <code class="docutils literal notranslate"><span class="pre">height</span></code> of them).</p>
<p>So far, this should remind you of the x-y Cartesian plane you probably encountered at some point in your prior schooling. The only twist in the image world is that index <code class="docutils literal notranslate"><span class="pre">(0,0)</span></code> is the upper left corner of the image.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">getpixel</span></code>, the pixel comes back as a tuple, which we can pull apart with our assignment statement. To write a pixel using <code class="docutils literal notranslate"><span class="pre">putpixel</span></code>, we not only want to specify the <code class="docutils literal notranslate"><span class="pre">(x,y)</span></code> coordinate of the pixel in the image, but also the RGB tuple <code class="docutils literal notranslate"><span class="pre">(r,g,b)</span></code> we want to write.</p>
<p>I’ll discuss the <code class="docutils literal notranslate"><span class="pre">//</span></code> operator in a moment.</p>
<p><strong>Step 3.</strong> Run <code class="docutils literal notranslate"><span class="pre">ale05.py</span></code> and feed it the image file <code class="docutils literal notranslate"><span class="pre">duck.jpg</span></code>. Can you an understand why it displays a reddish version of our input picture?</p>
<p>We enhanced the red in our image by desaturating the blue and green values of each pixel. In particular, we scaled down the green and blue values by some fixed factor, which we did through division.</p>
<p>If you look up the division operator in Python, you’ll see that there are two: <code class="docutils literal notranslate"><span class="pre">/</span></code> and <code class="docutils literal notranslate"><span class="pre">//</span></code>. The single forward-slash operator (<code class="docutils literal notranslate"><span class="pre">/</span></code>) is called <em>division</em>, and if you feed it two integer operands, it will produce a <em>floating-point value</em>. A floating-point number is number with a decimal point, which in Python are given the type <code class="docutils literal notranslate"><span class="pre">float</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">42</span></code> is an <code class="docutils literal notranslate"><span class="pre">int</span></code> in Python, but <code class="docutils literal notranslate"><span class="pre">42.0</span></code> is a <code class="docutils literal notranslate"><span class="pre">float</span></code>. We need float-point values because we can’t represent a number like one-half (i.e., one divided by two) as an integer. We need both a whole and a fractional part. We’ll talk more about floating-point numbers in Chapter 7, but right now we need to scale our green and blue values so that they continue to be integers, since that’s what we’re storing in our image files.</p>
<p>The double forward-slash operator (<code class="docutils literal notranslate"><span class="pre">//</span></code>) is called <em>floor division</em> in Python, and if you feed it two integer operands, it will produce an integer result. This integer result is equivalent to what you’d get if you applied the floor function to the floating-point result from the <code class="docutils literal notranslate"><span class="pre">/</span></code> operator. With positive results, you can think of <code class="docutils literal notranslate"><span class="pre">//</span></code> returning just the whole number part of the result.</p>
<p><strong>Step 4.</strong> Can you edit <code class="docutils literal notranslate"><span class="pre">ale05.py</span></code> so that it highlights the blue aspects of the input image? How about the green aspects?</p>
<p><strong>Step 5.</strong> Notice that the PIL library functions are smart enough not to care if we feed a JPEG or PNG file to our script. You can test this by running <code class="docutils literal notranslate"><span class="pre">ale05.py</span></code> with other input files. Try some of your own digital photos. Remember to put your digital photos in the images directory!</p>
<div class="admonition-not-too-big admonition">
<p class="admonition-title">Not Too Big!</p>
<p>The amount of time it takes to process an image is proportion to the size of the image in bytes. Why? Because the bigger your image is the more pixels it has, and the script has to read and write each one. I’ve been using images of 100-200 kilobytes. Don’t use ones with many megabytes.</p>
</div>
<p>[Version 20230710]</p>
</section>
<section id="ale-8-1-parameters-and-parentheses">
<h2>ALE 8.1: Parameters and Parentheses<a class="headerlink" href="#ale-8-1-parameters-and-parentheses" title="Permalink to this heading">#</a></h2>
<p>We used the <code class="docutils literal notranslate"><span class="pre">Image.putpixel</span></code> method many times in this chapter. <a class="reference external" href="https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.Image.putpixel">Its documentation</a> says that it takes two input parameters: an <code class="docutils literal notranslate"><span class="pre">xy</span></code> coordinate of the pixel in the Image object, and the <code class="docutils literal notranslate"><span class="pre">value</span></code> we want there. The script <code class="docutils literal notranslate"><span class="pre">zero.py</span></code> used this method in the function <code class="docutils literal notranslate"><span class="pre">zero_image_lowest_bits</span></code> as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">14</span><span class="c1">### chap08/zero.py</span>
<span class="linenos">15</span><span class="k">def</span> <span class="nf">zero_image_lowest_bits</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
<span class="linenos">16</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Zeroing lowest 4 bits in all channels of input image&#39;&#39;&#39;</span>
<span class="linenos">17</span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="linenos">18</span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="linenos">19</span>            <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">20</span>            <span class="n">new_r</span> <span class="o">=</span> <span class="n">zero_lowest_bits</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="linenos">21</span>            <span class="n">new_g</span> <span class="o">=</span> <span class="n">zero_lowest_bits</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="linenos">22</span>            <span class="n">new_b</span> <span class="o">=</span> <span class="n">zero_lowest_bits</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="linenos">23</span>            <span class="n">dest</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">new_r</span><span class="p">,</span> <span class="n">new_g</span><span class="p">,</span> <span class="n">new_b</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> What’s wrong with this version of the statement on line 23?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">23</span>            <span class="n">dest</span><span class="o">.</span><span class="n">putpixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">new_r</span><span class="p">,</span> <span class="n">new_g</span><span class="p">,</span> <span class="n">new_b</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> Would this version of <code class="docutils literal notranslate"><span class="pre">zero_image_lowest_bits</span></code> work? It clearly passes two actual parameters that match the two formal parameters in the <code class="docutils literal notranslate"><span class="pre">Image.putpixel</span></code> interface.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">15</span><span class="k">def</span> <span class="nf">zero_image_lowest_bits</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
<span class="linenos">16</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Zeroing lowest 4 bits in all channels of input image&#39;&#39;&#39;</span>
<span class="linenos">17</span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="linenos">18</span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="linenos">19</span>            <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">20</span>            <span class="n">new_r</span> <span class="o">=</span> <span class="n">zero_lowest_bits</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="linenos">21</span>            <span class="n">new_g</span> <span class="o">=</span> <span class="n">zero_lowest_bits</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="linenos">22</span>            <span class="n">new_b</span> <span class="o">=</span> <span class="n">zero_lowest_bits</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="linenos">23</span>            
<span class="linenos">24</span>            <span class="n">coordinate</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="linenos">25</span>            <span class="n">new_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_r</span><span class="p">,</span> <span class="n">new_g</span><span class="p">,</span> <span class="n">new_b</span><span class="p">)</span>
<span class="linenos">26</span>            <span class="n">dest</span><span class="o">.</span><span class="n">putpixel</span><span class="p">(</span><span class="n">coordinate</span><span class="p">,</span> <span class="n">new_pixel</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="ale-8-2-erase-the-duck">
<h2>ALE 8.2: Erase the Duck<a class="headerlink" href="#ale-8-2-erase-the-duck" title="Permalink to this heading">#</a></h2>
<p>Now that we know how to read and write the pixels in a digital images, we’re going to use that knowledge to solve a common problem: removing an unintended subject in a sequence of pictures containing no moving objects except for our unintended subject. This exercise was inspired by <a class="reference external" href="http://nifty.stanford.edu/2014/nicholson-the-pesky-tourist/">John Nicholson’s 2014 Nifty Assignment titled The Pesky Tourist</a>, and we thank him for sharing it with the world.</p>
<p>How will our script remove the unintended subject (i.e., the noise in our digital image)? Our script will:</p>
<ol class="arabic simple">
<li><p>Expect you to give it <em>N</em> pictures, for <em>N</em> greater than 2, that are all of the same size and orientation;</p></li>
<li><p>Visit each pixel location in this common image frame, reading the pixel values there for each of the input pictures; and</p></li>
<li><p>Compute the median of these values as the value of each pixel in the final filtered image.</p></li>
</ol>
<p>Ready to get started?</p>
<p><strong>Step 1. Reading multiple input files.</strong> The fifth step of our problem-solving process says that we should begin a new problem by considering what previously written scripts can help us with our current problem. In this case, the script from ALE 6.5 would be a great start as both that script and the one we’re writing visit each pixel in an input image.</p>
<p>That script is repeated and renamed below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap08/ale02.py</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Grab the image filename</span>
<span class="linenos"> 5</span><span class="n">imfile</span> <span class="o">=</span> <span class="s1">&#39;images/&#39;</span> <span class="o">+</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Filename of image: &#39;</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">with</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">imfile</span><span class="p">)</span> <span class="k">as</span> <span class="n">im</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="c1"># Apply a filter that enhances the red and desaturates blue/green</span>
<span class="linenos"> 9</span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="linenos">10</span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
<span class="linenos">11</span>            <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
<span class="linenos">12</span>            <span class="n">im</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="o">//</span><span class="mi">50</span><span class="p">,</span> <span class="n">b</span><span class="o">//</span><span class="mi">50</span><span class="p">))</span>
<span class="linenos">13</span>
<span class="linenos">14</span>    <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;images/out.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Change this script so that it reads <em>exactly three</em> input files from <em>the command line or from user input</em>.</p>
<p><strong>Step 2. Opening multiple input files.</strong> Now that our script knows the names of three input files, we need it to open the three files.</p>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">with</span></code> <code class="docutils literal notranslate"><span class="pre">Image.open</span></code> line so that it repeats the open-as phrase in the with-statement three times. Each open-as phrase should be separated by commas. This will cause the script to open (and later close) multiple image objects. It should look something like the following, with each <code class="docutils literal notranslate"><span class="pre">open_as_phrase</span></code> replaced with <code class="docutils literal notranslate"><span class="pre">Image.open(filename_var)</span> <span class="pre">as</span> <span class="pre">image_object_name</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">open_as_phrase1</span><span class="p">,</span> <span class="n">open_as_phrase2</span><span class="p">,</span> <span class="n">open_as_phrase3</span><span class="p">:</span>
</pre></div>
</div>
<p>The resulting with-statement might get quite long, and you can split it across multiple lines at a comma by using the line continuation character in Python, which is the backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>).</p>
<p>Take a look at <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#maximum-line-length">the Style Guide for Python Code (PEP 8) under “Maximum Line Length”</a> to see an example of how this is done. As it says there, we prefer to use Python’s implied line continuation in most long-line situations rather than this explicit line continuation syntax, but this is a common situation where you can’t use anything but the explicit syntax.</p>
<p><strong>Step 3. Testing what we’ve done so far.</strong> Take a moment and add some statements to your script so that it prompts the user to ask which input file the script should modify in the nested for-loops and then save the changed image in <code class="docutils literal notranslate"><span class="pre">out.png</span></code>.</p>
<p>As you do this work, don’t worry about checking for all kinds of bad user input: You’re just testing what you’ve written in steps 1 and 2, and we’ll delete this extra code in a moment. Do, however, make sure that the correct file was displayed!</p>
<p>If you have access to the this book’s Github repo, you can test your script using the image files with the prefix name <code class="docutils literal notranslate"><span class="pre">duck</span></code> or <code class="docutils literal notranslate"><span class="pre">photobomb</span></code> in the <code class="docutils literal notranslate"><span class="pre">images</span></code> directory under <code class="docutils literal notranslate"><span class="pre">chap08</span></code>.</p>
<p>When you’re done testing your script, get rid of the prompt you just added, but make sure you leave the statements you added in Steps 1 and 2!</p>
<p><strong>Step 4. Finding the statistical median.</strong> Alright, you are now ready to erase an unintended subject. The nested for-loops provide the logic we need to visit each pixel in an image, but the statements in the body of these nested for-loops are not the work we need done. The work we need is to grab the pixel values at each location <code class="docutils literal notranslate"><span class="pre">(x,y)</span></code> in the three input images and compute the median of these values.</p>
<aside class="margin sidebar">
<p class="sidebar-title">Read about the Function</p>
<p>You should <a class="reference external" href="https://docs.python.org/3/library/statistics.html#statistics.median">read about <code class="docutils literal notranslate"><span class="pre">statistics.median</span></code></a> before attempting to complete this step.</p>
</aside>
<p>Although we could write a function that computed a median given a list of numbers, let’s take advantage of the <code class="docutils literal notranslate"><span class="pre">statistics</span></code> library in Python, which has conveniently provided us with a <code class="docutils literal notranslate"><span class="pre">statistics.median</span></code> function. You’ll notice that the <code class="docutils literal notranslate"><span class="pre">statistics.median</span></code> function may produce a value that is not one of the input data points. This will be a problem for us because we don’t want our input integer values turned into an output floating-point value. Our color values are integers and need to stay as such. While you might force the value returned from <code class="docutils literal notranslate"><span class="pre">statistics.median</span></code> back into an integer, we can also simply use <code class="docutils literal notranslate"><span class="pre">statistics.median_low</span></code>. Ahh, what a helpful and a well-designed library!</p>
<p>Once you have a median value (and think about what that means for a pixel), you’ll want to store the result in a new output image.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Write pseudocode reflecting what was just discussed. Don’t try to jump right into Python code! Make sure you see the script’s complete flow in pseudocode before you start translating these new pieces of logic into Python. It will save you time in the long run!</p>
</div>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<p>If you are unfamiliar with this children’s game, <a class="reference external" href="https://en.wikipedia.org/wiki/Where%27s_Wally%3F">this Wikipedia article</a> provides some background.</p>
</aside>
<p>To test your code with our images, start with the three <code class="docutils literal notranslate"><span class="pre">photobomb</span></code> images in the <code class="docutils literal notranslate"><span class="pre">images</span></code> directory. If those work, check your code with the three <code class="docutils literal notranslate"><span class="pre">duck</span></code> images. The <code class="docutils literal notranslate"><span class="pre">photobomb</span></code> images were created by copying a single picture of Harvard Yard and then inserting Waldo from <em>Where’s Waldo?</em> fame into this image in three different locations. The three <code class="docutils literal notranslate"><span class="pre">duck</span></code> images are a real sequence of three pictures with a common background and moving character. As such, many pixels—even those not obscured by the duck—are subtly different from picture to picture.</p>
<p><strong>Step 5. The need for more input files.</strong> Congratulations on erasing the CS50 debugging duck and Waldo from our images! As wonderful as our current script is, it isn’t very robust. For example, it expects exactly three input images, and the unintended object can’t overlap with itself in any of the three images.</p>
<p>To see this second point for yourself, run your solution to the previous step with the first three images with the prefix <code class="docutils literal notranslate"><span class="pre">apsu</span></code>, which have a <code class="docutils literal notranslate"><span class="pre">.png</span></code> extension. Look at the resulting image very closely, and you’ll see a shadowy image of the person’s feet where the unintended subject overlapped with his previous self.</p>
<p><strong>Step 6. Accepting and computing with any number of input files.</strong> We will eliminate the problem identified in Step 5 by building a script that accepts more input images. The unintended object or subject could then overlap with itself/himself in some of the input images as long as the majority of the images contained only the desired background.</p>
<p>To begin, make a backup copy of your current script, and then follow the directions below:</p>
<ol class="arabic simple">
<li><p>Eliminate the statements that allowed the user to input the image filenames. Your final script will accept the input image filenames from the command line.</p></li>
<li><p>Fix the “proper usage” check so that it expects <em>at least 3 command line arguments</em>. Remember that the your program’s name (but not the <code class="docutils literal notranslate"><span class="pre">python3</span></code> interpreter) counts as one of the command line arguments.</p></li>
<li><p>Time to write some pseudocode again. Think about a data structure that we can use to collect all the input filenames as well as keep track of our image objects that you’ll open using these filenames. To this point, you were probably using a unique variable for each input filename and the result of each of the three <code class="docutils literal notranslate"><span class="pre">Image.open</span></code> commands. This worked because we knew that there were exactly three of each. We now need a data structure that can expand while the program runs to accommodate all the filenames and open-file objects we’ll need. Can you think of a data structure that will allow us to work with a variable-length list of objects? Yes, we just said it! A Python <code class="docutils literal notranslate"><span class="pre">list</span></code> will do this quite nicely. We’ll talk a lot more about different types of common data structures in the next act. Go through your script and add pseudocode for every piece of work that needs to change because you’re using lists instead of single variables.</p></li>
<li><p>When you think you’ve got all the logic you think you need in pseudocode, start translating this pseudocode into Python. Don’t forget that you can ask for the size of the <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> list and subtract <code class="docutils literal notranslate"><span class="pre">1</span></code> from this value to determine the number of input files. This might be very useful in creating a bound you could use in one or more for-loops that walk over the elements in a list.</p></li>
<li><p>While translating pseudocode into Python code, you’ll undoubtedly realize that the nice with-statement we’ve been using requires us to know the exact number of files we want to open at the time we write the script. Yup, you are going to have to open each input image file and later explicitly close each one (using <code class="docutils literal notranslate"><span class="pre">Image.close</span></code>).</p></li>
</ol>
<p>Once you’ve done all this work, run your script as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python3 ale02.py apsu1.png apsu2.png apsu3.png apsu4.png apsu5.png apsu6.png
</pre></div>
</div>
<p>Did this produce a much cleaner resulting image?  It should! Go show your family and friends your amazing script. (You might rename your final script from <code class="docutils literal notranslate"><span class="pre">ale02.py</span></code> to <code class="docutils literal notranslate"><span class="pre">erase32.py</span></code>.)</p>
<aside class="margin sidebar">
<p class="sidebar-title">Hint</p>
<p>What’s different in how we gathered the original data (i.e., images) in these two cases?</p>
</aside>
<p><strong>Step 7. Why median, but not mode?</strong> Take a look at the files <code class="docutils literal notranslate"><span class="pre">images/photobomb-mode.jpg</span></code> and <code class="docutils literal notranslate"><span class="pre">images/duck-mode.jpg</span></code>. These files were produced by our solution script, except that we used <code class="docutils literal notranslate"><span class="pre">statistics.mode</span></code> instead of <code class="docutils literal notranslate"><span class="pre">statistics.median</span></code> to compute the pixel we placed in the output image. As you’ll see by looking at these two images, we successfully erased Waldo using the <code class="docutils literal notranslate"><span class="pre">mode</span></code> function, but not the duck. Why is this?</p>
<p>And when you figure out why median is more robust an approach than mode, please make sure you can explain why is it the first duck that remains. This doesn’t have anything to do with the statistical properties of the function, but choices that the library designer made. What are you learning about quantitative reasoning with data here?</p>
</section>
<section id="ale-8-3-create-and-fix-your-own-photobomb">
<h2>ALE 8.3: Create and Fix Your Own Photobomb<a class="headerlink" href="#ale-8-3-create-and-fix-your-own-photobomb" title="Permalink to this heading">#</a></h2>
<p>In 8.2, you created a script that fixed photobombs in our pictures. Now it is your turn.</p>
<p><strong>Step 1.</strong> Take a sequence of 3 or more pictures with your smartphone and download them to your computer. Here are some recommendations that will help you make the next step work well:</p>
<ol class="arabic simple">
<li><p>Find a place where you can set your phone and it won’t move for your sequence of pictures. Ideally, use some kind of tripod.</p></li>
<li><p>In the scene you want to capture in a picture, nothing should be moving. If you want to capture a person in front of a beautiful backdrop, make sure that nothing in the whole scene will be moving, including your subject. In other words, the person needs to stand/sit still for a few pictures.</p></li>
<li><p>Now decide on the photobomb(s) that will be in your pictures and that your script will eliminate. If that’s another person, have them move after you take each picture. Make sure that they move enough that they don’t appear stationary. If you want to include two photobombing people, try it!</p></li>
<li><p>Take enough pictures that, for all points in the scene you want, the majority of the pictures show that each point unobscured.</p></li>
<li><p>On your computer, reduce the size of your images — ideally no more than a few hundred kilobytes. The larger the images the longer your script will take to run!</p></li>
<li><p>Make sure you saved the reduced images in RGB, not RGBA, format.</p></li>
</ol>
<p><strong>Step 2.</strong> Run your images through the script you built in 8.2. Show your friends and family!</p>
<p>[Version 20230722]</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="chap15.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 15: Embrace Runtime Debugging</p>
      </div>
    </a>
    <a class="right-next"
       href="glossary.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Glossary</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-1-hello-world">ALE 1.1: Hello World</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-2-too-long">ALE 1.2: Too long?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-3-close-the-screen-door">ALE 1.3: Close the screen door!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-1-4-from-story-to-contract">ALE 1.4: From story to contract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-1-counting-stuff">ALE 2.1: Counting stuff</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-2-counting-lines">ALE 2.2: Counting lines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-3-counting-characters">ALE 2.3: Counting characters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-4-counting-words">ALE 2.4: Counting words</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-5-counting-sentences">ALE 2.5: Counting sentences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-6-abstractions">ALE 2.6: Abstractions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-2-7-problem-not-solved">ALE 2.7: Problem not solved!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-1-two-kinds-of-loops">ALE 3.1: Two kinds of loops</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-2-getting-comfortable-with-range">ALE 3.2: Getting comfortable with `range`</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-3-return-with-something">ALE 3.3: Return with something</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-4-visualize-a-function-call">ALE 3.4: Visualize a function call</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-5-two-different-sequences">ALE 3.5: Two different sequences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-6-what-happens-when">ALE 3.6: What happens when?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-7-imports-and-the-namespace">ALE 3.7: Imports and the namespace?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-8-scope-and-the-danger-of-globals">ALE 3.8: Scope and the Danger of Globals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-1-this-and-that">ALE 4.1: This and that</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-2-tuples-a-box-for-everything">ALE 4.2: Tuples, a box for everything</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-3-but-it-must-be-true">ALE 4.3: But it must be true!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-4-a-mashup">ALE 4.4: A Mashup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-4-5-json-makes-my-eyes-ache">ALE 4.5: JSON makes my eyes ache</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-1-too-many-guesses">ALE 5.1: Too many guesses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-2-so-many-ways-to-pick">ALE 5.2: So many ways to pick</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-3-catching-exceptions">ALE 5.3: Catching exceptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-5-4-adding-metadata-to-your-messages">ALE 5.4: Adding metadata to your messages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-1-capturing-color">ALE 6.1: Capturing color</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-2-diagonal-fade-to-a-color">ALE 6.2: Diagonal fade to a color</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-3-creating-a-checkerboard">ALE 6.3: Creating a checkerboard</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-4-counting-with-python-integers">ALE 6.4: Counting with Python integers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-6-5-color-the-duck-s-world">ALE 6.5: Color the duck’s world</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-8-1-parameters-and-parentheses">ALE 8.1: Parameters and Parentheses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-8-2-erase-the-duck">ALE 8.2: Erase the Duck</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-8-3-create-and-fix-your-own-photobomb">ALE 8.3: Create and Fix Your Own Photobomb</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mike Smith
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023 by Michael D. Smith. All rights reserved.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>