

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Chapter 11: Discover Driving Directions &#8212; Computational Thinking and Problem Solving</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chap11';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Chapter 12: Divide and Conquer" href="chap12.html" />
    <link rel="prev" title="Chapter 10: Build an Index" href="chap10.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="ctps.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/mike_flat.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/mike_flat.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="ctps.html">
                    <no title>
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap01.html">Chapter 1: Read a Children’s Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap02.html">Chapter 2: Grab the Dialogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap03.html">Chapter 3: Replace Text With Emoji</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap04.html">Chapter 4: Query a Web Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap05.html">Chapter 5: Play Guess-a-number</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap06.html">Chapter 6: Do You See My Dog?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap07.html">Chapter 7: Many But Not Any Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap08.html">Chapter 8: What Is My Problem?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap09.html">Chapter 9: Find a Phrase</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap10.html">Chapter 10: Build an Index</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 11: Discover Driving Directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap12.html">Chapter 12: Divide and Conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap13.html">Chapter 13: Rewrite the Error Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap14.html">Chapter 14: The Dream of Bug Fixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap15.html">Chapter 15: Embrace Runtime Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap16.html">Chapter 16: Catch Them Early</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap17.html">Chapter 17: Build Prediction Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap18.html">Chapter 18: Use Generative AI</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="ales.html">Active-Learning Exercises</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ales-c01.html">Chapter 1</a></li>





<li class="toctree-l2"><a class="reference internal" href="ales-c02.html">Chapter 2</a></li>







<li class="toctree-l2"><a class="reference internal" href="ales-c03.html">Chapter 3</a></li>










<li class="toctree-l2"><a class="reference internal" href="ales-c04.html">Chapter 4</a></li>





<li class="toctree-l2"><a class="reference internal" href="ales-c05.html">Chapter 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c06.html">Chapter 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c07.html">Chapter 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c08.html">Chapter 8</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c09.html">Chapter 9</a></li>



<li class="toctree-l2"><a class="reference internal" href="ales-c10.html">Chapter 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c12.html">Chapter 12</a></li>



</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/chap11.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 11: Discover Driving Directions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-approach-to-programming">A new approach to programming</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#driving-directions-a-formal-specification">Driving directions, a formal specification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallels-with-finite-state-machines">Parallels with finite state machines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solutions-with-particular-characteristics">Solutions with particular characteristics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-walk-before-we-drive">Let’s walk before we drive</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-random-walk">A random walk</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#will-it-work">Will it work?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-short-walk-please">A short walk, please</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#no-loops">No loops</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#only-visit-new-spots">Only visit new spots</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-dog-walk">A dog walk</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation">Simulation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#to-maps-through-oo-programming">To maps through OO programming</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#classes">Classes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-an-instance">Building an instance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#self-and-instance-attributes">Self and instance attributes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods">Methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representational-invariant">Representational invariant</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#magic-methods">Magic methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-on-others">Building on others</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-maps">General maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keeping-track">Keeping track</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remembering-how-we-got-there">Remembering how we got there</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-solution">The solution</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#depth-first-search-dfs">Depth-first search (DFS)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breadth-first-search-bfs">Breadth-first search (BFS)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#informed-searches">Informed searches</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chapter-11-discover-driving-directions">
<h1>Chapter 11: Discover Driving Directions<a class="headerlink" href="#chapter-11-discover-driving-directions" title="Permalink to this heading">#</a></h1>
<p>We began this act with a search problem that asked us to create a listing of all web pages that mention a particular keyword or phrase. Search was effectively a question of matching. Are there search problems that are more than just matching against a pattern? Google definitely thinks about search much more broadly. It searches over many different sources of digital information seeking answers to our questions.</p>
<p>In this chapter, we expand our definition of a search problem to include the many processes we use in our daily lives to find solutions to questions for which we have a well-described goal. We will consider several different instances of this, but one of the most recognizable examples of <em>goal-directed search</em> is the finding of a path from one point on a map to another.<a class="footnote-reference brackets" href="#fn1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> You have almost certainly used this type of software in driving across the country or walking in an unfamiliar city, and how such software works is this chapter’s problem-to-be-solved.</p>
<section id="a-new-approach-to-programming">
<p><strong>A new approach to programming.</strong> In addition to introducing a new problem-solving technique (i.e., goal-directed search), this chapter’s problem will require us to move beyond a <em>procedural approach</em> to programming. To this point, we decomposed each problem into functional components and then “wired” these components together in a sequence of steps that when executed produced a solution. This approach is not that much different than the recipes we follow when cooking. And with a recipe (i.e., an algorithm), we took its functional components and separately designed them.</p>
<p>A procedural approach uses the power of abstraction to create a public interface that hides each function’s implementation. This is <em>functional abstraction</em>, and it allows us to think first about a component’s outputs in terms of its inputs, and then later worry about the set of computational steps that would turn specific inputs into the desired outputs. And when the public interface created a useful abstraction, we found that we could reuse this function across our program and hopefully other programs we or others might write.</p>
<p><em>Encapsulation</em> is another benefit of the use of a public interface and hidden implementation. When we hide a function’s implementation, we can test, debug, and even change the function’s body without affecting the sites that call our function. By now, you know that creating a correct program is hard work and that it’s practically impossible to write a correct program in one go. But by using functional abstraction and encapsulation, we can build toward a correct program, one piece at at time. And when we miscode a component, we can fix the bugs in that component without causing a domino of changes in the rest of our program.</p>
<p>In sum, we use decomposition and functional abstraction to break complex problems into simpler pieces, and functional abstraction and encapsulation to code each piece separately.</p>
<p>While a procedural approach to programming works well, it has limits. When the objects that our scripts manipulate are ones built into Python (e.g., strings, ints, and lists) or ones provided in some module built by a Python programmer (e.g., network responses and digital images), focusing on the functions in the recipe works well. However, to solve this chapter’s problem, we are going to need to think about more than its component tasks. We are going to need to build our own objects, i.e., some of the ingredients needed in our recipe. In other words, we are going to need to build our own <em>data abstractions</em>.</p>
<p>But have no fear (said the Cat in the Hat), you already have the tools you need to build data abstractions: decomposition, abstraction, and encapsulation! When applied to data (instead of just procedures), you enter the exciting world of <em>object-oriented programming (OOP).</em> Python is an object-oriented programming language, which means that it contains features designed to make data abstraction easy.</p>
<p>By the end of this chapter, you will have gained the ability to create recipes and ingredients, which will allow you to solve an unbelievably wide range of complex, real-world problems. Computer scientists think of this pairing as <em>algorithms and data structures</em>. There are many elegant ideas in this space, and through the rest of this act, you’ll get a taste of the rich world of classical algorithms and data structures.<a class="footnote-reference brackets" href="#fn2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
<div class="admonition-learning-outcomes admonition">
<p class="admonition-title">Learning Outcomes</p>
<p>Learn to write a script for goal-directed search and to simulate what you cannot analytically solve. You will understand the difference between procedural and object-oriented programming, and you’ll build algorithms and data structures relevant to finding driving directions from a map. In particular, you will be able to:</p>
<ul class="simple">
<li><p>Describe the components of a formal specification for a goal-directed search problem [design and CS concepts];</p></li>
<li><p>Discuss the parallel nature of goal-directed search and finite state machines [design and CS concepts];</p></li>
<li><p>Code a random walk across a graph-like data structure with notes and edges [programming skills];</p></li>
<li><p>Argue that the random walk you coded will terminate [CS concepts];</p></li>
<li><p>Simulate real-world phenomenon and discuss what you can learn from these simulations [design and CS concepts];</p></li>
<li><p>Understand the benefits of object-oriented programming and how it differs from procedural programming [CS concepts];</p></li>
<li><p>State the differences between a class and an instance of that class [CS concepts];</p></li>
<li><p>Use classes to build your own data structures and inheritance to avoid duplicating code found in related classes [design and programming skills];</p></li>
<li><p>Employ Python’s magic methods so that the objects you build look like they were built into Python [programming skills];</p></li>
<li><p>Describe the purpose of Python’s <code class="docutils literal notranslate"><span class="pre">self</span></code> convention [programming skills];</p></li>
<li><p>Discuss the importance of the representational invariant for writing robust object-oriented code [CS concepts];</p></li>
<li><p>Understand how to build a data structure that represents a map and practice building your own classes [programming skills];</p></li>
<li><p>Write a script that finds a solution to the driving directions problem and specialize it to perform searches with different algorithmic characteristics (i.e., breadth-first and depth-first search) [design and CS concepts];</p></li>
<li><p>Describe the difference between uninformed and informed searches, and state the power (and danger) of heuristics [CS concepts].</p></li>
</ul>
</div>
</section>
<section id="driving-directions-a-formal-specification">
<p><strong>Driving directions, a formal specification.</strong> Solving a goal-directed search problem, like the finding of directions from one point on a map to another or cooking a delicious meal, is straightforward once you understand how to model a goal-directed search problem. A good place to start in this modeling is with the problem’s <em>start (or initial) state</em> and its <em>goal (or final) state</em>. These states can be as simple as “I’m here” (start state) and “I want to be there” (goal state), or “I have these ingredients available to me” (start state) and “I want to serve a delicious dinner” (goal state).</p>
<p>Besides these two states, goal-directed search problems have <em>a set of valid actions</em> through which we can manipulate <em>the current state</em>. In the driving context, I have a set of roads (the valid actions) that move me from one location (the current state) to another. In the cooking context, I have a set of kitchen instruments and things I can do with them (the valid actions) that change the state of the ingredients.</p>
<p>The many road locations and partially prepared mixtures of ingredients are states, along with our designated start and goal states, that exist in the problem’s complete search space. We might be able to enumerate all these states for a particular goal-directed search problem, but in real applications, we don’t often try. All that matters is that we can distinguish one unique state from another, which is, once again, an encoding problem that translates a collection of real-world things into a computational form.</p>
<p><em>The solution</em> to a goal-directed search problem is a finite sequence of valid actions that when performed will transform the start state into the goal state. If we cannot find such a sequence, then there is no solution to the problem (e.g., there are no roads that take you from your starting location to your desired goal location).</p>
</section>
<section id="parallels-with-finite-state-machines">
<p><strong>Parallels with finite state machines.</strong> Does this model description remind you of a finite state machine (FSM), which we discussed in Chapter 2? It should! We drew a FSM as a model with nodes, which captured their current state information, and directed edges between these nodes, which were the allowable actions that changed the state represented by the node at the edge’s tail to that represented by the node at the edge’s head. The same is true in a goal-directed search model.</p>
<p>While both models have a single start state, they may differ in their number of goal states. You’ll recall that a FSM may have one or more goal states, which together cover the set of valid input strings. In goal-directed search, we typically have a single goal state.</p>
<p>To understand importance of this difference, you need to remember the purpose of each model. A FSM distinguishes valid strings from invalid ones. These strings are input to the FSM, and they drive the sequence of steps taken by it. At the end of the input string, the FSM reports whether the sequence ended in a goal state.</p>
<p>In goal-directed search, the sequence of steps is not being driven by some external input. Instead, it is the job of our script to search for some sequence of steps that takes us from the start state to the goal state. If in this search, our code ever hits the goal state, it stops and reports the sequence of steps it found that moved it from the start state to this goal state.</p>
<p>This fundamental difference in purpose is one of the reasons why we talk about the set of all states in a FSM and yet say that we’re not often concerned with the full enumeration of states in a goal-directed search problem. In a FSM, when the input veers off a known path toward a goal state, our script can raise an error. In goal-directed search, we don’t know what sequences of steps lead us to the goal state until we find one, and when we find one, we may be uninterested in finding another.</p>
</section>
<section id="solutions-with-particular-characteristics">
<p><strong>Solutions with particular characteristics.</strong> In goal-directed search, there is a lot we don’t know. First, we don’t know, given a particular set of nodes and edges, if it is possible to get from the start state to the goal state. And when there is a solution, we don’t know if there is more than one.</p>
<p>Sometimes, all we care about is finding a solution (or reporting that there isn’t one), and any one will do just fine. For example, any road that gets me home is a good road. Other times, we may decide to put some constraints on the search problem so that it yields solutions with particular characteristics. For instance, we may not feel that all roads are equally desirable: If we can get home without taking a toll road, that’s what we’d like. A solution with the desired characteristics might not exist, but if one does, our script should return it.</p>
</section>
<section id="let-s-walk-before-we-drive">
<p><strong>Let’s walk before we drive.</strong> Let’s stop talking about what a script that implements goal-directed search should do and start building one. The first thing we need for our problem-to-be-solved is a city map. We can build a nice regular one with the abstract data type <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>.<a class="footnote-reference brackets" href="#fn3" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> We simply have to tell it how big we would like our square grid of city blocks to be.<a class="footnote-reference brackets" href="#fn4" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">city</span> <span class="kn">import</span> <span class="n">CitySqGrid</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">not_Boston</span> <span class="o">=</span> <span class="n">CitySqGrid</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">not_Boston</span><span class="p">)</span>
</pre></div>
</div>
<p>You’ll notice that the constructed <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> object places us at the city center, which is the starting point for our journey. As for the goal state, let’s imagine that this city is surrounded by a countryside of open fields, and we’d like to spend our day relaxing in one of these fields and playing with my dog. We don’t care which field, we simply want out of the city for the day.</p>
<p>The abstract data type <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> has an attribute that we can use to grab the coordinates of the starting location (<code class="docutils literal notranslate"><span class="pre">CitySqGrid.start</span></code>), which will be the initial value of this search problem’s current state. Starting there, the loop on lines 13-16 in the code block below allows us to walk Cosmo around the city until we hit our goal state (i.e., until the current state <code class="docutils literal notranslate"><span class="pre">loc</span></code> is outside the city). <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> has a method called <code class="docutils literal notranslate"><span class="pre">move</span></code> that makes it easy to step <code class="docutils literal notranslate"><span class="pre">'north'</span></code>, <code class="docutils literal notranslate"><span class="pre">'south'</span></code>, <code class="docutils literal notranslate"><span class="pre">'east'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'west'</span></code>.<a class="footnote-reference brackets" href="#fn5" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> The method takes our current location (i.e., the current state) and a direction, and it returns a location that becomes our new current state. By the way, in the code block below, we tell <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> that we want our location on the map to look like my dog Cosmo rather than the boring <code class="docutils literal notranslate"><span class="pre">'s'</span></code> character.<a class="footnote-reference brackets" href="#fn6" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap11/walk.py</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">city</span> <span class="kn">import</span> <span class="n">CitySqGrid</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Our faithful dog</span>
<span class="linenos"> 5</span><span class="n">Cosmo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\N{DOG FACE}</span><span class="s1">&#39;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Build the city and put Cosmo at its center</span>
<span class="linenos"> 8</span><span class="n">nyc</span> <span class="o">=</span> <span class="n">CitySqGrid</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">Cosmo</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="nb">print</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c1"># Loop that walks Cosmo</span>
<span class="linenos">12</span><span class="n">loc</span> <span class="o">=</span> <span class="n">nyc</span><span class="o">.</span><span class="n">start</span>
<span class="linenos">13</span><span class="k">while</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">nyc</span><span class="p">:</span>
<span class="linenos">14</span>    <span class="n">direction</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Where to? &#39;</span><span class="p">)</span>
<span class="linenos">15</span>    <span class="n">loc</span> <span class="o">=</span> <span class="n">nyc</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>
<span class="linenos">16</span>    <span class="nb">print</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enjoy your day outside the city!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When we walk Cosmo around this virtual city, <code class="docutils literal notranslate"><span class="pre">move</span></code> won’t let us walk into a building. Since we don’t live in these buildings, we are not allowed in. What this means is that the <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> data type is smart enough to know that we can walk only on the streets and not off them. This is important if we want to successfully build a set of driving directions that won’t have our car driving through buildings and fields.</p>
</section>
<section id="a-random-walk">
<p><strong>A random walk.</strong> Notice that the script <code class="docutils literal notranslate"><span class="pre">walk.py</span></code> handles a piece of this chapter’s problem: it alerts us when we have reached the goal state (i.e., our walk took us out of the city). What it doesn’t do, without our active help, is search the city for a route to this goal state.</p>
<p>How might we think about a procedure that would get us from the city center to the fields on the outskirts of the city? And for this question, let’s assume that we don’t know anything about the layout of the city except what we see immediately around us. If you’ve spent any time solving mazes as a kid, you probably can think up a number of different techniques that might work. I’m going to suggest we have the script do the easiest thing possible: for each step the script takes, it randomly chooses a direction.</p>
<p>This is easy to code, as we’ll do in a moment, but first let’s ask: Will a random walk reliably get us out of a city? The answer to this question should be yes. In fact, for any of the techniques you were just imagining, we want the answer to be yes. If not, then there are some maps on which the technique won’t work, and that’s bad if we assured someone that we had a script that always finds a route when one exists.</p>
<p>What we’re talking about here is the proof of correctness we mentioned as one of the three formal components of an algorithm. Again, this book doesn’t teach you how to create a formal proof of correctness, but we can make a stab at the form of the proof for a random walk.</p>
</section>
<section id="will-it-work">
<p><strong>Will it work?</strong> To argue that a random walk will get from the start state to the goal state if a path exists, we might begin by thinking about every type of city layout imaginable, and then test our approach against that infinite set of layouts. Yes, that sounds hard and is probably impossible to do.</p>
<p>So instead, good theoreticians and problem solvers transform these hard questions into their equivalent inverse. For us, this means we need to answer the question: <em>What would need to be true to not allow a random walk to find the goal?</em> If we can rigorously argue that there is nothing keeping us from finding a solution, then we can confidently state that a random walk will reliably get us out of any city.</p>
<p>The argument is fairly simple. We begin by eliminating the case where there is no path from the start to the goal state. Clearly a random walk would fail in this case; however, no procedure would find a path that doesn’t exist. As such, the real question is: Is it possible for a random walk to never find a solution path when one exists? The answer to this question is no. If a solution path exists and our algorithm is capable of generating that path, there is some probability that it will randomly generate this sequence of steps and achieve our goal.</p>
</section>
<section id="a-short-walk-please">
<p><strong>A short walk, please.</strong> The kicker is, how long might we have to wait for a script that implements a random walk to find a sequence of steps that end in the goal state? Hard to say, right?</p>
<p>Let’s again transform the question. What structure in a map might make it take an unbounded amount of time to find the solution? The answer might have popped into your mind. A loop!</p>
<p>In reality, we don’t even need a loop in the roads to have a situation where our random walk takes forever. The algorithm might repeatedly generate a step west followed by a step east, and then west, then east, west, east, …. Even in a city with a single road that leads from the city center to a field on the outskirts, this possible sequence of steps would cause our algorithm to never return.</p>
</section>
<section id="no-loops">
<p><strong>No loops.</strong> We can eliminate solutions that take a really large amount of time (and space) to generate by eliminating loops from our search space.</p>
<p>For example, a solution that heads straight east in our city with a square grid is a solution to our problem. One that heads straight east, but loops around the first block one time before continuing to proceed east, is another solution. However, the first 8 steps of the sequence <code class="docutils literal notranslate"><span class="pre">'eennwwsseeee'</span></code> put us directly where the sequence <code class="docutils literal notranslate"><span class="pre">'eeee'</span></code> also starts (i.e., the start state). If an algorithm has already explored a path that starts at the current state and returns to that state, repeating this path clearly won’t advance us toward a solution. This means that we can eliminate loops in our maps and not worry that we will miss finding a solution.</p>
</section>
<section id="only-visit-new-spots">
<p><strong>Only visit new spots.</strong> A necessary condition of looping is that we have to visit the same location more than once. If we create a random walk algorithm that is not allowed to visit a location more than once, we can guarantee that the algorithm will either find a (loop-free) solution or get caught in a “dead-end.” A walk ends in a dead-end if the algorithm cannot find a new location to visit from its current location. For example, in our previous example, the first 8 steps of the sequence (i.e., <code class="docutils literal notranslate"><span class="pre">'eennwwss'</span></code>) leaves us without a valid location to visit next that hasn’t already been visited.</p>
<p>If you think about it, no run of this algorithm will take more steps than there are locations in the map. It may still take many random walks to find a solution, but no single random walk will take infinite time.</p>
</section>
<section id="a-dog-walk">
<p><strong>A dog walk.</strong> Let’s implement this random-walk algorithm, and since my dog Cosmo is much better at a random walk than I am, we will simulate him wandering around a city. His nose will tell him if he is about to repeat a location he’s already visited, which will guarantee that our algorithm doesn’t fall into any wasteful loops. The function <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code> in <code class="docutils literal notranslate"><span class="pre">dogwalk.py</span></code> implements this behavior.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">dogwalk.py</span></code>. The first printing of the city displays Cosmo at the start position. The second illustrates the random path he took (i.e., the asterisk characters mark the path). Run it several times until you’ve seen that he can both get outside the city and get caught in a dead end.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap11/dogwalk.py</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">city</span> <span class="kn">import</span> <span class="n">CitySqGrid</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">random</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Our faithful dog and the scent he smells</span>
<span class="linenos"> 6</span><span class="n">Cosmo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\N{DOG FACE}</span><span class="s1">&#39;</span>
<span class="linenos"> 7</span><span class="n">EXPLORED</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[34m*</span><span class="se">\033</span><span class="s1">[0m&#39;</span> <span class="c1"># blue *</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">def</span> <span class="nf">dogwalk</span><span class="p">(</span><span class="n">my_city</span><span class="p">):</span>
<span class="linenos">10</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a city of type CitySqGrid, take a random walk</span>
<span class="linenos">11</span><span class="sd">       and return True if goal successfully met. The</span>
<span class="linenos">12</span><span class="sd">       successful path is marked in the city object.&quot;&quot;&quot;</span>
<span class="linenos">13</span>    <span class="c1"># Set the current state</span>
<span class="linenos">14</span>    <span class="n">cur_loc</span> <span class="o">=</span> <span class="n">my_city</span><span class="o">.</span><span class="n">start</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="k">while</span> <span class="n">cur_loc</span> <span class="ow">in</span> <span class="n">my_city</span><span class="p">:</span>
<span class="linenos">17</span>        <span class="c1"># Where to? Well, what steps are possible?</span>
<span class="linenos">18</span>        <span class="n">moves</span> <span class="o">=</span> <span class="n">my_city</span><span class="o">.</span><span class="n">possible_moves</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">19</span>        <span class="c1"># print(f&#39;DEBUG: loc = {loc}; moves = {moves}&#39;)</span>
<span class="linenos">20</span>
<span class="linenos">21</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">22</span>            <span class="k">return</span> <span class="kc">False</span>   <span class="c1"># dead end!</span>
<span class="linenos">23</span>
<span class="linenos">24</span>        <span class="c1"># Randomly pick a possible move and make it</span>
<span class="linenos">25</span>        <span class="n">a_move</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span>
<span class="linenos">26</span>        <span class="n">next_loc</span> <span class="o">=</span> <span class="n">my_city</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">a_move</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span>        <span class="c1"># Leave a scent at current loc</span>
<span class="linenos">29</span>        <span class="n">my_city</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">30</span>
<span class="linenos">31</span>        <span class="c1"># Update current state</span>
<span class="linenos">32</span>        <span class="n">cur_loc</span> <span class="o">=</span> <span class="n">next_loc</span>
<span class="linenos">33</span>
<span class="linenos">34</span>    <span class="c1"># The random path was successful!</span>
<span class="linenos">35</span>    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="tip admonition">
<p class="admonition-title">Terminology</p>
<p>It is worth reviewing the terminology I mentioned in Chapter 1. In the function <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code>, <code class="docutils literal notranslate"><span class="pre">my_city</span></code> is an object, and this object has a set of attributes associated with it. For example, the attribute <code class="docutils literal notranslate"><span class="pre">start</span></code> is a <em>data attribute</em> (i.e., it names a data object) and the attributes <code class="docutils literal notranslate"><span class="pre">possible_moves</span></code>, <code class="docutils literal notranslate"><span class="pre">move</span></code>, and <code class="docutils literal notranslate"><span class="pre">mark</span></code> are <em>function attributes</em> (also called methods that we call like a function).</p>
</div>
<p>The algorithm in the function <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code> builds upon that in <code class="docutils literal notranslate"><span class="pre">walk.py</span></code>. It sets the current state (i.e., <code class="docutils literal notranslate"><span class="pre">cur_loc</span></code>) to the starting location in the city, and then it falls into a while-loop that iterates until this current state matches our goal. Inside the loop, we call <code class="docutils literal notranslate"><span class="pre">my_city.possible_moves</span></code>, which returns the list of possible moves we can make from our current location. This method’s second argument is the character we use to mark already-visited locations in the city, as you see on line 29; we don’t want those spots as possible locations for our next move. With a valid list of possible moves, the algorithm randomly picks one and moves there (lines 25-26). Of course, it can make a move only if Cosmo isn’t at a dead end, which is the check on lines 21-22. Finally, line 32 prepares the algorithm to repeat these actions with the new location where Cosmo moved.</p>
<p>Here’s the <code class="docutils literal notranslate"><span class="pre">main</span></code> function in <code class="docutils literal notranslate"><span class="pre">dogwalk.py</span></code> that builds a small, regular city and then has Cosmo go for a walk.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">36</span><span class="c1">### chap11/dogwalk.py</span>
<span class="linenos">37</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">38</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Building a city with a 4x4 square grid&#39;</span><span class="p">)</span>
<span class="linenos">39</span>    <span class="n">nyc</span> <span class="o">=</span> <span class="n">CitySqGrid</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">Cosmo</span><span class="p">)</span>
<span class="linenos">40</span>    <span class="nb">print</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span>
<span class="linenos">41</span>
<span class="linenos">42</span>    <span class="c1"># Cosmo walks himself</span>
<span class="linenos">43</span>    <span class="n">success</span> <span class="o">=</span> <span class="n">dogwalk</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span>
<span class="linenos">44</span>    <span class="nb">print</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span>
<span class="linenos">45</span>    <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
<span class="linenos">46</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cosmo is frolicing in the fields!&#39;</span><span class="p">)</span>
<span class="linenos">47</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">48</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cosmo hit a dead-end.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The algorithm in <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code> illustrates the core of goal-directed search. It’s not quite the algorithm we want for our driving directions problem, since it gets caught in dead ends when there exist valid paths from the start location to the goal location. We’ll fix this issue later in this chapter. But first, I want to show you how to use <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code> to reveal interesting facts about our physical world.</p>
</section>
<section id="simulation">
<p><strong>Simulation.</strong> Consider this question: When Cosmo takes himself on a walk, how likely are we to find him wandering around in the fields versus stuck somewhere in the city? Using <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code>, we can learn that the answer to this question depends upon the size of the city. We simply review the outcomes many random walks, and this empirical process gets us an idea of a likelihood.</p>
<p>Let’s implement this. The next code block builds <em>a self-avoiding random walk simulation</em> from <code class="docutils literal notranslate"><span class="pre">dogwalk.py</span></code>’s <code class="docutils literal notranslate"><span class="pre">main</span></code> routine.<a class="footnote-reference brackets" href="#fn7" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a> You tell the <code class="docutils literal notranslate"><span class="pre">sim</span></code> function how big to make the city and how many trials to run. With a <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> object of the specified size, the function repeatedly invokes <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code> and keeps track of how many of times Cosmo hit a dead end. When the number of trials is complete, it computes the percentage of dead-end runs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 2</span><span class="c1">### chap11/sim.py -- Self-avoiding random walk simulation</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">city</span> <span class="kn">import</span> <span class="n">CitySqGrid</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">dogwalk</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">def</span> <span class="nf">sim</span><span class="p">(</span><span class="n">blocks</span><span class="p">,</span> <span class="n">trials</span><span class="p">,</span> <span class="n">verbose</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="c1"># Initialize the metric of interest</span>
<span class="linenos"> 8</span>    <span class="n">dead_ends</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>    <span class="c1"># Build the specified city</span>
<span class="linenos">11</span>    <span class="n">my_city</span> <span class="o">=</span> <span class="n">CitySqGrid</span><span class="p">(</span><span class="n">blocks</span><span class="p">,</span> <span class="n">dogwalk</span><span class="o">.</span><span class="n">Cosmo</span><span class="p">)</span>
<span class="linenos">12</span>    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="linenos">13</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Building a </span><span class="si">{</span><span class="n">blocks</span><span class="si">}</span><span class="s1">x</span><span class="si">{</span><span class="n">blocks</span><span class="si">}</span><span class="s1"> city&#39;</span><span class="p">)</span>
<span class="linenos">14</span>        <span class="nb">print</span><span class="p">(</span><span class="n">my_city</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">trials</span><span class="p">):</span>
<span class="linenos">17</span>        <span class="c1"># Reset the city before each trial</span>
<span class="linenos">18</span>        <span class="n">my_city</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="linenos">19</span>
<span class="linenos">20</span>        <span class="c1"># Run, record, and print the trial</span>
<span class="linenos">21</span>        <span class="n">success</span> <span class="o">=</span> <span class="n">dogwalk</span><span class="o">.</span><span class="n">dogwalk</span><span class="p">(</span><span class="n">my_city</span><span class="p">)</span>
<span class="linenos">22</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
<span class="linenos">23</span>            <span class="n">dead_ends</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">24</span>        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
<span class="linenos">25</span>            <span class="nb">print</span><span class="p">(</span><span class="n">my_city</span><span class="p">)</span>
<span class="linenos">26</span>
<span class="linenos">27</span>    <span class="c1"># Print the percentage of trials ending in dead ends</span>
<span class="linenos">28</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dead_ends</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">trials</span><span class="si">}</span><span class="s1">% dead ends&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<ol class="arabic simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">sim.py</span></code> several times with a block size of 4 and trials equal to 20 (i.e., run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">sim.py</span> <span class="pre">4</span> <span class="pre">20</span></code>. It’ll probably report that approximately 5-15 percent of Cosmo’s walks ended in a dead end.</p></li>
<li><p>Now double the size of the city and run the simulation several times again. This time it’ll probably report that 25-40 percent ended in a dead end.</p></li>
<li><p>Finally, double the city size once more. The likelihood of a walk ending in a dead end has jumped again, to somewhere around 80-90 percent.</p></li>
</ol>
<p>Our conclusion: In a small city, we should look for Cosmo in the fields; in a big city, he’s probably still somewhere inside it. This simulation taught us a fact about our world.</p>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Self-avoiding_walk">A self-avoiding random walk</a> is used to simulate an aspect of the world that no one knows how to model analytically. It is an important simulation technique in numerous areas of math, science, and engineering. It helps, for example, biologists learn about the topological behavior of proteins, which is an important challenge without an analytical solution.</p>
</section>
<section id="to-maps-through-oo-programming">
<p><strong>To maps through OO programming.</strong> Let’s return to our driving directions problem. In addition to the problem that <code class="docutils literal notranslate"><span class="pre">dogwalk.py</span></code> may print a path that’s a dead end, this script works with regular city grids. We want it to produce driving directions for any roadmap. In other words, we need a data type that is more general than what we have with <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>. Where can we find such a data type? Well, where did this <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> data type come from?</p>
<p>The answer is that I built it. You won’t find <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> in the Python language documentation or in a Python module that some generous soul published. Was it obvious to you at any point that it was something I wrote? Hopefully not, and this is the beauty of coding in a well-designed, object-oriented language. We’ve been using <em>instances</em> (e.g., <code class="docutils literal notranslate"><span class="pre">my_city</span></code>) of <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>, and as long as we understood its interface and behavior (i.e., its abstraction), we happily used it to solve our problem as if the data type was a part of Python.</p>
<p>This is power of <em>object-oriented (OO) programming</em>, which uses data abstractions as well as procedural abstractions to simplify problem solving. With a facility to create data abstractions, we are freed from using just the data types that Python or some Python library provides.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>At first, OO programming may feel overwhelming as it comes with a boatload of syntax and jargon. Even I find the OO terminology to be intimidating and confusing. But there’s definitely nothing to fear here as you have been using the OO approach from this book’s start. Everything you manipulate in Python is an object, even what feels primitive and simple, like integers and strings. I’ll introduce you to the basics of OO programming, and if you’d like to learn more, you might next read Chapter 10 in John Guttag’s book titled an <em>Introduction to Computation and Programming Using Python</em>.<a class="footnote-reference brackets" href="#fn8" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p>
</div>
</section>
<section id="classes">
<p><strong>Classes.</strong> If you look at line 4 in the module <code class="docutils literal notranslate"><span class="pre">city.py</span></code>, you’ll see the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">3</span><span class="c1">### chap11/city.py</span>
<span class="linenos">4</span><span class="k">class</span> <span class="nc">CitySqGrid</span><span class="p">(</span><span class="n">maze</span><span class="o">.</span><span class="n">Maze</span><span class="p">):</span>
</pre></div>
</div>
<p>This is the <em>class definition</em> for <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>, and <em>classes</em> are how we implement data abstraction in Python. In other words, through the Python keyword <code class="docutils literal notranslate"><span class="pre">class</span></code>, you define and implement new data types. In a bit, I’ll explain what goes in the parentheses when you define a new data type.</p>
<p>Like a function definition, a class definition defines a data type’s interface and makes explicit its implementation. When we learned about functions and their definitions in Chapter 3, it was easy to identify the public interface from the private implementation. The same separation exists with classes, but it is harder to see, especially in Python.<a class="footnote-reference brackets" href="#fn9" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a> If your new data type is anything but trivial, it becomes very hard to understand how to use it by simply reading the class’s definition. This means that docstrings and comments become extremely important.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>I have described the interface for <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> (i.e., its abstraction as seen through its <em>data attributes</em> and <em>methods</em>) in a docstring at the top of its class definition. I further adopt the convention of following the docstring with a comment that is meant not to help users of the data type but those who want to modify its implementation. Follow this convention or imagine your own—just give those who will use your data type some clear way to understand what’s in its interface and what are implementation details.</p>
</div>
<p>While I’ll continue to make reference to the <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> class, it is too complicated to use as an understandable first example. Instead, I’ll teach you how to build your own class by creating a new data type, called <code class="docutils literal notranslate"><span class="pre">Pin</span></code>, that allows us to add <a class="reference external" href="https://en.wikipedia.org/wiki/Google_Maps_pin">Google-Maps-like pins</a> to the <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> maps we used in <code class="docutils literal notranslate"><span class="pre">walk.py</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 8</span><span class="c1">### chap11/pin.py</span>
<span class="linenos"> 9</span><span class="k">class</span> <span class="nc">Pin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="linenos">10</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstraction: A Pin object is a mark at a map location `loc`</span>
<span class="linenos">11</span><span class="sd">       with a `name`, descriptive `note`, and a ranking of 0-5 `stars`.</span>
<span class="linenos">12</span><span class="sd">       These names are all instance attributes.</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="sd">       instance.icon: The pins displayed icon, which depends upon</span>
<span class="linenos">15</span><span class="sd">       the pin&#39;s number of `stars`.</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="sd">       distance(location): Given a (x,y) location, this method</span>
<span class="linenos">18</span><span class="sd">       computes and returns the as-the-crow-flies distance from it</span>
<span class="linenos">19</span><span class="sd">       this pin&#39;s location, but only if this pin is highly rated.</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="sd">       __str__(): Converts the pin into a string.</span>
<span class="linenos">22</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">23</span>    <span class="c1"># ... implementation of the Pin class goes here ...</span>
</pre></div>
</div>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>In the chapter’s code distribution, you’ll find the script <code class="docutils literal notranslate"><span class="pre">wander.py</span></code>, which adds pins to the functionality of <code class="docutils literal notranslate"><span class="pre">walk.py</span></code>. Run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">wander.py</span></code> and it will print a 6x6 square city with pins and Cosmo ready for his walk. The pins are the green hearts and red x-marks on buildings. Walk Cosmo around the city as you did in <code class="docutils literal notranslate"><span class="pre">walk.py</span></code>, or type a <code class="docutils literal notranslate"><span class="pre">c</span></code> to teleport him to the nearest green heart (i.e., one of his highly-rated places). If you type a <code class="docutils literal notranslate"><span class="pre">q</span></code> or step outside the city, your wanderings come to an end.</p>
</div>
</section>
<section id="building-an-instance">
<p><strong>Building an instance.</strong> The function <code class="docutils literal notranslate"><span class="pre">main</span></code> in <code class="docutils literal notranslate"><span class="pre">wander.py</span></code> builds a list of pins (lines 67-72) and then iterates over this list to mark the pin locations in the city it built (lines 64 and 73-74).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">61</span><span class="c1">### chap11/wander.py</span>
<span class="linenos">62</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">63</span>    <span class="c1"># Build the city and put Cosmo at its center</span>
<span class="linenos">64</span>    <span class="n">nyc</span> <span class="o">=</span> <span class="n">CitySqGrid</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Cosmo</span><span class="p">)</span>
<span class="linenos">65</span>
<span class="linenos">66</span>    <span class="c1"># Add Cosmo&#39;s favorite pins to the city map</span>
<span class="linenos">67</span>    <span class="n">pins</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">68</span>        <span class="n">Pin</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s2">&quot;Park&quot;</span><span class="p">,</span> <span class="s2">&quot;Lots of squirrels&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="linenos">69</span>        <span class="n">Pin</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="s2">&quot;Fire Hydrant&quot;</span><span class="p">,</span> <span class="s2">&quot;Many good smells&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="linenos">70</span>        <span class="n">Pin</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s2">&quot;Cat&quot;</span><span class="p">,</span> <span class="s2">&quot;Not a nice cat!&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="linenos">71</span>        <span class="n">Pin</span><span class="p">((</span><span class="mi">11</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span> <span class="s2">&quot;Bakery&quot;</span><span class="p">,</span> <span class="s2">&quot;Free dog treats!&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">72</span>    <span class="p">]</span>
<span class="linenos">73</span>    <span class="k">for</span> <span class="n">pin</span> <span class="ow">in</span> <span class="n">pins</span><span class="p">:</span>
<span class="linenos">74</span>        <span class="n">nyc</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">pin</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="n">pin</span><span class="o">.</span><span class="n">icon</span><span class="p">)</span>
<span class="linenos">75</span>
<span class="linenos">76</span>    <span class="nb">print</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span>
<span class="linenos">77</span>
<span class="linenos">78</span>    <span class="n">wander</span><span class="p">(</span><span class="n">nyc</span><span class="p">,</span> <span class="n">pins</span><span class="p">)</span>
<span class="linenos">79</span>
<span class="linenos">80</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for the fun walk!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Line 68 creates an object (also called an <em>instance</em>) of type <code class="docutils literal notranslate"><span class="pre">Pin</span></code>. If you think about Python’s built-in data types, like integers, strings, and lists, there is special syntax in the language to handle the creation of objects of these types. For example, when we type a number without a decimal point, the Python interpreter knows we want to create an integer object with that number as its value. For strings, we put the value in a matching pair of quote characters. For lists, we use square brackets.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Examples of creating an instance of a built-in object. We get to use special</span>
<span class="linenos">2</span><span class="c1"># syntax in each of these cases.</span>
<span class="linenos">3</span><span class="n">an_int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">4</span><span class="n">an_empty_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="linenos">5</span><span class="n">an_empty_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">6</span><span class="nb">print</span><span class="p">(</span><span class="n">an_int</span><span class="p">,</span> <span class="n">an_empty_string</span><span class="p">,</span> <span class="n">an_empty_list</span><span class="p">)</span>
</pre></div>
</div>
<p>But we can also build instances of these built-in data types by directly invoking their <em>constructors</em>. The form of a constructor is the class name  (i.e., its type) followed by a pair of parentheses. The result of a call to a constructor is an newly minted object of that type.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># The same examples as the last code block, except now we&#39;re creating</span>
<span class="linenos">2</span><span class="c1"># instance of built-in object using the type&#39;s constructor.</span>
<span class="linenos">3</span><span class="n">an_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">()</span>           <span class="c1"># constructor defaults to an object of value 0</span>
<span class="linenos">4</span><span class="n">an_empty_string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">()</span>  <span class="c1"># constructor default is an empty string</span>
<span class="linenos">5</span><span class="n">an_empty_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>   <span class="c1"># constructor default is an empty list</span>
<span class="linenos">6</span><span class="nb">print</span><span class="p">(</span><span class="n">an_int</span><span class="p">,</span> <span class="n">an_empty_string</span><span class="p">,</span> <span class="n">an_empty_list</span><span class="p">)</span>
</pre></div>
</div>
<p>It is possible to initialize these objects to values other than their defaults by passing in an initialization value in the constructor call.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># With some initialization values</span>
<span class="linenos">2</span><span class="n">an_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">a_string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">an_int</span><span class="p">)</span>
<span class="linenos">4</span><span class="n">a_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">an_string</span><span class="p">)</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">an_int</span><span class="p">,</span> <span class="n">a_string</span><span class="p">,</span> <span class="n">a_list</span><span class="p">)</span>
</pre></div>
</div>
<p>This constructor syntax is how I created, in <code class="docutils literal notranslate"><span class="pre">wander.py</span></code> on line 64, a 6x6 instance of <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> with a <code class="docutils literal notranslate"><span class="pre">dog-face</span></code> character at its center (named <code class="docutils literal notranslate"><span class="pre">nyc</span></code>). It is also how I created a <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object on line 68.</p>
<p>This creation takes two steps. First, the interpreter grabs a raw piece of our computer’s memory that’s large enough to hold all the instance’s attributes (i.e., all the data specific to this object). By raw, I mean that none of this memory is initialized in such a manner that object acts like an instance of <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> or <code class="docutils literal notranslate"><span class="pre">Pin</span></code>. Initialization, the second step, is the job of a class’s <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method.<a class="footnote-reference brackets" href="#fn10" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">22</span><span class="c1">### chap11/pin.py</span>
<span class="linenos">23</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">stars</span><span class="p">):</span>
<span class="linenos">24</span>        <span class="bp">self</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">loc</span>
<span class="linenos">25</span>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
<span class="linenos">26</span>        <span class="bp">self</span><span class="o">.</span><span class="n">note</span> <span class="o">=</span> <span class="n">note</span>
<span class="linenos">27</span>
<span class="linenos">28</span>        <span class="k">assert</span> <span class="n">stars</span> <span class="o">&gt;=</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">stars</span> <span class="o">&lt;=</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;Invalid number of stars&quot;</span>
<span class="linenos">29</span>        <span class="bp">self</span><span class="o">.</span><span class="n">stars</span> <span class="o">=</span> <span class="n">stars</span>
<span class="linenos">30</span>
<span class="linenos">31</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stars</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
<span class="linenos">32</span>            <span class="bp">self</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">green_heart</span>
<span class="linenos">33</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">34</span>            <span class="bp">self</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">red_x</span>
</pre></div>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">__init__</span></code> constructor is just a function defined in a class’s namespace<a class="footnote-reference brackets" href="#fn11" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a> (i.e., you indent it under the class definition). Comparing line 23 with lines 58-60 in <code class="docutils literal notranslate"><span class="pre">pin.py</span></code>, as expected, the <code class="docutils literal notranslate"><span class="pre">Pin</span></code> constructor has four formal parameters matching the four actual parameters provided in the constructor call. Unexpectedly, the interface definition also includes the name <code class="docutils literal notranslate"><span class="pre">self</span></code> as the function’s first formal parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">55</span><span class="c1">### chap11/pin.py</span>
<span class="linenos">56</span><span class="c1"># Create some pins and keep track of them in a list</span>
<span class="linenos">57</span><span class="n">pins</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">58</span>    <span class="n">Pin</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s2">&quot;Park&quot;</span><span class="p">,</span> <span class="s2">&quot;Lots of squirrels&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="linenos">59</span>    <span class="n">Pin</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="s2">&quot;Fire Hydrant&quot;</span><span class="p">,</span> <span class="s2">&quot;Many good smells&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="linenos">60</span>    <span class="n">Pin</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s2">&quot;Cat&quot;</span><span class="p">,</span> <span class="s2">&quot;Not a nice cat!&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="linenos">61</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="self-and-instance-attributes">
<p><strong>Self and instance attributes.</strong> Every method definition must contain this additional formal parameter called <code class="docutils literal notranslate"><span class="pre">self</span></code><a class="footnote-reference brackets" href="#fn12" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></a> (and it must be listed first). The <code class="docutils literal notranslate"><span class="pre">self</span></code> parameter gives you a way to distinguish data attributes belonging to an instance (called <em>instance attributes</em>) from those shared across all instances (called <em>class attributes</em>). When we call the <code class="docutils literal notranslate"><span class="pre">Pin</span></code> constructor on line 58, it returns a <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object with location <code class="docutils literal notranslate"><span class="pre">(1,3)</span></code>, name <code class="docutils literal notranslate"><span class="pre">&quot;Park&quot;</span></code>, and so forth. The constructor stores the first two parameter values in the two instance attributes <code class="docutils literal notranslate"><span class="pre">self.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">self.name</span></code> (on lines 24 and 25 of <code class="docutils literal notranslate"><span class="pre">pin.py</span></code>). These values<a class="footnote-reference brackets" href="#fn13" id="id13" role="doc-noteref"><span class="fn-bracket">[</span>13<span class="fn-bracket">]</span></a> take up memory space in the <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object that is the first element of the <code class="docutils literal notranslate"><span class="pre">pins</span></code> list. The <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object in the list’s second element has different values for its instance attributes, as shown in Figure YY.</p>
<p>[FIXME: Insert figure showing what I describe above]</p>
<p>Although we won’t use them in this book, you can also create class attributes (also called <em>class variables</em>). With a class variable, you don’t have that variable for each instance, but a single variable that is shared by every instance of the class. If, for example, the name <code class="docutils literal notranslate"><span class="pre">note</span></code> was a class variable, you’d write <code class="docutils literal notranslate"><span class="pre">Pin.note</span></code> rather than <code class="docutils literal notranslate"><span class="pre">self.note</span></code> in a class method (i.e., you replace <code class="docutils literal notranslate"><span class="pre">self</span></code> with the class name as the namespace).<a class="footnote-reference brackets" href="#fn14" id="id14" role="doc-noteref"><span class="fn-bracket">[</span>14<span class="fn-bracket">]</span></a></p>
<p>Finally, be careful not to confuse instance variables with local variables. The name <code class="docutils literal notranslate"><span class="pre">loc</span></code> in <code class="docutils literal notranslate"><span class="pre">Pin.__init__</span></code> is a local variable. If you look at the implementation of <code class="docutils literal notranslate"><span class="pre">CitySqGrid.__init__</span></code>, you’ll see that I create the local variable <code class="docutils literal notranslate"><span class="pre">row1</span></code> to name an intermediate computation. These local names exist only while the method is running. Instance variables, on the other hand, are names with values that we want to persist between method executions.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Knowing whether you need to prepend <code class="docutils literal notranslate"><span class="pre">self</span></code> to a name is tricky, and it will take some time for you to naturally know when and when not to use it. Until you do, I suggest you pause as you write a variable name in a class method and ask yourself, “Am I trying to access an attribute of a particular instance of this abstract data type (i.e., class), or is this just a local variable that is helping me to complete the work of this method?” You need <code class="docutils literal notranslate"><span class="pre">self</span></code> in the first case, and not in the second.</p>
</div>
<p>As you can see in the function body of <code class="docutils literal notranslate"><span class="pre">Pin.__init__</span></code> (lines 23-34), instance variables are sprinkled throughout the constructor’s implementation. If you explain your data type’s abstraction in a docstring, a user won’t have to read through your constructor to try to understand what attributes you’ve made available. And as you can see in my docstring for the class <code class="docutils literal notranslate"><span class="pre">Pin</span></code>, I append the word <code class="docutils literal notranslate"><span class="pre">instance</span></code> to the front of the instance attributes when noting them in a class’s docstring.</p>
</section>
<section id="methods">
<p><strong>Methods.</strong> In addition to <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, the class definition in <code class="docutils literal notranslate"><span class="pre">pin.py</span></code> defines two other methods. The <code class="docutils literal notranslate"><span class="pre">distance</span></code> method computes the as-the-crow-flies distance between the instance variable <code class="docutils literal notranslate"><span class="pre">self.loc</span></code> and the method’s formal parameter <code class="docutils literal notranslate"><span class="pre">loc</span></code>. I use this method in <code class="docutils literal notranslate"><span class="pre">wander.py</span></code> (line 40) to have Cosmo jump from his current location in <code class="docutils literal notranslate"><span class="pre">my_city</span></code> to the closest, highly-rated pin.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">38</span><span class="c1">### chap11/pin.py</span>
<span class="linenos">39</span>    <span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
<span class="linenos">40</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stars</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
<span class="linenos">41</span>            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">dist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span><span class="n">loc</span><span class="p">))</span>
<span class="linenos">42</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">43</span>            <span class="k">return</span> <span class="n">MAX_DISTANCE</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">33</span><span class="c1">### chap11/wander.py</span>
<span class="linenos">34</span>        <span class="k">elif</span> <span class="n">cmd</span> <span class="o">==</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span>
<span class="linenos">35</span>            <span class="n">best_loc</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>    <span class="c1"># not a valid location</span>
<span class="linenos">36</span>            <span class="n">best_distance</span> <span class="o">=</span> <span class="mf">100.0</span> <span class="c1"># bigger than any allowable map</span>
<span class="linenos">37</span>
<span class="linenos">38</span>            <span class="c1"># Find the closest highly-rated pin</span>
<span class="linenos">39</span>            <span class="k">for</span> <span class="n">pin</span> <span class="ow">in</span> <span class="n">pins</span><span class="p">:</span>
<span class="linenos">40</span>                <span class="n">dist</span> <span class="o">=</span> <span class="n">pin</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">)</span>
<span class="linenos">41</span>                <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">best_distance</span><span class="p">:</span>
<span class="linenos">42</span>                    <span class="n">best_loc</span> <span class="o">=</span> <span class="n">pin</span><span class="o">.</span><span class="n">loc</span>
<span class="linenos">43</span>                    <span class="n">best_distance</span> <span class="o">=</span> <span class="n">dist</span>
<span class="linenos">44</span>
<span class="linenos">45</span>            <span class="k">assert</span> <span class="n">best_loc</span> <span class="o">!=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;Failed to find a pin&quot;</span>
<span class="linenos">46</span>
<span class="linenos">47</span>            <span class="c1"># Teleport to within one step, which requires me to erase</span>
<span class="linenos">48</span>            <span class="c1"># the character from the current cur_loc.</span>
<span class="linenos">49</span>            <span class="n">character</span> <span class="o">=</span> <span class="n">my_city</span><span class="o">.</span><span class="n">get_mark</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">)</span>
<span class="linenos">50</span>            <span class="n">my_city</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="linenos">51</span>            <span class="n">cur_loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">best_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">best_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">52</span>            <span class="n">my_city</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">character</span><span class="p">)</span>
<span class="linenos">53</span>            <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;s&#39;</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">distance</span></code> could have been a function outside the namespace of the class <code class="docutils literal notranslate"><span class="pre">Pin</span></code>, but in OO programming, your goal is to put functions that operate on a class’s instances in the class definition. In this way, the class definition bundles together the data (as attributes) and functions (as methods) that work together on a particular abstraction (i.e., maps and pins in our running examples). This bundling (called <em>encapsulation</em>) helps you (the class designer) make sure that a class’s data are properly managed, as I explain further in the next section. As the scripts you write grow in size, you’ll also find that this encapsulation helps to organize your code in a manner that makes it easier to understand and maintain.</p>
</section>
<section id="representational-invariant">
<p><strong>Representational invariant.</strong> As we model the world in our scripts, we’re not just manipulating data but trying to build useful abstractions. In a class, the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method is not only responsible for initializing a new instance but also for creating a <em>valid</em> representation of a class’s object. For example, our pins have a star rating, and this rating should be between 0 and 5 inclusive. The <code class="docutils literal notranslate"><span class="pre">Pin.__init__</span></code> method contains code (lines 28-29) that guarantees a new <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object adheres to this <em>representation invariant</em>.</p>
<p>While the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method establishes the representation invariant, the other class methods are expected to maintain it. The <code class="docutils literal notranslate"><span class="pre">Pin.distance</span></code> method does because it doesn’t change any of the instance variables. A more interesting example is <code class="docutils literal notranslate"><span class="pre">CitySqGrid.reset</span></code>, which makes sure when we reset a <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> object back to its initial state that we put the character (e.g., the Cosmo dog emoji) back at the grid’s center (see line 87 in <code class="docutils literal notranslate"><span class="pre">city.py</span></code>).</p>
<p>Ensuring that your class’s methods never break the representational invariant is one goal, but you should also design your class so that its users aren’t able to break it. My <code class="docutils literal notranslate"><span class="pre">Pin</span></code> class does not fully protect its representational invariant because a user could write a value to <code class="docutils literal notranslate"><span class="pre">a_pin_object.stars</span></code> outside the expected range. We could fix this problem by following the <em>setters and getters pattern</em> in OO programming, which gives the class designer control of a user’s access to the class’s attributes.<a class="footnote-reference brackets" href="#fn15" id="id15" role="doc-noteref"><span class="fn-bracket">[</span>15<span class="fn-bracket">]</span></a></p>
</section>
<section id="magic-methods">
<p><strong>Magic methods.</strong> The last undiscussed method in the <code class="docutils literal notranslate"><span class="pre">Pin</span></code> class is <code class="docutils literal notranslate"><span class="pre">__str__</span></code>. Like <code class="docutils literal notranslate"><span class="pre">__init__</span></code> and unlike <code class="docutils literal notranslate"><span class="pre">distance</span></code>, this method’s name starts and ends with two underbar characters. Methods that start and end with two underbars are called <em>magic methods</em> in Python, and they are what allow you to treat an instance of your class just like Python’s own built-in types.<a class="footnote-reference brackets" href="#fn16" id="id16" role="doc-noteref"><span class="fn-bracket">[</span>16<span class="fn-bracket">]</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">35</span><span class="c1">### chap11/pin.py</span>
<span class="linenos">36</span>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">37</span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="si">}</span><span class="s2"> rated </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stars</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\u2605</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">__str__</span></code> should always return a string. As the data type’s designer, I can return any string I like, and I’ve chosen to return a simple description of the <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object using a few of its attributes. This is a magic method because the interpreter looks for it when a <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object is used where the interpreter expects a string object. For example, the input parameters to <code class="docutils literal notranslate"><span class="pre">print</span></code> are expected to be strings, and when we pass a <code class="docutils literal notranslate"><span class="pre">Pin</span></code> object as a parameter to print, the Python interpreter looks for this specific magic method and, if it finds it, it uses it. The <code class="docutils literal notranslate"><span class="pre">main</span></code> function in <code class="docutils literal notranslate"><span class="pre">pin.py</span></code> runs a few tests on the <code class="docutils literal notranslate"><span class="pre">Pin</span></code> class and uses <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> along the way; it demonstrates how easy a <code class="docutils literal notranslate"><span class="pre">__str__</span></code> method makes printing the instances of classes we define.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">48</span><span class="c1">### chap11/pin.py</span>
<span class="linenos">49</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">50</span>    <span class="c1"># Our faithful dog</span>
<span class="linenos">51</span>    <span class="n">Cosmo</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\N{DOG FACE}</span><span class="s1">&#39;</span>
<span class="linenos">52</span>
<span class="linenos">53</span>    <span class="c1"># Build a city</span>
<span class="linenos">54</span>    <span class="n">nyc</span> <span class="o">=</span> <span class="n">CitySqGrid</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">Cosmo</span><span class="p">)</span>
<span class="linenos">55</span>
<span class="linenos">56</span>    <span class="c1"># Create some pins and keep track of them in a list</span>
<span class="linenos">57</span>    <span class="n">pins</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">58</span>        <span class="n">Pin</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s2">&quot;Park&quot;</span><span class="p">,</span> <span class="s2">&quot;Lots of squirrels&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="linenos">59</span>        <span class="n">Pin</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="s2">&quot;Fire Hydrant&quot;</span><span class="p">,</span> <span class="s2">&quot;Many good smells&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="linenos">60</span>        <span class="n">Pin</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s2">&quot;Cat&quot;</span><span class="p">,</span> <span class="s2">&quot;Not a nice cat!&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="linenos">61</span>    <span class="p">]</span>
<span class="linenos">62</span>
<span class="linenos">63</span>    <span class="c1"># Add each pin in pins to the city map</span>
<span class="linenos">64</span>    <span class="k">for</span> <span class="n">pin</span> <span class="ow">in</span> <span class="n">pins</span><span class="p">:</span>
<span class="linenos">65</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Adding </span><span class="si">{</span><span class="n">pin</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">66</span>        <span class="n">nyc</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">pin</span><span class="o">.</span><span class="n">loc</span><span class="p">,</span> <span class="n">pin</span><span class="o">.</span><span class="n">icon</span><span class="p">)</span>
<span class="linenos">67</span>
<span class="linenos">68</span>    <span class="nb">print</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">dir</span></code> command to see what attributes are in the <code class="docutils literal notranslate"><span class="pre">list</span></code> namespace. You’ll find <code class="docutils literal notranslate"><span class="pre">__str__</span></code>. Now you know how we’ve been able to print so many Python objects by just passing them as parameters to print.</p>
</div>
<p>The docstring on <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> describes several other magic methods that we’ve used. For example, the <code class="docutils literal notranslate"><span class="pre">__contains__</span></code> method allows us to use the Python operator <code class="docutils literal notranslate"><span class="pre">in</span></code> with a <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>. This method requires a parameter, which is a point in the city grid we’re asking about. This point becomes the value to the left of the <code class="docutils literal notranslate"><span class="pre">in</span></code> operator and the <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> instance we want to check is to the right. In other words, the Python interpreter changes the second code block below into the first one.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pt</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">nyc</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pt</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">pt</span> <span class="ow">in</span> <span class="n">nyc</span>
</pre></div>
</div>
<p>The key idea here is that when we define our own data type, we want to use it like those built into Python. When true, a programmer who uses our data types won’t have to think about who built it.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Implement as many of the Python magic methods as make sense for your class. It will make it easier for you and others to use your data type.</p>
</div>
</section>
<section id="building-on-others">
<p><strong>Building on others.</strong> It’s finally time to explain what’s in the parentheses on the class definition line. The <code class="docutils literal notranslate"><span class="pre">Pin</span></code> class definition begins with <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Pin(object)</span></code> and <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> with <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">CitySqGrid(maze.Maze)</span></code>. I built both these data types, but I didn’t design them from scratch. I built each as <em>a specialized kind of a more general data type</em>. This more general data type is what you put in the parentheses of the class definition.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Pin</span></code> class builds on a class called <code class="docutils literal notranslate"><span class="pre">object</span></code>, which is a class at the root of the Python object hierarchy. Every object of a built-in Python data type is also an object of type <code class="docutils literal notranslate"><span class="pre">object</span></code>. By saying that <code class="docutils literal notranslate"><span class="pre">Pin</span></code> is derived from <code class="docutils literal notranslate"><span class="pre">object</span></code>, I’m saying that I want <code class="docutils literal notranslate"><span class="pre">Pin</span></code> objects to be Python objects. Similarly, every instance of <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> is an instance of the data type called <code class="docutils literal notranslate"><span class="pre">Maze</span></code>, which is found in the <code class="docutils literal notranslate"><span class="pre">maze</span></code> module (i.e., in <code class="docutils literal notranslate"><span class="pre">maze.py</span></code>). Object-oriented enthusiasts call <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> a <em>subclass</em> of <code class="docutils literal notranslate"><span class="pre">Maze</span></code>. As a subclass, <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> inherits the attributes of <code class="docutils literal notranslate"><span class="pre">Maze</span></code>.</p>
<div class="tip admonition">
<p class="admonition-title">Terminology</p>
<p>Along with the term subclass, you will hear the complementary term <em>superclass</em>. <code class="docutils literal notranslate"><span class="pre">Maze</span></code> is the superclass of <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>, and it shares its attributes with all its subclasses.</p>
</div>
<p>It’s good that a subclass inherits the attributes of its superclass because, if you look in <code class="docutils literal notranslate"><span class="pre">city.py</span></code> at <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>’s class definition, you’ll find only two method definitions: <code class="docutils literal notranslate"><span class="pre">__init__</span></code> and <code class="docutils literal notranslate"><span class="pre">reset</span></code>. This is despite the fact that <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>’s docstring mentions many other methods, including ones we used in <code class="docutils literal notranslate"><span class="pre">wander.py</span></code> like <code class="docutils literal notranslate"><span class="pre">mark</span></code>, <code class="docutils literal notranslate"><span class="pre">get_mark</span></code>, <code class="docutils literal notranslate"><span class="pre">__str__</span></code>, and <code class="docutils literal notranslate"><span class="pre">__contains__</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">maze</span></code> class is quite long, and I don’t expect you to read through it in detail. But you should understand what it means when you see some methods (e.g., <code class="docutils literal notranslate"><span class="pre">__str__</span></code>) in the superclass (e.g., <code class="docutils literal notranslate"><span class="pre">Maze</span></code>) but not the subclass (e.g., <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code>). It means that objects the subclass act just like objects of the superclass for the purposes of these methods.</p>
<p>For example, converting a <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> object into a string follows the same procedure as converting a <code class="docutils literal notranslate"><span class="pre">Maze</span></code> object into one. Do you remember when we decided we needed only one implementation of our string-replace method back in Chapter 3? We wanted multiple invocations of this code, but we wanted to write that code only once. For all the same reasons we discussed there, object-oriented <em>inheritance</em> allows us to avoid repeating implementations in the context of data abstraction.</p>
<p>There are only two methods in <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> that <em>override</em> the similarly-named methods in <code class="docutils literal notranslate"><span class="pre">Maze</span></code>. These <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> methods exist because they need to do something different for <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> objects than what their namesakes in <code class="docutils literal notranslate"><span class="pre">Maze</span></code> do. Take <code class="docutils literal notranslate"><span class="pre">CitySqGrid.reset</span></code>; it wants to do everything in <code class="docutils literal notranslate"><span class="pre">Maze.reset</span></code> (as seen on line 83) plus the positioning of the <code class="docutils literal notranslate"><span class="pre">character</span></code> at the <code class="docutils literal notranslate"><span class="pre">start</span></code> location (line 87).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">80</span><span class="c1">### chap11/city.py</span>
<span class="linenos">81</span>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">82</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets all cell contents to their original state&quot;&quot;&quot;</span>
<span class="linenos">83</span>        <span class="n">maze</span><span class="o">.</span><span class="n">Maze</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="linenos">84</span>
<span class="linenos">85</span>        <span class="c1"># Reset the start point with our character</span>
<span class="linenos">86</span>        <span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
<span class="linenos">87</span>        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">character</span>
</pre></div>
</div>
<p>In general, it’s fine for a superclass method to operate on instances of a subclass if the methods maintain the subclass’s representation invariant. If they don’t, then you should <em>override</em> them by redefining those methods in the subclass.</p>
<div class="tip admonition">
<p class="admonition-title">Terminology and Conventions</p>
<p>You will find methods in the <code class="docutils literal notranslate"><span class="pre">Maze</span></code> class with names that start with a double underscore but do not end with them. By convention, these are <em>helper functions</em>. OO programming not only encapsulates the attributes and methods of a data type in a <code class="docutils literal notranslate"><span class="pre">class</span></code> statement, but it allows you to use all of the helpful aspects of procedural programming within this statement. For example, turning a <code class="docutils literal notranslate"><span class="pre">Maze</span></code> object into its ASCII image involves a row-by-row generation of ASCII characters. It is easier to implement this procedure by factoring out the work done for each row into a method called <code class="docutils literal notranslate"><span class="pre">__str_row</span></code> and then having <code class="docutils literal notranslate"><span class="pre">__str__</span></code> repeatedly call this helper function. However, this is an implementation detail, and I want it hidden from those using the data type. In Python, this hiding is done with a naming convention; other programming languages have keyword mechanisms for making certain attributes of a class <em>private</em> to the implementation of the class. If a piece of Python code outside the class definition calls a double-underbar-leading method at runtime, the Python3 interpreter will raise an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
</div>
</section>
<section id="general-maps">
<p><strong>General maps.</strong> The <code class="docutils literal notranslate"><span class="pre">Maze</span></code> class is the abstract data type we need to build a general map and on which we’ll design a goal-directed search algorithm that produces driving directions. We’re familiar with its interface from working with <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> objects. The map I’ll use in my examples is specified by the two configuration strings: <code class="docutils literal notranslate"><span class="pre">MAZE_map</span></code> and <code class="docutils literal notranslate"><span class="pre">MAZE_map_endpts</span></code>, which are defined in <code class="docutils literal notranslate"><span class="pre">maze.py</span></code>. When printed, these strings produce the map in <a class="reference internal" href="#c11-fig1-ref"><span class="std std-numref">Figure 28</span></a>.<a class="footnote-reference brackets" href="#fn17" id="id17" role="doc-noteref"><span class="fn-bracket">[</span>17<span class="fn-bracket">]</span></a></p>
<figure class="align-default" id="c11-fig1-ref">
<img alt="_images/c11_fig1.png" src="_images/c11_fig1.png" />
<figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">The map produced by the configuration strings <code class="docutils literal notranslate"><span class="pre">MAZE_map</span></code> and <code class="docutils literal notranslate"><span class="pre">MAZE_map_endpts</span></code> in <code class="docutils literal notranslate"><span class="pre">maze.py</span></code>. We’ll start at the location marked with an <code class="docutils literal notranslate"><span class="pre">s</span></code> and follow the roads which are the empty squares. Our goal is the square with the <code class="docutils literal notranslate"><span class="pre">g</span></code>.</span><a class="headerlink" href="#c11-fig1-ref" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="keeping-track">
<p><strong>Keeping track.</strong> Now that we have a digital representation of a map and an interface that allows us to move around it, we can finally write the script that will find a set of driving directions from our start location (<code class="docutils literal notranslate"><span class="pre">s</span></code>) to our goal location (<code class="docutils literal notranslate"><span class="pre">g</span></code>). This function will do much of what the function <code class="docutils literal notranslate"><span class="pre">dogwalk.py</span></code> did and so we’ll start with it. However, when we ask for driving directions, we’re not interested in seeing every path that the code explores and especially not the paths that end in dead-ends. Our problem specification says that our script should execute until it finds a solution or determines that there is no path from start to goal. If you like solving printed mazes, you already know how to do this: our function will need to keep track of the parts of the map it has explored and those places on the map it can reach from start but hasn’t yet explored. By tracking these unexplored places, our script can restart its search at one of them when its current search path ends in a dead-end. And it will know that the map does not contain a route from start to goal if it ever gets to a point when it hasn’t found the goal and there are no unexplored locations left.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">search</span></code> in <code class="docutils literal notranslate"><span class="pre">directions0.py</span></code> implements this algorithm, starting with the frame of <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code>. You’ll recognize the initialization of the start location and the while-loop that continues until it hits the goal location. In the loop, it gathers possible next steps from the current location and selects one. If there is no possible next step, it reports that there’s no path from start to goal to be found in the input map.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap11/directions0.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">maze</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Marks for map, which use color codes for terminal printing</span>
<span class="linenos"> 5</span><span class="n">EXPLORED</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[34m*</span><span class="se">\033</span><span class="s1">[0m&#39;</span> <span class="c1"># blue *</span>
<span class="linenos"> 6</span><span class="n">FRONTIER</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[32mf</span><span class="se">\033</span><span class="s1">[0m&#39;</span> <span class="c1"># green f</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">my_map</span><span class="p">):</span>
<span class="linenos"> 9</span>    <span class="c1"># Set the current state and mark the map location explored</span>
<span class="linenos">10</span>    <span class="n">cur_loc</span> <span class="o">=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">start</span>
<span class="linenos">11</span>    <span class="n">my_map</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="c1"># Build a list on which to keep known but unexplored locations</span>
<span class="linenos">14</span>    <span class="n">frontier</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">15</span>
<span class="linenos">16</span>    <span class="k">while</span> <span class="n">cur_loc</span> <span class="o">!=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">goal</span><span class="p">:</span>    <span class="c1"># search loop</span>
<span class="linenos">17</span>        <span class="c1"># What unexplored next steps are possible?</span>
<span class="linenos">18</span>        <span class="n">moves</span> <span class="o">=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">possible_moves</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">19</span>
<span class="linenos">20</span>        <span class="c1"># Add moves not already on the frontier to the frontier</span>
<span class="linenos">21</span>        <span class="k">for</span> <span class="n">a_move</span> <span class="ow">in</span> <span class="n">moves</span><span class="p">:</span>
<span class="linenos">22</span>            <span class="n">loc</span> <span class="o">=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">simulate_move</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">a_move</span><span class="p">)</span>
<span class="linenos">23</span>            <span class="k">if</span> <span class="n">loc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">frontier</span><span class="p">:</span>
<span class="linenos">24</span>                <span class="n">frontier</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
<span class="linenos">25</span>                <span class="n">my_map</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">FRONTIER</span><span class="p">)</span>
<span class="linenos">26</span>
<span class="linenos">27</span>        <span class="c1"># DEBUG: Uncomment to watch the frontier grow</span>
<span class="linenos">28</span>        <span class="c1"># print(my_map)</span>
<span class="linenos">29</span>        <span class="c1"># input(&#39;Ready to move on? &#39;)</span>
<span class="linenos">30</span>
<span class="linenos">31</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">frontier</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">32</span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No solution&#39;</span><span class="p">)</span>
<span class="linenos">33</span>            <span class="k">return</span>
<span class="linenos">34</span>
<span class="linenos">35</span>        <span class="c1"># Choose a location from the frontier as next to explore</span>
<span class="linenos">36</span>        <span class="n">next_loc</span> <span class="o">=</span> <span class="n">frontier</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="linenos">37</span>        <span class="n">my_map</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">next_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span>        <span class="c1"># Update current state</span>
<span class="linenos">40</span>        <span class="n">cur_loc</span> <span class="o">=</span> <span class="n">next_loc</span>
<span class="linenos">41</span>
<span class="linenos">42</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Found a solution&#39;</span><span class="p">)</span>
<span class="linenos">43</span>    <span class="n">my_map</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
<span class="linenos">44</span>    <span class="k">return</span>
</pre></div>
</div>
<p>The new bit is the addition of a <code class="docutils literal notranslate"><span class="pre">frontier</span></code> list, which keeps track of the possible moves not chosen. Remember that the function <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code> threw these other possibilities away. We now keep them so that the function ends when there truly are no other possible paths to explore.</p>
<p>There is one tricky aspect to the maintenance of the frontier list: we might get to a location along multiple paths from the start location (see <a class="reference internal" href="#c11-fig2-ref"><span class="std std-numref">Figure 29</span></a> for such an example). We should add such locations to our frontier list only once. Lines 20-25 in <code class="docutils literal notranslate"><span class="pre">directions0.py</span></code> ensure that the algorithm abides by this condition.</p>
<figure class="align-default" id="c11-fig2-ref">
<img alt="_images/c11_fig2.png" src="_images/c11_fig2.png" />
<figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">Two paths from start that reach location (1,8). Our script should add this location to the frontier list only once.</span><a class="headerlink" href="#c11-fig2-ref" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>You might also notice that we <code class="docutils literal notranslate"><span class="pre">pop</span></code> an unexplored location off the frontier list instead of using <code class="docutils literal notranslate"><span class="pre">random.choice</span></code> as we did in <code class="docutils literal notranslate"><span class="pre">dogwalk</span></code>. You can think of this pop as making a random choice because we aren’t paying attention to what’s at the end of list. Later in this chapter, I’ll explain how a different choice affects the running of the search.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Uncomment lines 28-29 and then run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">directions0.py</span></code>. In each loop iteration, it pauses and prints the map so that you can watch the algorithm explore the map and manage the frontier. When you’re done, re-comment these two lines and re-run the script.</p>
</div>
</section>
<section id="remembering-how-we-got-there">
<p><strong>Remembering how we got there.</strong> Our function search finds a path in <code class="docutils literal notranslate"><span class="pre">my_map</span></code> from the start location to the goal location, but this path is lost in the sea of paths that ended in dead ends. We need to add functionality to our algorithm that lets it pull this desired path out from the others. The challenge in this is that we won’t know which steps are in the desired path until <code class="docutils literal notranslate"><span class="pre">search</span></code> encounters the goal. Until that point, we must have it must record the actions from all its explorations. Visually, <code class="docutils literal notranslate"><span class="pre">search</span></code> needs to record the actions it took along the five orange paths in <a class="reference internal" href="#c11-fig3-ref"><span class="std std-numref">Figure 30</span></a>, which didn’t reach the goal, as well as the single blue path, which did.</p>
<figure class="align-default" id="c11-fig3-ref">
<img alt="_images/c11_fig3.png" src="_images/c11_fig3.png" />
<figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">The six paths explored during the execution of <code class="docutils literal notranslate"><span class="pre">search</span></code> on our example map.</span><a class="headerlink" href="#c11-fig3-ref" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Recording paths like these (i.e., moving from one state to another by taking some action) is a pattern that you’ll see in many computational problems.</p>
</div>
<p>We record these paths by building a data structure that mimics the tree-like structure you see in <a class="reference internal" href="#c11-fig3-ref"><span class="std std-numref">Figure 30</span></a>. In this figure, all paths take the same first five actions (i.e., go east three steps then north two). At location <code class="docutils literal notranslate"><span class="pre">(5,4)</span></code>, two of the orange paths head west and the rest of the paths, including our desired blue one, head east. These first five actions represent the trunk of an imagined tree, and location <code class="docutils literal notranslate"><span class="pre">(5,4)</span></code> represents the first branching of the tree.</p>
<p>We can digitally represent this tree by connecting together a series of notes to ourselves, each of which we’ll call a <code class="docutils literal notranslate"><span class="pre">TreeNote</span></code>. In these notes, the <code class="docutils literal notranslate"><span class="pre">search</span></code> function will record (at least):</p>
<ol class="arabic simple">
<li><p>a state (in our problem this is a map location); and</p></li>
<li><p>the action (i.e., a driving direction) taken by our <code class="docutils literal notranslate"><span class="pre">search</span></code> function that is connected to the recorded state.</p></li>
</ol>
<p>I cryptically described the noted action because we have a choice: Do we want to record the action <code class="docutils literal notranslate"><span class="pre">search</span></code> took <em>from</em> the state in the note, or would it be better to record the action <code class="docutils literal notranslate"><span class="pre">search</span></code> took <em>to get to</em> that state? Well, which do we need to solve the problem in front of us? Which will help distinguish the blue path from the orange ones in <a class="reference internal" href="#c11-fig3-ref"><span class="std std-numref">Figure 30</span></a>? To answer this question, think about what you want to know when <code class="docutils literal notranslate"><span class="pre">search</span></code> finds the goal.</p>
<p>There’s nowhere to go from the goal, since <code class="docutils literal notranslate"><span class="pre">search</span></code> has found where we want to go, but it needs to know how it got there. So it needs to record the previous action that got it to the current location. And to walk all the way back from goal to start, it will want a chain of notes it can follow. Using Python classes, the data structure I’m describing would look as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 8</span><span class="c1">### chap11/directions-dfs.py</span>
<span class="linenos"> 9</span><span class="k">class</span> <span class="nc">TreeNote</span><span class="p">():</span>
<span class="linenos">10</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
<span class="linenos">11</span>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>    <span class="c1"># current location </span>
<span class="linenos">12</span>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>  <span class="c1"># previous note in path</span>
<span class="linenos">13</span>        <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">action</span>  <span class="c1"># action that got us to this location</span>
</pre></div>
</div>
<p>As an example of this chaining, the <code class="docutils literal notranslate"><span class="pre">search</span></code> function would start by creating a note for the start location, which it creates by calling the <code class="docutils literal notranslate"><span class="pre">TreeNote</span></code> constructor with parameters that say there is no parent note and no action that got us to start, i.e., <code class="docutils literal notranslate"><span class="pre">TreeNote((7,1),</span> <span class="pre">None,</span> <span class="pre">None)</span></code>. From start, the only move to make in our example map is east, and the constructor call for the next location is: <code class="docutils literal notranslate"><span class="pre">TreeNote((7,2),</span> <span class="pre">???,</span> <span class="pre">'east')</span></code>, where I’ve left the <code class="docutils literal notranslate"><span class="pre">parent</span></code> parameter unspecified. What is it supposed to be? Right! The note (i.e., the name of the <code class="docutils literal notranslate"><span class="pre">TreeNote</span></code>) created at start. With the proceeding note in our current note, we’ll be able to find the location that preceded the goal. And from it the location before it, all the way back to the start.</p>
<p>Interestingly, branching points present no difficulties when proceeding in a tree from a leaf to the root. A branching location is the parent to all paths that emanate from this point. This means, if we start at the end of the blue path (i.e., the goal), <code class="docutils literal notranslate"><span class="pre">search</span></code> can easily follow the notes it created directly back to start, and to produce driving directions, it simply reverses the list of actions it encounters as it visits each <code class="docutils literal notranslate"><span class="pre">parent</span></code> from goal to start.</p>
</section>
<section id="the-solution">
<p><strong>The solution.</strong> We’ve now have all the components needed to solve our problem, and we just have to implement them. Once we’ve defined our <code class="docutils literal notranslate"><span class="pre">TreeNote</span></code> class, we use it where needed. For example, in <code class="docutils literal notranslate"><span class="pre">directions0.py</span></code>, we stored unexplored map locations in the <code class="docutils literal notranslate"><span class="pre">frontier</span></code> list, but now when we pop from this list, we are going to want to have access to the <code class="docutils literal notranslate"><span class="pre">TreeNote</span></code> that goes with it. It is needed to build the notes for the unexplored locations reachable from that <code class="docutils literal notranslate"><span class="pre">TreeNote</span></code>’s location. If you think about this for a bit, you’ll realize that we’ll want to store <code class="docutils literal notranslate"><span class="pre">TreeNote</span></code>s on the <code class="docutils literal notranslate"><span class="pre">frontier</span></code> list. A complete solution for <code class="docutils literal notranslate"><span class="pre">search</span></code> is shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap11/directions-dfs.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">maze</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Marks for map, which use color codes for terminal printing</span>
<span class="linenos"> 5</span><span class="n">EXPLORED</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[34m*</span><span class="se">\033</span><span class="s1">[0m&#39;</span> <span class="c1"># blue *</span>
<span class="linenos"> 6</span><span class="n">FRONTIER</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\033</span><span class="s1">[32mf</span><span class="se">\033</span><span class="s1">[0m&#39;</span> <span class="c1"># green f</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Keep track of the tree of explored paths</span>
<span class="linenos"> 9</span><span class="k">class</span> <span class="nc">TreeNote</span><span class="p">():</span>
<span class="linenos">10</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
<span class="linenos">11</span>        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>    <span class="c1"># current location </span>
<span class="linenos">12</span>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>  <span class="c1"># previous note in path</span>
<span class="linenos">13</span>        <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">action</span>  <span class="c1"># action that got us to this location</span>
<span class="linenos">14</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">my_map</span><span class="p">):</span>
<span class="linenos">17</span>    <span class="c1"># Set the current state and mark the map location explored</span>
<span class="linenos">18</span>    <span class="n">cur_loc</span> <span class="o">=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">start</span>
<span class="linenos">19</span>    <span class="n">my_map</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">20</span>    <span class="n">cur_note</span> <span class="o">=</span> <span class="n">TreeNote</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="linenos">21</span>
<span class="linenos">22</span>    <span class="c1"># Build a list on which to keep known but unexplored locations</span>
<span class="linenos">23</span>    <span class="n">frontier</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">24</span>
<span class="linenos">25</span>    <span class="k">while</span> <span class="n">cur_loc</span> <span class="o">!=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">goal</span><span class="p">:</span>    <span class="c1"># search loop</span>
<span class="linenos">26</span>        <span class="c1"># What unexplored next steps are possible?</span>
<span class="linenos">27</span>        <span class="n">moves</span> <span class="o">=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">possible_moves</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">28</span>
<span class="linenos">29</span>        <span class="c1"># Add moves not already on the frontier to the frontier</span>
<span class="linenos">30</span>        <span class="k">for</span> <span class="n">a_move</span> <span class="ow">in</span> <span class="n">moves</span><span class="p">:</span>
<span class="linenos">31</span>            <span class="n">loc</span> <span class="o">=</span> <span class="n">my_map</span><span class="o">.</span><span class="n">simulate_move</span><span class="p">(</span><span class="n">cur_loc</span><span class="p">,</span> <span class="n">a_move</span><span class="p">)</span>
<span class="linenos">32</span>            <span class="k">if</span> <span class="n">loc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">frontier</span><span class="p">:</span>
<span class="linenos">33</span>                <span class="n">new_note</span> <span class="o">=</span> <span class="n">TreeNote</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">cur_note</span><span class="p">,</span> <span class="n">a_move</span><span class="p">)</span>
<span class="linenos">34</span>                <span class="n">frontier</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_note</span><span class="p">)</span>
<span class="linenos">35</span>                <span class="n">my_map</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">FRONTIER</span><span class="p">)</span>
<span class="linenos">36</span>
<span class="linenos">37</span>        <span class="c1"># DEBUG: Uncomment to watch the frontier grow</span>
<span class="linenos">38</span>        <span class="c1"># print(my_map)</span>
<span class="linenos">39</span>        <span class="c1"># input(&#39;Ready to move on? &#39;)</span>
<span class="linenos">40</span>
<span class="linenos">41</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">frontier</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">42</span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No solution&#39;</span><span class="p">)</span>
<span class="linenos">43</span>            <span class="k">return</span>
<span class="linenos">44</span>
<span class="linenos">45</span>        <span class="c1"># Choose a note from the frontier as next to explore</span>
<span class="linenos">46</span>        <span class="n">next_note</span> <span class="o">=</span> <span class="n">frontier</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="linenos">47</span>        <span class="n">next_loc</span> <span class="o">=</span> <span class="n">next_note</span><span class="o">.</span><span class="n">state</span>
<span class="linenos">48</span>        <span class="n">my_map</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="n">next_loc</span><span class="p">,</span> <span class="n">EXPLORED</span><span class="p">)</span>
<span class="linenos">49</span>
<span class="linenos">50</span>        <span class="c1"># Update current state</span>
<span class="linenos">51</span>        <span class="n">cur_note</span> <span class="o">=</span> <span class="n">next_note</span>
<span class="linenos">52</span>        <span class="n">cur_loc</span> <span class="o">=</span> <span class="n">next_loc</span>
<span class="linenos">53</span>
<span class="linenos">54</span>    <span class="c1"># Follow the parent links from cur_note to create</span>
<span class="linenos">55</span>    <span class="c1"># the actual driving directions</span>
<span class="linenos">56</span>    <span class="n">ddirections</span> <span class="o">=</span> <span class="p">[</span><span class="n">cur_note</span><span class="p">]</span>
<span class="linenos">57</span>    <span class="k">while</span> <span class="n">cur_note</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
<span class="linenos">58</span>        <span class="n">cur_note</span> <span class="o">=</span> <span class="n">cur_note</span><span class="o">.</span><span class="n">parent</span>
<span class="linenos">59</span>        <span class="n">ddirections</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">cur_note</span><span class="p">)</span>
<span class="linenos">60</span>
<span class="linenos">61</span>    <span class="c1"># Print out the driving directions</span>
<span class="linenos">62</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;## Solution ##&#39;</span><span class="p">)</span>
<span class="linenos">63</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Starting at </span><span class="si">{</span><span class="n">ddirections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">64</span>    <span class="n">ddirections</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">65</span>    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ddirections</span><span class="p">:</span>
<span class="linenos">66</span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Go </span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">action</span><span class="si">}</span><span class="s1"> then&#39;</span><span class="p">)</span>
<span class="linenos">67</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Arrive at your goal&#39;</span><span class="p">)</span>
<span class="linenos">68</span>    <span class="k">return</span>
</pre></div>
</div>
<p>If you compare this code with <code class="docutils literal notranslate"><span class="pre">directions0.py</span></code>, you’ll see that the only differences are the creation of notes, the maintenance of them on the frontier list, and the determination and printing of the final driving directions. In reviewing <code class="docutils literal notranslate"><span class="pre">directions-dfs.py</span></code>, pay careful attention to the difference between <code class="docutils literal notranslate"><span class="pre">cur_note</span></code>, <code class="docutils literal notranslate"><span class="pre">new_note</span></code>, and <code class="docutils literal notranslate"><span class="pre">next_note</span></code>. The first is a loop-carried variable, which we update at the end of the while-loop and use throughout the early part of the loop body. The others are just temporary names that we don’t want to overwrite the value in <code class="docutils literal notranslate"><span class="pre">cur_note</span></code>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">search</span></code> encounters the goal and the while-loop ends, the interpreter begins execution of the code on lines 54-68. These are the lines that use our notes to create the driving directions we desire. The first block (lines 54-59) starts with <code class="docutils literal notranslate"><span class="pre">cur_note</span></code>, which is the goal location when the while-loop exits, and builds a list (called <code class="docutils literal notranslate"><span class="pre">ddirections</span></code>) that reverses the order in which the loop visits the notes. The second block (lines 61-68) uses <code class="docutils literal notranslate"><span class="pre">ddirections</span></code> to print the actions in human-readable form. The only trickiness is on line 64 where we must remember to remove the note corresponding to the start location, which has no stored action.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">directions-dfs.py</span></code>. It prints the driving directions we desire!</p>
</div>
</section>
<section id="depth-first-search-dfs">
<p><strong>Depth-first search (DFS).</strong> The search algorithm in <code class="docutils literal notranslate"><span class="pre">directions-dfs.py</span></code> is a <em>depth-first search</em>.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Uncomment lines 38-39 in <code class="docutils literal notranslate"><span class="pre">directions-dfs.py</span></code> and run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">directions-dfs.py</span></code>. It prints a sequence of maps corresponding to each step the function <code class="docutils literal notranslate"><span class="pre">search</span></code> makes. When you review these maps in order, you’ll notice that search goes down a road as far as it can before backing up and trying a different road. When it encounters an intersection, it chooses a direction through that intersection and keeps going.</p>
</div>
<p>This behavior is clearly not the only thing our search algorithm could have done, and if we want to do something different, we need to understand what caused this behavior. The answer is amazingly simple: the way in which we add elements to and remove them from the <code class="docutils literal notranslate"><span class="pre">frontier</span></code> list. The current code does the following:</p>
<ul class="simple">
<li><p>When we find a new unexplored location, we <em>append it to the end</em> of the frontier list (line 34).</p></li>
<li><p>When we go to explore a new location, we <em>pop one off the end</em> of the frontier list (line 46). In Python, <code class="docutils literal notranslate"><span class="pre">pop</span></code> with no arguments removes the last item from the list.</p></li>
</ul>
<p>Computer scientists like to talk about this behavior as “last-in, first-out” and to imagine it as operating like a <em>stack</em> (e.g., a stack of plates): The last one added to the stack is the first one taken off.</p>
<p>What’s good about this approach? Well, if we’re lucky, the first path we explore might lead to the goal state, and even if not, the approach can be very fast in finding a solution when there are many possible solutions. On the other hand, when there are many paths to the goal, this approach just takes the first it finds. There’s no guarantee that our DFS solution is the shortest path to the goal.</p>
</section>
<section id="breadth-first-search-bfs">
<p><strong>Breadth-first search (BFS).</strong> But what if we’re interested in finding the <em>shortest path</em> from start to goal (i.e., let’s change our specification). Can we change the way <code class="docutils literal notranslate"><span class="pre">search</span></code> operates to guarantee that it returns the shortest path, if one exists? We can, and what’s even more amazing is that it requires only a single character change!</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>The only substantial difference between <code class="docutils literal notranslate"><span class="pre">directions-dfs.py</span></code> and <code class="docutils literal notranslate"><span class="pre">directions-bfs.py</span></code> is the addition of <code class="docutils literal notranslate"><span class="pre">0</span></code> as the parameter passed to <code class="docutils literal notranslate"><span class="pre">pop</span></code>. Line 1 is also different, but that change in the comment doesn’t affect the script’s behavior. Now uncomment lines 38-39 in <code class="docutils literal notranslate"><span class="pre">directions-bfs.py</span></code> and run it. Contrast how it explores the maze with what you saw when running <code class="docutils literal notranslate"><span class="pre">directions-dfs.py</span></code>.</p>
</div>
<p>Both versions of <code class="docutils literal notranslate"><span class="pre">search</span></code> place new unexplored locations at the end of the frontier list; they differ only in how they take unexplored locations from the frontier list. DFS takes from the end, and BFS, or <em>breadth-first search</em>, takes from the front. Instead of “last-in, first-out” as under DFS, BFS manages the frontier in a “first-in, first-out” manner, which is what computer scientists called a <em>queue</em>. Imagine the line that queues up to check-out at a grocery store.</p>
<p>When you watched the BFS script operate, you saw the search expand in all directions at the same rate. In other words, no explored path was more than one step longer than any other path. This means that <code class="docutils literal notranslate"><span class="pre">search</span></code> will find the shortest path (or technically, one of the shortest) from start to goal before any longer path. This approach is guaranteed to find the shortest path, but at the cost of searching methodically along every path.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>If you take the time to figure out how the configuration strings work in <code class="docutils literal notranslate"><span class="pre">maze.py</span></code>, change the map we’ve been using or design your own, and then run them through the DFS and BFS scripts. You should find that these fairly short scripts are impressively robust!</p>
</div>
</section>
<section id="informed-searches">
<p><strong>Informed searches.</strong> Both DFS and BFS are called <em>uninformed searches</em> because they don’t use any information about the problem except what they gleam from their own explorations. This means that you can directly use these algorithms on any goal-directed search problem. You just need to encode your problem in a data structure comprising interconnected states, and then adapt the data-structure-specific parts of <code class="docutils literal notranslate"><span class="pre">search</span></code> to explore it!</p>
<p>But what if we were interested not in any goal-directed problem, but a specific one. Could we use information about the problem to create an algorithm that combines the direct-to-goal-nature of DFS with the good-answer-aspects of BFS? In other words, could problem-specific knowledge help us to identify and avoid paths that are unlikely to be a solution? As a concrete example, how might we adapt the goal-directed searches we’ve seen for the driving directions problem if we were given the as-the-crow-flies distance between each map location and the goal?</p>
<p>The as-the-crow-flies distance to the goal isn’t a set of driving directions (i.e., we’re not following the map!), but it does indicate which of two moves would bring us closer to the goal. Imagine using this distance to select the search algorithm’s next location from the frontier list. We’re using the distance to put the frontier list locations in a priority order. The higher the priority, the more likely that location will get us to the goal.</p>
<p>In general, prioritizing our possible search moves is the job of a <em>heuristic function.</em> The heuristic we use, of course, might be wrong. For example, we might have to drive in a direction away from the goal to find the road that will get us to it. Heuristics don’t guarantee that we’ll do better, but good ones, on average, find a near-optimal solution more quickly than our two uninformed solutions.</p>
<p>There are many heuristics in the domain of search. I asked you to imagine a common one (called <em>greedy</em>), which always takes the move from the frontier list with the best heuristic score. Another, which often provides more consistently good results, combines the cost of the path to the current point with the value of that point’s heuristic (called <em>A* search</em>). Overall, there is a rich literature associated with search, and you are now prepared to dive into it to solve your own goal-directed search problems.</p>
<p>[Version 20240820]</p>
<hr class="footnotes docutils" />
<aside class="footnote brackets" id="fn1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>It didn’t take many years of Google’s existence before it realized that maps and mapping should an important part of its web services. As a fun look at the history of Google Maps and how middle-aged entrepreneurs working civilized hours launched what has become Maps, you might read <a class="reference external" href="https://medium.com/&#64;lewgus/the-untold-story-about-the-founding-of-google-maps-e4a5430aec92">this short Medium article</a>.</p>
</aside>
<aside class="footnote brackets" id="fn2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>The challenge in designing algorithms and data structures is in discovering functional and data abstractions that are simultaneously: (1) easily understood by humans; (2) easily coded in an existing programming language; (3) easily executed by existing computers; and (4) easily mapped to real-world problems. Achieving all four isn’t easy, and an important reason to be familiar with classical algorithms and data structures is because they have been shown to exhibit all these features. Most of the time, problem solving with computation is about selecting which classical algorithms and data structures are problem-appropriate than it is about discovering entirely new algorithms and data structures.</p>
</aside>
<aside class="footnote brackets" id="fn3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>To run the code blocks in this chapter, you’ll need to upload `maze.py` and `city.py` from the `chap11` directory in book’s GitHub repo into your IDE or interactive Python notebook session.</p>
</aside>
<aside class="footnote brackets" id="fn4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>Yes, I’m having some fun with the name of our square-grid city. If you’ve tried to drive around Boston, you’ll know what I mean.</p>
</aside>
<aside class="footnote brackets" id="fn5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">5</a><span class="fn-bracket">]</span></span>
<p>These string values are what `move` expects for its `direction` parameter. Capitalization doesn’t matter for these strings, and typing only the first letter is sufficient.</p>
</aside>
<aside class="footnote brackets" id="fn6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">6</a><span class="fn-bracket">]</span></span>
<p>Using an emoji for my dog shows the limitations of ASCII art, which depends upon monospaced characters. Emoji don’t abide by monospacing. Please excuse the poor spacing caused by the dog face. I find it more fun to look at this emoji than a bland ‘s’ character.</p>
</aside>
<aside class="footnote brackets" id="fn7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">7</a><span class="fn-bracket">]</span></span>
<p>The combination of `sim.py` and `dogwalk.py` was inspired by Program 1.4.4 in <em>Computer Science: An Interdisciplinary Approach</em> by Robert Sedgewick and Kevin Wayne (2017, p. 113).</p>
</aside>
<aside class="footnote brackets" id="fn8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">8</a><span class="fn-bracket">]</span></span>
<p>John V. Guttag (2021). <em>Introduction to Computation and Programming Using Python: With Application to Understanding Data</em>, third edition. The MIT Press.</p>
</aside>
<aside class="footnote brackets" id="fn9" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">9</a><span class="fn-bracket">]</span></span>
<p>I don’t fault the designers of Python for not clearly separating interface from implementation. I’ve programmed in other languages that require a rigid interface specification, and I personally don’t think it helps. The syntax of a programming language simply is not a good place to try to explain a data type’s abstraction. Python’s approach is saying, in effect, that the interface is in the code that follows, but you probably want to read something in English to best understand it.</p>
</aside>
<aside class="footnote brackets" id="fn10" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">10</a><span class="fn-bracket">]</span></span>
<p>I show only `Pin.__init__`, which is spelled with two leading and two trailing underbar characters.`CitySqGrid.__init__` does work appropriate for one of its instances. For instance, it makes sure that the city is between 2 and 20 buildings on a side and that this number is an even (so that there is a single central location).</p>
</aside>
<aside class="footnote brackets" id="fn11" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">11</a><span class="fn-bracket">]</span></span>
<p>A function within a class namespace is what is called a method.</p>
</aside>
<aside class="footnote brackets" id="fn12" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id12">12</a><span class="fn-bracket">]</span></span>
<p>While Python doesn’t require the name `self`, it is highly recommended that you follow this common practice. If you do, other Python programmers will immediately know what you’re doing.</p>
</aside>
<aside class="footnote brackets" id="fn13" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id13">13</a><span class="fn-bracket">]</span></span>
<p>As well as the values in `self.note`, `self.stars`, and `self.icon`.</p>
</aside>
<aside class="footnote brackets" id="fn14" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id14">14</a><span class="fn-bracket">]</span></span>
<p>Programming with class variables is tricky. If you’d like to learn more about them, I encourage you to read a book focused on the object-oriented properties of Python.</p>
</aside>
<aside class="footnote brackets" id="fn15" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id15">15</a><span class="fn-bracket">]</span></span>
<p>Nishant Gupta’s short Medium article titled “<a class="reference external" href="https://medium.com/nishkoder/understanding-python-property-decorators-getters-setters-57d6b535e5d2">Understanding Python Property Decorators: Getters, Setters</a>” describes the basics of how Python supports this pattern.</p>
</aside>
<aside class="footnote brackets" id="fn16" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id16">16</a><span class="fn-bracket">]</span></span>
<p>There’s nothing in Python stopping you from using, for example, the name `__distance__` except convention in the Python programming community. By following the convention, experienced Python programmers know what you’re doing.</p>
</aside>
<aside class="footnote brackets" id="fn17" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id17">17</a><span class="fn-bracket">]</span></span>
<p>This map closely resembles the one used in Week 0 (Search) of <a class="reference external" href="https://cs50.harvard.edu/ai">CS50’s Introduction to Artificial Intelligence with Python</a>. I thank David Malan and his team for the use of it.</p>
</aside>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="chap10.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 10: Build an Index</p>
      </div>
    </a>
    <a class="right-next"
       href="chap12.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 12: Divide and Conquer</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-new-approach-to-programming">A new approach to programming</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#driving-directions-a-formal-specification">Driving directions, a formal specification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parallels-with-finite-state-machines">Parallels with finite state machines</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solutions-with-particular-characteristics">Solutions with particular characteristics</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-walk-before-we-drive">Let’s walk before we drive</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-random-walk">A random walk</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#will-it-work">Will it work?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-short-walk-please">A short walk, please</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#no-loops">No loops</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#only-visit-new-spots">Only visit new spots</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-dog-walk">A dog walk</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation">Simulation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#to-maps-through-oo-programming">To maps through OO programming</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#classes">Classes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-an-instance">Building an instance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#self-and-instance-attributes">Self and instance attributes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods">Methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representational-invariant">Representational invariant</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#magic-methods">Magic methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-on-others">Building on others</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-maps">General maps</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#keeping-track">Keeping track</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remembering-how-we-got-there">Remembering how we got there</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-solution">The solution</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#depth-first-search-dfs">Depth-first search (DFS)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breadth-first-search-bfs">Breadth-first search (BFS)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#informed-searches">Informed searches</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mike Smith
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023 by Michael D. Smith. All rights reserved.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>