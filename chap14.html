

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Chapter 14: The Dream of Bug Fixing &#8212; Computational Thinking and Problem Solving</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chap14';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Chapter 15: Embrace Runtime Debugging" href="chap15.html" />
    <link rel="prev" title="Chapter 13: Rewrite the Error Message" href="chap13.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="ctps.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/mike_flat.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/mike_flat.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="ctps.html">
                    <no title>
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap01.html">Chapter 1: Read a Children’s Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap02.html">Chapter 2: Grab the Dialogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap03.html">Chapter 3: Replace Text with Emoji</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap04.html">Chapter 4: Query a Web Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap05.html">Chapter 5: Play Guess-a-number</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap06.html">Chapter 6: Do You See My Dog?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap07.html">Chapter 7: Many But Not Any Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap08.html">Chapter 8: What Is My Problem?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap09.html">Chapter 9: Find a Phrase</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap10.html">Chapter 10: Build an Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap11.html">Chapter 11: Discover Driving Directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap12.html">Chapter 12: Divide and Conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap13.html">Chapter 13: Rewrite the Error Message</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 14: The Dream of Bug Fixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap15.html">Chapter 15: Embrace Runtime Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap16.html">Chapter 16: Catch Them Early</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap17.html">Chapter 17: Build Prediction Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap18.html">Chapter 18: Use Generative AI</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/chap14.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 14: The Dream of Bug Fixing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-all-bugs">Finding all bugs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-problems">Decision problems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uncomputable-problems">Uncomputable problems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-analysis-that-finds-a-bug">An analysis that finds a bug</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-our-simple-analysis">Running our simple analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-tool-for-running-analyses">A tool for running analyses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#grabbing-a-function-with-a-syntax-error">Grabbing a function with a syntax error</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analyzing-other-functions">Analyzing other functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-input">Using the input</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-non-trivial-decision-problem">A non-trivial decision problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-indecisive-decision-function">An indecisive decision function</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insight-from-indecision">Insight from indecision</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifications-without-implementations">Specifications without implementations</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chapter-14-the-dream-of-bug-fixing">
<h1>Chapter 14: The Dream of Bug Fixing<a class="headerlink" href="#chapter-14-the-dream-of-bug-fixing" title="Permalink to this heading">#</a></h1>
<p>While we may not like the Python interpreter’s error messages, at least they give us a clue to the specific syntax or runtime errors it finds. They are a starting point for our efforts to fix our script and get the machine to do what we want. In contrast, it’s harder for us to diagnose design errors (i.e., solving your problem incorrectly) and subtle coding errors (e.g., writing a script with an infinite loop or multiplying a value by the wrong constant). To check for these kinds of errors, we must test our scripts across a range of inputs, verifying that they produce the expected output in each instance. But what do you do when they inevitably don’t?</p>
<p>You’ve been here with your own scripts, and you know that you need to dig into each script’s execution and determine which of its tasks are correct and which went awry. The tool you’ve largely used to this point has been the print-statement. You inserted <em>debugging print-statements</em> at strategic points to see: (1) if the script’s execution got to that point; and (2) if it did, what were the values of some important variables. Through this information gathering, you generated a hypothesis of what went wrong, and then you inserted more debugging print-statements to test that hypothesis. It was slow and painful work.</p>
<p>It’s not at all hard to get started debugging with print-statements, and that’s why they’re our first tool for finding and fixing errors. But as your scripts get longer and more complex, you’ll long for better tools. And several exist for finding design and subtle coding errors, which we’ll cover in the next two chapters. In Chapter 15, we’ll build a <em>runtime debugging tool</em> that gives you the functionality of debugging print-statements (and more) without you having to edit and rerun your script. In Chapter 16, we’ll learn that it is possible, using <em>static analysis tools</em>, to find <em>some</em> of your script’s coding errors without editing or running it.<a class="footnote-reference brackets" href="#fn1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<p>The ordering of these next two chapters is toward tools that find bugs while requiring us to do less of this tedious debugging work. But what about this chapter? It gets us moving in this direction by covering the basics of static program analysis and engaging us with several simple static analysis tools (in particular, functions that ask and answer questions about other functions). We won’t just get moving, however. We’ll also answer everyone’s ultimate bug-finding question: Can we build <em>an analysis tool that finds for us all the bugs in all our scripts?</em> Wouldn’t we all love to have that tool!</p>
<div class="admonition-learning-outcomes admonition">
<p class="admonition-title">Learning Outcomes</p>
<p>Learn about a fundamental limitation of computational tools—which is that there are specifications that we cannot write as a computational script. Alan Turing proved this fact in 1936, and you will work with simple decision programs to see why this is true. After completing this chapter, you will be able to do the following:</p>
<ul class="simple">
<li><p>Write scripts that take other scripts as input [design and programming skills].</p></li>
<li><p>Use such scripts to perform a simple static analysis that finds a syntax error in a function’s source code [CS concepts and programming skills].</p></li>
<li><p>Work with function objects and access their attributes, in particular their source code [programming skills].</p></li>
<li><p>Develop scripts that grab function objects from a string defined at runtime [programming skills].</p></li>
<li><p>Build a tool that allows you to define and run lots of different program analysis functions [design and programming skills].</p></li>
<li><p>Discuss the differences between uncomputable, undecidable, intractable, and tractable problems [CS concepts].</p></li>
<li><p>Describe the structure of a (famous) proof that uncomputable programs exist [CS concepts].</p></li>
<li><p>Give examples of how normally bad things (e.g., programs with an infinite loop and those that are intractable) can sometimes be useful [design and CS concepts].</p></li>
</ul>
</div>
<section id="finding-all-bugs">
<p><strong>Finding all bugs.</strong> Let’s develop a specification for how such a super tool might work. To begin, we know that this tool, which I’ll call <code class="docutils literal notranslate"><span class="pre">t</span></code>, must be given a script to analyze, just as interpreters, debuggers, and static analysis tools require. I’ll use <code class="docutils literal notranslate"><span class="pre">p</span></code> in referring to this script.</p>
<p>Is knowing the statements in <code class="docutils literal notranslate"><span class="pre">p</span></code> enough for <code class="docutils literal notranslate"><span class="pre">t</span></code> to do its work? We can find syntax errors without any additional information, since such errors arise solely from the structure of our code. But what about runtime errors? The Python interpreter tells us about such bugs while <code class="docutils literal notranslate"><span class="pre">p</span></code> runs, and so let’s optionally provide <code class="docutils literal notranslate"><span class="pre">t</span></code> with an example input for <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p>
<p>OK, but to write <code class="docutils literal notranslate"><span class="pre">t</span></code>, we need to be precise about <code class="docutils literal notranslate"><span class="pre">t</span></code>’s expectations for <code class="docutils literal notranslate"><span class="pre">p</span></code> and <code class="docutils literal notranslate"><span class="pre">p</span></code>’s optional input. Yikes, there are lots of programs out in the world (e.g., web browsers, apps on our smartphones, and the scripts we’ve written), lots of different kinds of inputs to these programs (e.g., integers, webpages, and image files), and no consistency in how many input values programs take. While this initially feels overwhelming, we can perform an incredibly wide range of analyses from a very simple encoding of <code class="docutils literal notranslate"><span class="pre">p</span></code> and its inputs: We’ll take both as strings. Even more reassuring is the fact that this simplicity of encoding won’t limit the claims we’ll make about programs in general.</p>
<p>So what needs to be in the string that represents <code class="docutils literal notranslate"><span class="pre">p</span></code>? It turns out that it’s sufficient to include two things: (1) the program’s source code, just as we typed it; and (2) the point where execution begins in this code. For example, if an analysis tool asks whether <code class="docutils literal notranslate"><span class="pre">p</span></code>’s execution ever reaches a particular point in the source code, it first needs to know where execution begins.<a class="footnote-reference brackets" href="#fn2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> After that, the current statement determines which statement(s) will execute next. This is exactly what you do when you think about the execution flow in your own scripts.</p>
<p>To further simplify the notation and examples in this chapter, and without any loss of generality, I’ll encapsulate the program statements we want to analyze inside a function <code class="docutils literal notranslate"><span class="pre">f</span></code>. To start <code class="docutils literal notranslate"><span class="pre">p</span></code>, we call <code class="docutils literal notranslate"><span class="pre">f</span></code>. To make this concrete, think about the design pattern we’ve been using at the end of our Python scripts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">2</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>All we are saying is that <code class="docutils literal notranslate"><span class="pre">f</span></code> is this function <code class="docutils literal notranslate"><span class="pre">main</span></code>, possibly taking some input parameters.</p>
<p>Encoding a program’s inputs as strings is even less complicated. Recall from earlier chapters that we can convert any Python object into and back out of a string representation—for example, lists and dictionaries using <code class="docutils literal notranslate"><span class="pre">json</span></code> ( Chapter 4), integers using <code class="docutils literal notranslate"><span class="pre">str</span></code> and <code class="docutils literal notranslate"><span class="pre">int</span></code> (Chapter 5), and our own <code class="docutils literal notranslate"><span class="pre">CitySqGrid</span></code> objects (Chapter 11). Think of our super tool <code class="docutils literal notranslate"><span class="pre">t</span></code> as requiring that input objects are converted into strings prior to its invocation.</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">t</span></code> can be made to work with whatever number of inputs <code class="docutils literal notranslate"><span class="pre">f</span></code> requires. I’ll demonstrate tools that analyze functions requiring either zero, one, or two input parameters. Because of the work you did in ALE 8.2, step 6, you know how to convert code that takes a specific number of inputs into one where the number of inputs is known only when the tool is invoked.</p>
<p>Fantastic. We almost have a complete specification for our problem-to-be-solved: Write a tool <code class="docutils literal notranslate"><span class="pre">t</span></code>, which itself we’ll encapsulate in a function, that takes a function <code class="docutils literal notranslate"><span class="pre">f</span></code> we want analyzed and one or more optional strings as its input parameters. The declaration might look something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#   +-- analysis function</span>
<span class="c1">#   |</span>
<span class="c1">#   V</span>
<span class="k">def</span> <span class="nf">t</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">s2</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="c1">#     ^  ^</span>
<span class="c1">#     |  |</span>
<span class="c1">#     |  +- optional inputs for f </span>
<span class="c1">#     +- analyzed function </span>
</pre></div>
</div>
<p>Finally, when we call <code class="docutils literal notranslate"><span class="pre">t</span></code>, what do we want its behavior to be? I’m sure that you would love <code class="docutils literal notranslate"><span class="pre">t</span></code> to find all bugs in <code class="docutils literal notranslate"><span class="pre">f</span></code> when run on <code class="docutils literal notranslate"><span class="pre">s</span></code><a class="footnote-reference brackets" href="#fn3" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> and maybe even return a corrected version of <code class="docutils literal notranslate"><span class="pre">f</span></code>, but that’s not what the Python interpreter does for syntax and runtime errors. Once it gets confused, it stops and tells us about its current issue. We’re expected to fix that issue and then run the interpreter on our modified script to find the next bug.</p>
<p>In using <code class="docutils literal notranslate"><span class="pre">t</span></code>, we will follow this same incremental approach. However, <code class="docutils literal notranslate"><span class="pre">t</span></code> will say nothing about the error it finds, which is how you might have felt about some of the Python interpreter’s error messages. Instead, <code class="docutils literal notranslate"><span class="pre">t</span></code> will return either <code class="docutils literal notranslate"><span class="pre">Yes</span></code> (meaning that there’s a bug in <code class="docutils literal notranslate"><span class="pre">f</span></code> when run on <code class="docutils literal notranslate"><span class="pre">s</span></code>) or <code class="docutils literal notranslate"><span class="pre">No</span></code> (meaning that there are no bugs in <code class="docutils literal notranslate"><span class="pre">f</span></code> when run on <code class="docutils literal notranslate"><span class="pre">s</span></code>).</p>
<p>With this complete specification for <code class="docutils literal notranslate"><span class="pre">t</span></code>, let’s rename it <code class="docutils literal notranslate"><span class="pre">found_bug</span></code> (evocative of its behavior) and assume that we can import it whenever we need it from a module of the same name. The following code block illustrates the behavior we desire:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># NOT EXECUTABLE, since we haven&#39;t written `found_bug`!</span>
<span class="linenos">2</span><span class="kn">from</span> <span class="nn">found_bug</span> <span class="kn">import</span> <span class="n">found_bug</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="c1"># Let our tool do its work!</span>
<span class="linenos">5</span><span class="k">if</span> <span class="n">found_bug</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span><span class="p">:</span>
<span class="linenos">6</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sorry, but function f has a bug on input s.&#39;</span><span class="p">)</span>
<span class="linenos">7</span><span class="k">else</span><span class="p">:</span>
<span class="linenos">8</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Good work, no bugs!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="decision-problems">
<p><strong>Decision problems.</strong> Problem specifications for programs that take input and output only <code class="docutils literal notranslate"><span class="pre">Yes</span></code> or <code class="docutils literal notranslate"><span class="pre">No</span></code> have a special name in computer science: They are called <em>decision problems</em>. Our problem-to-be-solved is a decision problem, although it won’t be the only decision program we’ll consider in this chapter. In fact, you almost built many such programs in earlier chapters. Here are two.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">### chap14/read_story.py</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">def</span> <span class="nf">read_story</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos">4</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Is the story s short enough to read?&#39;&#39;&#39;</span>
<span class="linenos">5</span>    <span class="n">lines</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">6</span>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
<span class="linenos">7</span>        <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span>
<span class="linenos">8</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">9</span>        <span class="k">return</span> <span class="s2">&quot;No&quot;</span>
</pre></div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">read_story</span></code> recognizes that the question asked in ALE 1.2 (i.e., is the story my children picked out short enough to read before bed?) is a decision problem.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">### chap14/contains_dquote.py</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">def</span> <span class="nf">contains_dquote</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos">4</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;Does s contain a double quote character?&#39;&#39;&#39;</span>
<span class="linenos">5</span>    <span class="k">if</span> <span class="s1">&#39;&quot;&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="linenos">6</span>        <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span>
<span class="linenos">7</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">8</span>        <span class="k">return</span> <span class="s2">&quot;No&quot;</span>
</pre></div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">contains_dquote</span></code> handles an important question we asked in our script from Chapter 2 that pulled dialogue from a story. It, too, is a decision problem.</p>
</section>
<section id="uncomputable-problems">
<p><strong>Uncomputable problems.</strong> I’m emphasizing decision problems because they’ll play an important role in proving that we can’t write <code class="docutils literal notranslate"><span class="pre">found_bug</span></code>. Whoa, you might say. And I’ll say, “Yes.” This is the first problem that will defeat us, and it’s not because we’re not smart enough. It’s because Alan Turing proved in 1936 that no one could write an algorithm to solve it. No algorithm means no solution. Finding all bugs in all scripts is an example of an <em>uncomputable</em> problem. I’m sorry that we can’t deliver our super tool.</p>
<p>You might also hear theoretical computer scientists call this category of problems <em>undecidable</em>. That’s because, most simply, they like to use the terms compute, decide, and solve interchangeably. Another, more technical reason is that they often prove that a problem <em>P</em> is uncomputable using a technique called <em>reduction</em>, which is a fancy term for showing the solution to <em>P</em> depends upon the solution to some other problem (call it <em>D</em>). If a decision problem <em>D</em> has been proven to be undecidable and you can show that a solution to <em>D</em> is required in a solution to <em>P</em>, then <em>P</em> is undecidable, too.</p>
<p>While I’m mentioning types of problems, now’s a good time to say that we’ve been writing what are called solutions to <em>tractable</em> problems, which means we know of algorithms that can solve these problems <em>efficiently</em> (i.e., producing an answer takes a reasonable amount of time and other computational resources). Web search, which we discussed in Act II, is an example of a nontrivial but tractable problem.</p>
<p>There are also <em>intractable</em> problems, which means that we know of algorithms to solve the problem, but they all take inordinate amounts of time (or other computational resources) for any reasonably large input. Interestingly, computer scientists have found ways to make some intractable problems useful. The reason that you can routinely and securely communicate with your bank over the Internet is because of an intractable problem. In particular, decrypting an encrypted message is tractable when you know the secret key, but it is an intractable problem (as far as we know) to computationally find the key given only the encrypted message. Your bank transactions are secure from any computational adversary.</p>
<p>Returning to our uncomputable problem-to-be-solved, I’ll shortly sketch the argument that is a proof by contradiction, which is a technique common in logic, mathematics, and everyday life. Such proofs typically proceed by assuming some statement is true (e.g., “I’ve already walked my dog” or “an algorithm exists that finds all bugs in all scripts”) and then identifying consequences that flow from this assumption. If we can find a consequence that we know cannot be true, then we’ve found a contradiction in our reasoning. This falsity then flows all the way back (assuming you made no mistakes in your logic) to your initial assumption, which you can now safely say is false.</p>
<p>But before we jump into this argument, let’s warm-up with a bit of program analysis that asks a decidable bug-finding question. This work will provide an important foundation for the next two chapters and illustrate that all is not lost in building tools that help us to uncover, understand, and ultimately fix the errors in our scripts.</p>
</section>
<section id="an-analysis-that-finds-a-bug">
<p><strong>An analysis that finds a bug.</strong> <em>Program analysis</em> is a big topic in computer science. There are simple analyses and quite complicated ones. We’re going to write a fairly simple analysis that looks for a specific kind of error related to string literals. I’ve picked this example because it will remind you of the script we wrote in Chapter 2—the one that grabbed all the pieces of dialogue from a book (stored as a text file) and printed that dialogue as a rough sketch of a theatrical script. That script, which we called <code class="docutils literal notranslate"><span class="pre">script32.py</span></code>, processed its input looking for pairs of double-quote characters. We can use its structure to write a new script that finds <em>unpaired</em> double quotes in a Python script (i.e., instances where we find the opening double-quote character of a string literal but not its matching closing double quote).</p>
<p>Recall that, in writing <code class="docutils literal notranslate"><span class="pre">script32.py</span></code>, we realized that the input text could be split by the double-quote character into an alternating list of narratives and dialogues. If a double-quote character only appeared in Python scripts as a delimiter around string literals, then we could reuse our old script, stripping out the parts that captured the dialogue since we are only interested in the error condition (i.e., an unmatched double-quote character). The function <code class="docutils literal notranslate"><span class="pre">string_bug</span></code>, in the code block below, does this work.<a class="footnote-reference brackets" href="#fn4" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">11</span><span class="c1">### chap14/string_bug.py</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="k">def</span> <span class="nf">string_bug</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="linenos">14</span>    <span class="c1"># Create a worklist of the form: non-string, string, ...</span>
<span class="linenos">15</span>    <span class="n">work_list</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
<span class="linenos">16</span>    <span class="n">items</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">work_list</span><span class="p">)</span>
<span class="linenos">17</span>    
<span class="linenos">18</span>    <span class="c1"># Handle the case of a function f that doesn&#39;t</span>
<span class="linenos">19</span>    <span class="c1"># contain any string literals</span>
<span class="linenos">20</span>    <span class="k">if</span> <span class="n">items</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">21</span>        <span class="c1"># No double-quote string literals in f</span>
<span class="linenos">22</span>        <span class="k">return</span> <span class="s2">&quot;No&quot;</span>
<span class="linenos">23</span>    
<span class="linenos">24</span>    <span class="c1"># Process just the strings in the worklist. String literals</span>
<span class="linenos">25</span>    <span class="c1"># defined using a single double-quote character cannot</span>
<span class="linenos">26</span>    <span class="c1"># contain a newline character.</span>
<span class="linenos">27</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<span class="linenos">28</span>        <span class="k">if</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">work_list</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
<span class="linenos">29</span>            <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span> 
<span class="linenos">30</span>    
<span class="linenos">31</span>    <span class="c1"># Make sure the last string ended with a double quote, which</span>
<span class="linenos">32</span>    <span class="c1"># means the length of work_list should be odd.</span>
<span class="linenos">33</span>    <span class="k">if</span> <span class="n">items</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">34</span>        <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span>
<span class="linenos">35</span>    
<span class="linenos">36</span>    <span class="k">return</span> <span class="s2">&quot;No&quot;</span>
</pre></div>
</div>
<p>Unfortunately, unlike literary stories, it is common to use double-quote characters in Python scripts for more than just indicating pieces of dialogue. For instance, Chapter 2’s <code class="docutils literal notranslate"><span class="pre">script32.py</span></code> included the line <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">=</span> <span class="pre">the_line.find('&quot;')</span></code>, which is how we expressed that the script should search for a double-quote character in <code class="docutils literal notranslate"><span class="pre">the_line</span></code>. Double quotes might also legally appear unpaired in a Python comment, and they’re used in delimiting multiline string literals. While we could add code to <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> to handle these three cases, we don’t need to be that complete in this quick exercise. We’re just trying to get a feel for program analysis on some function <code class="docutils literal notranslate"><span class="pre">f</span></code>. So, let’s specify that we won’t analyze any <code class="docutils literal notranslate"><span class="pre">f</span></code> with <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> that includes double quotes for anything other than delimiting a string literal.</p>
</section>
<section id="running-our-simple-analysis">
<p><strong>Running our simple analysis.</strong> Let’s now create a function for <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> to analyze. We’ll start small and use a variant of “Hello world” nestled in a function called <code class="docutils literal notranslate"><span class="pre">hello</span></code>. Since there’s no syntax error in this function, and so let’s also create a copy that removes the second double-quote character, which I’ll call <code class="docutils literal notranslate"><span class="pre">hellu</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">2</span><span class="c1">### chap14/hello.py</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos">5</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">### chap14/hellu.py</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">def</span> <span class="nf">hellu</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos">4</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, s)</span>
</pre></div>
</div>
<p>We run <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> by passing the functions <code class="docutils literal notranslate"><span class="pre">hello</span></code> and <code class="docutils literal notranslate"><span class="pre">hellu</span></code> as strings containing their source statements. But how do we get those strings? <code class="docutils literal notranslate"><span class="pre">hello</span></code> and <code class="docutils literal notranslate"><span class="pre">hellu</span></code> are names of function objects, not strings.</p>
<p>The next code block extends <code class="docutils literal notranslate"><span class="pre">hello.py</span></code> to illustrate two different ways that we could create the string we need. On lines 7−9, I define a string variable named <code class="docutils literal notranslate"><span class="pre">hello_str</span></code>, to which I assign a string literal that is just a copy of lines 4−5. Yes, I highlighted lines 4−5, hit copy, and then pasted this text between a pair of three single quotes. If you’re thinking: “Two copies! That’s error prone,” then bravo. A better solution is to use the <code class="docutils literal notranslate"><span class="pre">getsource</span></code> function in the Python <code class="docutils literal notranslate"><span class="pre">inspect</span></code> module, which returns the text of an object’s source code as a string (see line 11). With <code class="docutils literal notranslate"><span class="pre">getsource</span></code>, when I change lines 4−5, that change will be reflected in the string returned on line 11.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap14/hello.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">inspect</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">hello_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;def hello(s):</span>
<span class="linenos"> 8</span><span class="s1">    print(&quot;Hello&quot;, s)</span>
<span class="linenos"> 9</span><span class="s1">&#39;&#39;&#39;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="n">hello_src</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">hello</span><span class="p">)</span>
</pre></div>
</div>
<p>We could define a variable like <code class="docutils literal notranslate"><span class="pre">hello_src</span></code> for every function we wish to analyze, but again, that seems like unnecessarily repetitive work. Instead, let’s build a script that automates the work we’ll repeatedly do. Yes, this act is all about building tools that help us work more efficiently!</p>
</section>
<section id="a-tool-for-running-analyses">
<p><strong>A tool for running analyses.</strong> We just learned how to go from a function object to a string containing the Python statements that define it. It’s also helpful in building tools to know how to go from a string containing the name of a Python function to that function’s object. Python makes this easy using <code class="docutils literal notranslate"><span class="pre">import_module</span></code> from the <code class="docutils literal notranslate"><span class="pre">importlib</span></code> library, which allows you to import a module whose name you know only at runtime, and the built-in function <code class="docutils literal notranslate"><span class="pre">getattr</span></code>, which grabs an object in a namespace. It’s easiest to understand these two utilities in the context of what we want to do.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">importlib</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">analysis_name</span> <span class="o">=</span> <span class="s1">&#39;string_bug&#39;</span>
<span class="linenos">4</span><span class="n">analysis_mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">analysis_name</span><span class="p">)</span>
<span class="linenos">5</span><span class="n">analysis_fun</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">analysis_mod</span><span class="p">,</span> <span class="n">analysis_name</span><span class="p">)</span>
</pre></div>
</div>
<p>The small code block above defines the string <code class="docutils literal notranslate"><span class="pre">analysis_name</span></code> with the name of the analysis function we just wrote. To get the function object for this name from its module, we first call <code class="docutils literal notranslate"><span class="pre">import_module</span></code> with the name of the module containing the function, which in this case happens to be the same as the function’s name. This call returns a module object (i.e., <code class="docutils literal notranslate"><span class="pre">analysis_mod</span></code>), and we use <code class="docutils literal notranslate"><span class="pre">getattr</span></code> to grab the attribute named <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> (the second parameter in the <code class="docutils literal notranslate"><span class="pre">getattr</span></code> call) from this module object. The returned result is the function object for <code class="docutils literal notranslate"><span class="pre">string_bug</span></code>.</p>
<p>Combining this new knowledge with our knowledge of how to get the source code corresponding to a function object, we can write a helper routine for grabbing the source code for a function whose name we know only at runtime. Focus your attention on lines 11−13 and 17 in <code class="docutils literal notranslate"><span class="pre">grab_f</span></code>; I’ll explain why I wrapped lines 11−13 in a try-except-statement in a moment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap14/our_tools.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">importlib</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">inspect</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">def</span> <span class="nf">grab_f</span><span class="p">(</span><span class="n">fun_name</span><span class="p">):</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;A utility function that returns a string containing the</span>
<span class="linenos"> 7</span><span class="sd">    source code for `fun_name`. Its implementation assumes that</span>
<span class="linenos"> 8</span><span class="sd">    the function `fun_name` is in a Python script of the same</span>
<span class="linenos"> 9</span><span class="sd">    name (i.e., `fun_name.py`).&#39;&#39;&#39;</span>
<span class="linenos">10</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">11</span>        <span class="n">fun_module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">fun_name</span><span class="p">)</span>
<span class="linenos">12</span>        <span class="n">fun_object</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">fun_module</span><span class="p">,</span> <span class="n">fun_name</span><span class="p">)</span>
<span class="linenos">13</span>        <span class="n">fun_src</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">fun_object</span><span class="p">)</span>
<span class="linenos">14</span>    <span class="k">except</span> <span class="ne">SyntaxError</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="c1"># Use the helper function instead</span>
<span class="linenos">16</span>        <span class="n">fun_src</span> <span class="o">=</span> <span class="n">grab_f_with_error</span><span class="p">(</span><span class="n">fun_name</span><span class="p">)</span>
<span class="linenos">17</span>    <span class="k">return</span> <span class="n">fun_src</span>
</pre></div>
</div>
<p>We’re now ready to build a tool that allows us to run any analysis (e.g., <code class="docutils literal notranslate"><span class="pre">string_bug</span></code>) on any function (e.g., <code class="docutils literal notranslate"><span class="pre">hello</span></code> or <code class="docutils literal notranslate"><span class="pre">hellu</span></code>). We’ll call this analysis tool <code class="docutils literal notranslate"><span class="pre">analyze</span></code> and place it in <code class="docutils literal notranslate"><span class="pre">analyze.py</span></code>. Because we’ve talked about <code class="docutils literal notranslate"><span class="pre">found_bug</span></code> taking two parameters and shown <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> taking just one (recall that finding syntax errors doesn’t require an example input), we’ll make <code class="docutils literal notranslate"><span class="pre">analyze</span></code> smart enough to handle either case. You should understand everything in the next code block.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap14/analyze.py</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">importlib</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">our_tools</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span><span class="n">analysis_name</span><span class="p">,</span> <span class="n">fun_name</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="c1"># Grab the analysis function from its module. This code assumes that the</span>
<span class="linenos"> 8</span>    <span class="c1"># `analysis_name` is in `analysis_name.py`.</span>
<span class="linenos"> 9</span>    <span class="n">analysis_mod</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">analysis_name</span><span class="p">)</span>
<span class="linenos">10</span>    <span class="n">analysis_fun</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">analysis_mod</span><span class="p">,</span> <span class="n">analysis_name</span><span class="p">)</span>
<span class="linenos">11</span>    
<span class="linenos">12</span>    <span class="c1"># Grab function to analyze. The utility used assumes that</span>
<span class="linenos">13</span>    <span class="c1"># the function `fun_name` is in `fun_name.py`.</span>
<span class="linenos">14</span>    <span class="n">f</span> <span class="o">=</span> <span class="n">our_tools</span><span class="o">.</span><span class="n">grab_f</span><span class="p">(</span><span class="n">fun_name</span><span class="p">)</span>
<span class="linenos">15</span>    
<span class="linenos">16</span>    <span class="c1"># Do the analysis</span>
<span class="linenos">17</span>    <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">18</span>        <span class="n">ans</span> <span class="o">=</span> <span class="n">analysis_fun</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="linenos">19</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">20</span>        <span class="n">ans</span> <span class="o">=</span> <span class="n">analysis_fun</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span>
</pre></div>
</div>
<p>You can either call the function <code class="docutils literal notranslate"><span class="pre">analyze</span></code> from a script or run <code class="docutils literal notranslate"><span class="pre">analyze.py</span></code> in the shell (i.e., I configured <code class="docutils literal notranslate"><span class="pre">main</span></code> in <code class="docutils literal notranslate"><span class="pre">analyze.py</span></code> to call the function <code class="docutils literal notranslate"><span class="pre">analyze</span></code> with the parameters specified on the command line). I illustrate this second option in the transcript below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">chap14$ python3 analyze.py string_bug hello
</span>no
</pre></div>
</div>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Try analyzing the function <code class="docutils literal notranslate"><span class="pre">hello</span></code> using the analysis routine <code class="docutils literal notranslate"><span class="pre">string_bug</span></code>, as shown in the above code block. It should report that there are no mismatched double-quote characters in this function, which is what we expect.</p>
</div>
</section>
<section id="grabbing-a-function-with-a-syntax-error">
<p><strong>Grabbing a function with a syntax error.</strong> What do you expect to happen if you run this tool (<code class="docutils literal notranslate"><span class="pre">analyze.py</span></code>) with the same analysis function (<code class="docutils literal notranslate"><span class="pre">string_bug</span></code>) on the function <code class="docutils literal notranslate"><span class="pre">hellu</span></code>, which we saw earlier contains mismatched double quotes? The tool should print <code class="docutils literal notranslate"><span class="pre">Yes</span></code> because <code class="docutils literal notranslate"><span class="pre">hellu</span></code> contains the type of syntax error that <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> finds.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Try analyzing the function <code class="docutils literal notranslate"><span class="pre">hellu</span></code> using the analysis routine <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> and then verify that it reports that there is a bug in the analyzed function.</p>
</div>
<p>Our tool <code class="docutils literal notranslate"><span class="pre">analyze.py</span></code> worked, but it wasn’t because <code class="docutils literal notranslate"><span class="pre">inspect.getsource</span></code> did its work for us. To see this, put a debugging print-statement into the function <code class="docutils literal notranslate"><span class="pre">grab_f</span></code> between lines 12 and 13, and run the tool again. You’ll notice that this print never executes. Why is this?</p>
<p>It’s because <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> won’t complete when the imported function contains a syntax error. We’re basically invoking the Python interpreter to read the definition of this function, and we know that the interpreter doesn’t like syntax errors. As soon as it encounters a syntax error, the interpreter throws a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> exception.</p>
<p>This is a problem for us because we want our analysis routine to find the syntax error, not the Python interpreter. Now you see the reason for the try-except-statement in <code class="docutils literal notranslate"><span class="pre">grab_f</span></code>. It catches the <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> exception and calls <code class="docutils literal notranslate"><span class="pre">grab_f_with_error</span></code>, which you can review in <code class="docutils literal notranslate"><span class="pre">our_tools.py</span></code>. This helper function grabs the source code of <code class="docutils literal notranslate"><span class="pre">fun_name</span></code> by opening its file the old-fashioned way (i.e., the way we learned in Chapter 1) and scanning through the file lines until it discovers the definition of the function.<a class="footnote-reference brackets" href="#fn5" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p>
</section>
<section id="analyzing-other-functions">
<p><strong>Analyzing other functions.</strong> You now have a tool (<code class="docutils literal notranslate"><span class="pre">analyze.py</span></code>) with which you can run many different analysis functions on many different functions and their example inputs. Let’s try several.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<ul class="simple">
<li><p>Check for mismatched double quotes in <code class="docutils literal notranslate"><span class="pre">read_story</span></code> by running <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">string_bug</span> <span class="pre">read_story</span></code>. Do you agree with the response?</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">read_story</span></code> as your analysis routine by running <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">read_story</span> <span class="pre">hello</span></code>. Then replace <code class="docutils literal notranslate"><span class="pre">hello</span></code> with <code class="docutils literal notranslate"><span class="pre">hellu</span></code> and run the analysis again. Finally, replace <code class="docutils literal notranslate"><span class="pre">hellu</span></code> with <code class="docutils literal notranslate"><span class="pre">string_bug</span></code>, which flips the two parameters in the previous bullet. Do the responses <code class="docutils literal notranslate"><span class="pre">Yes</span></code>, <code class="docutils literal notranslate"><span class="pre">Yes</span></code>, and <code class="docutils literal notranslate"><span class="pre">No</span></code> make sense? This demonstrates that we can use any decision program that takes one or two input parameters as our analysis function. We just must know what question an analysis function asks and answers.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">read_story</span> <span class="pre">read_story</span></code>. Our tool even permits us to have an analysis function analyze itself. We’ll take advantage of this capability in a bit.</p></li>
<li><p>Finally, run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">string_bug</span> <span class="pre">string_bug</span></code> and consider its response.</p></li>
</ul>
</div>
<p>Whether the response you got from the last bullet’s run was <code class="docutils literal notranslate"><span class="pre">Yes</span></code> or <code class="docutils literal notranslate"><span class="pre">No</span></code> depends on whether the first non-comment statement in <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> assigned <code class="docutils literal notranslate"><span class="pre">f.split('&quot;')</span></code> or <code class="docutils literal notranslate"><span class="pre">f.split(DQC)</span></code> to <code class="docutils literal notranslate"><span class="pre">work_list</span></code>. Since <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> isn’t programmed to ignore a single double-quote character in a string literal, the source code of <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> listed earlier in this chapter returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code> when analyzing its own source code. The <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> function you’ll find in the book’s GitHub repository, on the other hand, replaces this “offending” string literal with a global variable, causing the analysis to report <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p>
</section>
<section id="using-the-input">
<p><strong>Using the input.</strong> We talked about providing our analysis functions with an example input <code class="docutils literal notranslate"><span class="pre">s</span></code>, but we haven’t used it in any of our examples. Let’s change that now.</p>
<p>We’ll begin with an analysis function that takes an <code class="docutils literal notranslate"><span class="pre">f</span></code> and an <code class="docutils literal notranslate"><span class="pre">s</span></code> but performs no analysis; it ignores its two inputs and always returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">### chap14/yes.py</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">def</span> <span class="nf">yes</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="linenos">4</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;An analysis function that does no analysis</span>
<span class="linenos">5</span><span class="sd">    and always returns yes.&#39;&#39;&#39;</span>
<span class="linenos">6</span>    <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span>
</pre></div>
</div>
<p>Try using it to analyze the function <code class="docutils literal notranslate"><span class="pre">hello.</span></code><a class="footnote-reference brackets" href="#fn6" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes</span> <span class="pre">hello</span> <span class="pre">world</span></code></p>
<p>Feel free to replace <code class="docutils literal notranslate"><span class="pre">hello</span></code> with any other of our functions that take a single string input and try running it. It also doesn’t matter what you use in place of <code class="docutils literal notranslate"><span class="pre">world</span></code>, since <code class="docutils literal notranslate"><span class="pre">yes</span></code> ignores both input parameters.</p>
<p>These experiments are not all that interesting, so let’s modify <code class="docutils literal notranslate"><span class="pre">yes</span></code> to do something with <code class="docutils literal notranslate"><span class="pre">f</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span></code>, which we’ll call <code class="docutils literal notranslate"><span class="pre">yep</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">def</span> <span class="nf">yep</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;A null analysis function with a backdoor to</span>
<span class="linenos"> 3</span><span class="sd">    some special functionality. Always returns Yes.&#39;&#39;&#39;</span>
<span class="linenos"> 4</span>    <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s1">&#39;beVerbose&#39;</span><span class="p">:</span>
<span class="linenos"> 5</span>        <span class="c1"># Print the inputs</span>
<span class="linenos"> 6</span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*** f ***&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>        <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*** s ***&#39;</span><span class="p">)</span>
<span class="linenos"> 9</span>        <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">10</span>    
<span class="linenos">11</span>    <span class="c1"># Default answer</span>
<span class="linenos">12</span>    <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span>
</pre></div>
</div>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yep</span> <span class="pre">hello</span> <span class="pre">world</span></code> and then rerun this command replacing <code class="docutils literal notranslate"><span class="pre">world</span></code> with <code class="docutils literal notranslate"><span class="pre">beVerbose</span></code>.</p>
</div>
<p>Like <code class="docutils literal notranslate"><span class="pre">yes</span></code>, <code class="docutils literal notranslate"><span class="pre">yep</span></code> always returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code>, but it checks the value of its input parameter <code class="docutils literal notranslate"><span class="pre">s</span></code> and does something on a particular value of <code class="docutils literal notranslate"><span class="pre">s</span></code>. This simple function illustrates a key point to keep in mind: While <code class="docutils literal notranslate"><span class="pre">s</span></code> is an example of an input string to <code class="docutils literal notranslate"><span class="pre">f</span></code>, it is not fed directly to <code class="docutils literal notranslate"><span class="pre">f</span></code> but is instead used by the analysis function. Ideally, the analysis <code class="docutils literal notranslate"><span class="pre">yep</span></code> would use the value of <code class="docutils literal notranslate"><span class="pre">s</span></code> in reasoning about <code class="docutils literal notranslate"><span class="pre">f</span></code>, but in this implementation, it prints the values of <code class="docutils literal notranslate"><span class="pre">f</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span></code> before returning <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. These print-statements technically keep <code class="docutils literal notranslate"><span class="pre">yep</span></code> from being a decision program. Let’s fix that.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap14/yex.py</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">def</span> <span class="nf">yex</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="sd">&#39;&#39;&#39;A null analysis function with a runtime error</span>
<span class="linenos"> 5</span><span class="sd">    in its backdoor. Meant to always return Yes.&#39;&#39;&#39;</span>
<span class="linenos"> 6</span>    <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="s1">&#39;beQuick&#39;</span><span class="p">:</span>
<span class="linenos"> 7</span>        <span class="c1"># Waste some time so it looks like we&#39;re</span>
<span class="linenos"> 8</span>        <span class="c1"># doing some analysis.</span>
<span class="linenos"> 9</span>        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">10</span>        <span class="k">while</span> <span class="n">cnt</span> <span class="o">&lt;</span> <span class="mi">1000000</span><span class="p">:</span>
<span class="linenos">11</span>            <span class="n">cnt</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="linenos">12</span>    
<span class="linenos">13</span>    <span class="c1"># Default answer</span>
<span class="linenos">14</span>    <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span>
</pre></div>
</div>
<p>This version (called <code class="docutils literal notranslate"><span class="pre">yex</span></code>) replaces the print-statements in <code class="docutils literal notranslate"><span class="pre">yep</span></code> with a loop that is meant to make this new analysis function look like it’s working hard to analyze the input function (while all it does is waste time doing a useless calculation).</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yex</span> <span class="pre">hello</span> <span class="pre">world</span></code>. When you get tired of waiting for it to end (it won’t), type Ctrl+C in your shell window or hit the stop button if you’re running in Replit or Google Colab.</p>
</div>
<p>I clearly made a mistake in implementing <code class="docutils literal notranslate"><span class="pre">yex</span></code>; the while-loop in <code class="docutils literal notranslate"><span class="pre">yex</span></code> is an infinite loop. Since <code class="docutils literal notranslate"><span class="pre">cnt</span></code> starts at <code class="docutils literal notranslate"><span class="pre">0</span></code>, I should have typed <code class="docutils literal notranslate"><span class="pre">+=</span></code> on line 11, but I mistakenly typed <code class="docutils literal notranslate"><span class="pre">-=</span></code>. This is the type of coding error that we don’t notice until we run our function and test it under the right conditions. It’s the kind of error we’d love <code class="docutils literal notranslate"><span class="pre">found_bug</span></code> to identify when we ask it to analyze <code class="docutils literal notranslate"><span class="pre">yex</span></code>.</p>
<div class="tip admonition">
<p class="admonition-title">Terminology</p>
<p>Because <code class="docutils literal notranslate"><span class="pre">yex</span></code> contains an infinite loop that’s not in its specification, we’ll say that the output of <code class="docutils literal notranslate"><span class="pre">yex</span></code> is <em>not defined under this input</em>. It exhibits <em>undefined behavior</em>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A program with an infinite loop doesn’t have to be the result of a design or coding error. This behavior might be in the program’s specification. If you’re on a Unix-based operating system, check out the program called <code class="docutils literal notranslate"><span class="pre">yes</span></code>, whose manual page (i.e., run <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">yes</span></code> at the terminal’s command prompt) says that it will “be repetitively affirmative.” Try running <code class="docutils literal notranslate"><span class="pre">yes</span></code> without a command line parameter and then with your favorite single word. Type Ctrl+C to stop its execution. This program is surprisingly useful.<a class="footnote-reference brackets" href="#fn7" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a></p>
</div>
</section>
<section id="a-non-trivial-decision-problem">
<p><strong>A non-trivial decision problem.</strong> Having seen examples of decision functions and discussed some program analyses, it’s time to tackle a function specification with surprising consequences. This specification describes a function that takes two or three inputs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code>, a string containing a function’s source code;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s</span></code>, a string that is a valid input to <code class="docutils literal notranslate"><span class="pre">f</span></code>; and possibly</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s2</span></code>, an optional string for when <code class="docutils literal notranslate"><span class="pre">f</span></code> takes two string inputs.<a class="footnote-reference brackets" href="#fn8" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a></p></li>
</ul>
<p>While this interface matches the one we defined for <code class="docutils literal notranslate"><span class="pre">found_bug</span></code>, this new function solves a different decision problem. It exhibits the following behavior:<a class="footnote-reference brackets" href="#fn9" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a></p>
<ul class="simple">
<li><p>Return <code class="docutils literal notranslate"><span class="pre">Yes</span></code> when <code class="docutils literal notranslate"><span class="pre">f(s)</span></code> returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code>.</p></li>
<li><p>Return <code class="docutils literal notranslate"><span class="pre">No</span></code> otherwise.</p></li>
</ul>
<p>Clearly this new function should return <code class="docutils literal notranslate"><span class="pre">No</span></code> when <code class="docutils literal notranslate"><span class="pre">f(s)</span></code> returns <code class="docutils literal notranslate"><span class="pre">No</span></code>, but <code class="docutils literal notranslate"><span class="pre">f</span></code> doesn’t have to be a decision function. Our new function should return <code class="docutils literal notranslate"><span class="pre">No</span></code> for all other outcomes of the execution of <code class="docutils literal notranslate"><span class="pre">f</span></code> given <code class="docutils literal notranslate"><span class="pre">s</span></code>, including those that are akin to error checking:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code> contains one or more syntax errors (i.e., it is not a valid Python function).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f(s)</span></code> is undefined (e.g., <code class="docutils literal notranslate"><span class="pre">f</span></code> falls into an infinite loop, throws an exception, prints anything, or returns something other than <code class="docutils literal notranslate"><span class="pre">Yes</span></code> or <code class="docutils literal notranslate"><span class="pre">No</span></code>).</p></li>
</ol>
<p>Let’s call this new function <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>.<a class="footnote-reference brackets" href="#fn10" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a> Its specified behavior seems straightforward, but let’s stress-test our understanding through a few examples. I’ll present them using the command line syntax we used with our <code class="docutils literal notranslate"><span class="pre">analyze</span></code> tool, but remember that you cannot run these command lines as we haven’t written <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>. Also, to avoid having to write out the source code for a function when I want it as an input string (i.e., in the <code class="docutils literal notranslate"><span class="pre">s</span></code> position), I’ll write the function name with the suffix <code class="docutils literal notranslate"><span class="pre">_src</span></code>. For instance, in Example 3 below, I’m passing the source code for <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> as the input to <code class="docutils literal notranslate"><span class="pre">read_story</span></code>.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Work through each of the following examples. Don’t take my word for what will be printed each time. Make sure you can describe what takes place in your own words.</p>
</div>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>                                      +-- analysis function
                                      |
                                      V
<span class="gs">**Example 1:**</span> <span class="sb">`python3 analyze.py yes_on_s hellu world`</span> 
                                             ^     ^
                                             |     |
                                             +- f  +- s 
</pre></div>
</div>
<p>This should print <code class="docutils literal notranslate"><span class="pre">No</span></code>. The function <code class="docutils literal notranslate"><span class="pre">hellu</span></code> is not valid Python since it contains a syntax error.</p>
<p><strong>Example 2:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes_on_s</span> <span class="pre">read_story</span> <span class="pre">world</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. <code class="docutils literal notranslate"><span class="pre">read_story('world')</span></code> returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code> because <code class="docutils literal notranslate"><span class="pre">'world'</span></code> is a one-word, one-line story, which meets the specification of “short enough to read.”</p>
<p><strong>Example 3:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes_on_s</span> <span class="pre">read_story</span> <span class="pre">string_bug_src</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">No</span></code>. The number of lines in <code class="docutils literal notranslate"><span class="pre">string_bug</span></code> is greater than 20, and since <code class="docutils literal notranslate"><span class="pre">read_story</span></code> returns <code class="docutils literal notranslate"><span class="pre">No</span></code>, then <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> would return <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p>
<p><strong>Example 4:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes_on_s</span> <span class="pre">contains_dquote</span> <span class="pre">contains_dquote_src</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. The statements in <code class="docutils literal notranslate"><span class="pre">contains_dquote</span></code> do indeed contain a double-quote character. As I noted in an earlier You-Try-It exercise, it’s possible for a function to read and analyze its own source code.</p>
<p><strong>Example 5:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes_on_s</span> <span class="pre">yep</span> <span class="pre">hello_src</span> <span class="pre">world</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. I’m taking advantage of the fact that <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> can also handle a function <code class="docutils literal notranslate"><span class="pre">f</span></code> that takes two input parameters. Since <code class="docutils literal notranslate"><span class="pre">world</span></code> doesn’t trigger <code class="docutils literal notranslate"><span class="pre">yep</span></code>’s backdoor, it returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code>, and so would <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>.</p>
<p><strong>Example 6:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes_on_s</span> <span class="pre">yep</span> <span class="pre">hello_src</span> <span class="pre">beVerbose</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">No</span></code>. The string input <code class="docutils literal notranslate"><span class="pre">beVerbose</span></code> triggers <code class="docutils literal notranslate"><span class="pre">yep</span></code>’s backdoor and prints stuff, and that action would cause <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> to return <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p>
<p><strong>Example 7:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes_on_s</span> <span class="pre">yex</span> <span class="pre">hello_src</span> <span class="pre">world</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">No</span></code>. Because <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> is analyzing <code class="docutils literal notranslate"><span class="pre">yex</span></code> on the inputs and not actually running it, it would recognize and not get caught in <code class="docutils literal notranslate"><span class="pre">yex</span></code>’s infinite loop.</p>
</section>
<section id="an-indecisive-decision-function">
<p><strong>An indecisive decision function.</strong> In addition to understanding <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> by reasoning about its behavior on different inputs, we can also use <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> to build other functions, even without an implementation. We’ll then reason about the behavior of these new functions given the specification of <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>.</p>
<p>Let’s begin with a function called <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> that takes a single parameter <code class="docutils literal notranslate"><span class="pre">f</span></code> and returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code> when <code class="docutils literal notranslate"><span class="pre">f(f_src)</span></code> returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code> and <code class="docutils literal notranslate"><span class="pre">No</span></code> otherwise. This function’s behavior might be easier to understand when viewed as Python statements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">### chap14/yes_on_self.py</span>
<span class="linenos">2</span><span class="kn">import</span> <span class="nn">our_tools</span>
<span class="linenos">3</span><span class="kn">from</span> <span class="nn">yes_on_s</span> <span class="kn">import</span> <span class="n">yes_on_s</span>   <span class="c1"># pretend it exists</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="k">def</span> <span class="nf">yes_on_self</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="linenos">6</span>    <span class="k">return</span> <span class="n">yes_on_s</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">our_tools</span><span class="o">.</span><span class="n">grab_f</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
</pre></div>
</div>
<p>We can rewrite Example 4 using this new function:</p>
<p><strong>Example 8:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">yes_on_self</span> <span class="pre">contains_dquote</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">Yes</span></code>, since it is equivalent to the command line in Example 4.</p>
<div class="admonition-you-try-it admonition">
<p class="admonition-title">You Try It</p>
<p>Replace <code class="docutils literal notranslate"><span class="pre">contains_dquote</span></code> in Example 8 with <code class="docutils literal notranslate"><span class="pre">read_story</span></code> or <code class="docutils literal notranslate"><span class="pre">string_bug</span></code>. What would these commands return?<a class="footnote-reference brackets" href="#fn11" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a></p>
</div>
<p>When you’re comfortable reasoning about the behavior of <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code>, think about what Example 9 would print.</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>                                      +-- analysis function
                                      |
                                      V
<span class="gs">**Example 9**</span>: <span class="sb">`python3 analyze.py yes_on_self yes_on_self`</span>
                                                   ^
                                                   |
                                                   +- f
</pre></div>
</div>
<p>To help you get started, recall that <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code> when <code class="docutils literal notranslate"><span class="pre">f</span></code> is valid Python and <code class="docutils literal notranslate"><span class="pre">f(s)</span></code> is defined, both of which are true given the code we’ve written for <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> coupled with our assumption that <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> exists. It’s left for us to determine whether the <code class="docutils literal notranslate"><span class="pre">f(s)</span></code> part of <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>’s specification returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code> or <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p>
<p>While we don’t have an implementation for <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>, we know its behavior, and that’s sufficient for us to reason out the answer. As humans, we’re quite good at gaining insight from reflecting on an object’s behavior. Here are the two cases we need to consider:</p>
<p><strong>Case 1:</strong> Assume <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> (in the analysis function position) returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. What does this assumption imply about the value returned by the call to <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> inside <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code>? It must have been <code class="docutils literal notranslate"><span class="pre">Yes</span></code> (i.e., <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> returns whatever <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> returns). Inside the call to <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>, we can ask what <code class="docutils literal notranslate"><span class="pre">f(s)</span></code>, or more precisely <code class="docutils literal notranslate"><span class="pre">yes_on_self(yes_on_self_src)</span></code>, returned. It must have been <code class="docutils literal notranslate"><span class="pre">Yes</span></code> for <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> to return <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. No contradictions in this logic, and that’s good.</p>
<p><strong>Case 2:</strong> Assume <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> (in the analysis function position) returns <code class="docutils literal notranslate"><span class="pre">No</span></code>. Again, what does this assumption imply about the strings returned by <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> and <code class="docutils literal notranslate"><span class="pre">f(s)</span></code>? Both would have been <code class="docutils literal notranslate"><span class="pre">No</span></code>. Oh no.</p>
<p>Our reasoning finds that both <code class="docutils literal notranslate"><span class="pre">Yes</span></code> and <code class="docutils literal notranslate"><span class="pre">No</span></code> are valid outcomes, but the command in Example 9 cannot print both answers. As John MacCormick says in his text, if you find this indecision mysterious, you are not alone.<a class="footnote-reference brackets" href="#fn12" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></a></p>
</section>
<section id="insight-from-indecision">
<p><strong>Insight from indecision.</strong> As we saw with the Unix program <code class="docutils literal notranslate"><span class="pre">yes</span></code> (which contains an infinite loop) and when talking about intractable problems, we can sometimes turn a program with an undesirable behavior into a useful tool. Let’s do that with the core of <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code>. Let’s define a new function called <code class="docutils literal notranslate"><span class="pre">trouble</span></code> that makes the same call to <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> as <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> did but flips the response before returning it. Again, this behavior might be easier to understand when viewed as Python statements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">### chap14/trouble.py</span>
<span class="linenos">2</span><span class="kn">import</span> <span class="nn">our_tools</span>
<span class="linenos">3</span><span class="kn">from</span> <span class="nn">yes_on_s</span> <span class="kn">import</span> <span class="n">yes_on_s</span>   <span class="c1"># pretend it exists</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="k">def</span> <span class="nf">trouble</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="linenos">6</span>    <span class="k">if</span> <span class="n">yes_on_s</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">our_tools</span><span class="o">.</span><span class="n">grab_f</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span><span class="p">:</span>
<span class="linenos">7</span>        <span class="k">return</span> <span class="s2">&quot;No&quot;</span>
<span class="linenos">8</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">9</span>        <span class="k">return</span> <span class="s2">&quot;Yes&quot;</span>
</pre></div>
</div>
<p>We can repeat Example 8, replacing <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> with <code class="docutils literal notranslate"><span class="pre">trouble</span></code>, to create Example 10 and then verify that <code class="docutils literal notranslate"><span class="pre">trouble</span></code> works as we expect, at least when we don’t ask it to analyze itself.</p>
<p><strong>Example 10:</strong> <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">analyze.py</span> <span class="pre">trouble</span> <span class="pre">contains_dquote</span></code></p>
<p>This should print <code class="docutils literal notranslate"><span class="pre">No</span></code>, since the source code of <code class="docutils literal notranslate"><span class="pre">contains_dquote</span></code> does include a double-quote character, but <code class="docutils literal notranslate"><span class="pre">trouble</span></code> turns this <code class="docutils literal notranslate"><span class="pre">Yes</span></code> into a <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p>
<p>The implication in this new function’s name arises when we ask it to analyze itself.</p>
<div class="highlight-md notranslate"><div class="highlight"><pre><span></span>                                      +-- analysis function
                                      |
                                      V
<span class="gs">**Example 11:**</span> <span class="sb">`python3 analyze.py trouble trouble`</span>
                                              ^
                                              |
                                              +- f
</pre></div>
</div>
<p>Personally, I always have a hard time clearly articulating what strange question this command asks. But we can reason about the possible answers as we did with <code class="docutils literal notranslate"><span class="pre">yes_on_self</span></code> and see where it leads.</p>
<p><strong>Case 1:</strong> Assume <code class="docutils literal notranslate"><span class="pre">trouble</span></code> (in the analysis function position) returns <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. What does this assumption imply about the value that the call to <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> inside <code class="docutils literal notranslate"><span class="pre">trouble</span></code> returned? It must not have been <code class="docutils literal notranslate"><span class="pre">Yes</span></code> so that the else-clause executed. Inside the call to <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code>, we can ask what <code class="docutils literal notranslate"><span class="pre">f(s)</span></code>, or more precisely <code class="docutils literal notranslate"><span class="pre">trouble(trouble_src)</span></code>, returned. It also must not have been <code class="docutils literal notranslate"><span class="pre">Yes</span></code> for <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> to return a response that wasn’t <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. But this creates a contradiction between this consequence and our original assumption, and we now know that Example 11 does not print <code class="docutils literal notranslate"><span class="pre">Yes</span></code>.</p>
<p><strong>Case 2:</strong> Assume <code class="docutils literal notranslate"><span class="pre">trouble</span></code> (in the analysis function position) returns <code class="docutils literal notranslate"><span class="pre">No</span></code>. Again, what does this assumption imply about the strings returned by <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> and <code class="docutils literal notranslate"><span class="pre">f(s)</span></code>? Both would not have been <code class="docutils literal notranslate"><span class="pre">No</span></code>. Again, a contradiction. Example 11 does not print <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p>
<p>Double trouble. There are only two values that Example 11 can print, and we just proved that neither is possible. The only conclusion left to us is that the function <code class="docutils literal notranslate"><span class="pre">trouble</span></code> cannot exist.</p>
<p>But, you say, <code class="docutils literal notranslate"><span class="pre">trouble</span></code> must exist because we listed its source code in the previous code block. It’s true that that block does contain some Python statements, but the function <code class="docutils literal notranslate"><span class="pre">trouble</span></code> isn’t valid Python. It contains a syntax error because <code class="docutils literal notranslate"><span class="pre">yes_on_s.py</span></code> doesn’t exist. Everything else in <code class="docutils literal notranslate"><span class="pre">trouble</span></code> is valid Python, and so the contradiction we found is really pointing at the function <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> and saying that it cannot exist.</p>
</section>
<section id="specifications-without-implementations">
<p><strong>Specifications without implementations.</strong> Let’s remind ourselves of what we just did. We wrote a specification for a decision problem involving one function analyzing another in which the analysis function would return <code class="docutils literal notranslate"><span class="pre">Yes</span></code> if and only if the analyzed function when executing on the given input would return <code class="docutils literal notranslate"><span class="pre">Yes</span></code>. For any other returned value, or if there was some sort of syntax or runtime error in the analyzed function, the analysis function would return <code class="docutils literal notranslate"><span class="pre">No</span></code>. We then followed a line of reasoning that proved that it was impossible to write code that adhered to the specified behavior. And from this, we learned an important fact about computation: <em>There exist behaviors for which we cannot write a program, in Python or any other programming language.</em> These are uncomputable problems.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Before you try to solve a given problem, check to see if it is known to be uncomputable or intractable. The former will have you toiling forever trying to code a solution. The latter you can code, but it’ll take practically forever for your script to finish executing.</p>
</div>
<p>We used a number of tools, without naming most of them, commonly employed by those who prove theories about programs. If you’re interested in learning more, I encourage you to pick up MacCormick’s <em>What Can Be Computed?</em> (or a similar book). He uses the impossibility of <code class="docutils literal notranslate"><span class="pre">yes_on_s</span></code> to show the following:</p>
<ol class="arabic simple">
<li><p>Other uncomputable problems exist.</p></li>
<li><p>One of those problems is determining whether a Python function <code class="docutils literal notranslate"><span class="pre">f</span></code> running on input <code class="docutils literal notranslate"><span class="pre">s</span></code> is going to throw an exception. And with this result, our dream of writing a program to find all bugs in all our scripts is dashed.</p></li>
</ol>
<p>While it is true that we can’t expect a computational tool to find all our bugs, this doesn’t mean we can’t find lots of specific kinds of bugs in many different kinds of programs. On to the next two chapters to learn how you can more quickly and easily find many important bugs!</p>
<hr class="footnotes docutils" />
<aside class="footnote brackets" id="fn1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>When computer scientists talk about static analyses, they mean analyses that ask questions about a program or how a program will execute without running it. Runtime debugging involves asking questions about a program’s state while it executes. All the functions in this chapter perform static analysis.</p>
</aside>
<aside class="footnote brackets" id="fn2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>The programs we’ve written and those we’ll discuss in this chapter have a single program point where execution begins (e.g., the first line in a Python script or the function `main` in other programming languages), or they can be easily converted into such a program.</p>
</aside>
<aside class="footnote brackets" id="fn3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Unless it’s important to the context, I’ll simplify my explanations and talk about analyzing a function `f` that takes a single input `s`.</p>
</aside>
<aside class="footnote brackets" id="fn4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>Notice that `string_bug` treats its work as a decision problem. It returns `Yes` if it finds an instance of an unmatched double-quote character and `No` otherwise. Also, because it finds a syntax error, it takes only the text of the input function `f`. It doesn’t need an example input.</p>
</aside>
<aside class="footnote brackets" id="fn5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">5</a><span class="fn-bracket">]</span></span>
<p>The helper function’s implementation expects the `def fun_name:` source code line to be unindented. This shortcoming is sufficient for our work in this chapter.</p>
</aside>
<aside class="footnote brackets" id="fn6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">6</a><span class="fn-bracket">]</span></span>
<p>Note that `yes` refers to the function `yes`, while `Yes` is the string output of our decision programs (and decision functions).</p>
</aside>
<aside class="footnote brackets" id="fn7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">7</a><span class="fn-bracket">]</span></span>
<p>Wikipedia, “yes (Unix),” accessed April 3, 2025. <a class="reference external" href="https://en.wikipedia.org/wiki/Yes_%28Unix%29">https://en.wikipedia.org/wiki/Yes_(Unix)</a></p>
</aside>
<aside class="footnote brackets" id="fn8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">8</a><span class="fn-bracket">]</span></span>
<p>This optional third argument allows us to work with the full range of decision functions we’ve seen in this chapter.</p>
</aside>
<aside class="footnote brackets" id="fn9" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">9</a><span class="fn-bracket">]</span></span>
<p>For functions `f` that take two string arguments, mentally replace `f(s)` with `f(s,s)`. All the specification asks is that this new function returns `Yes` when `f` returns `Yes` on the input string or strings.</p>
</aside>
<aside class="footnote brackets" id="fn10" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">10</a><span class="fn-bracket">]</span></span>
<p>With the function names and the flow of the argument that follows, I borrow heavily from Chapter 3 of John MacCormick, <em>What Can Be Computed: A Practical Guide to the Theory of Computation</em> (Princeton, NJ: Princeton University Press, 2018). I am grateful for what John’s textbook taught me about making this material accessible to everyone.</p>
</aside>
<aside class="footnote brackets" id="fn11" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">11</a><span class="fn-bracket">]</span></span>
<p>It would print Yes with the first change and No with the second.</p>
</aside>
<aside class="footnote brackets" id="fn12" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id12">12</a><span class="fn-bracket">]</span></span>
<p>MacCormick, <em>What Can Be Computed</em>.</p>
</aside>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="chap13.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 13: Rewrite the Error Message</p>
      </div>
    </a>
    <a class="right-next"
       href="chap15.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 15: Embrace Runtime Debugging</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-all-bugs">Finding all bugs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-problems">Decision problems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uncomputable-problems">Uncomputable problems</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-analysis-that-finds-a-bug">An analysis that finds a bug</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-our-simple-analysis">Running our simple analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-tool-for-running-analyses">A tool for running analyses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#grabbing-a-function-with-a-syntax-error">Grabbing a function with a syntax error</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analyzing-other-functions">Analyzing other functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-input">Using the input</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-non-trivial-decision-problem">A non-trivial decision problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#an-indecisive-decision-function">An indecisive decision function</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insight-from-indecision">Insight from indecision</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifications-without-implementations">Specifications without implementations</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mike Smith
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023 by Michael D. Smith. All rights reserved.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>