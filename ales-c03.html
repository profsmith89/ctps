

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Chapter 3 &#8212; Computational Thinking and Problem Solving</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ales-c03';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Chapter 4" href="ales-c04.html" />
    <link rel="prev" title="Chapter 2" href="ales-c02.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="ctps.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/mike_flat.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/mike_flat.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="ctps.html">
                    <no title>
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap01.html">Chapter 1: Read a Children’s Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap02.html">Chapter 2: Grab the Dialogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap03.html">Chapter 3: Replace Text With Emoji</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap04.html">Chapter 4: Query a Web Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap05.html">Chapter 5: Play Guess-a-number</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap06.html">Chapter 6: Do You See My Dog?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap07.html">Chapter 7: Many But Not Any Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap08.html">Chapter 8: What Is My Problem?</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap09.html">Chapter 9: Find a Phrase</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap10.html">Chapter 10: Build an Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap11.html">Chapter 11: Discover Driving Directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap12.html">Chapter 12: Divide and Conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap13.html">Chapter 13: Rewrite the Error Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap14.html">Chapter 14: The Dream of Bug Fixing</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap15.html">Chapter 15: Embrace Runtime Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap16.html">Chapter 16: Catch Them Early</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap17.html">Chapter 17: Build Prediction Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="chap18.html">Chapter 18: Use Generative AI</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="ales.html">Active-Learning Exercises</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ales-c01.html">Chapter 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c02.html">Chapter 2</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Chapter 3</a></li>








<li class="toctree-l2"><a class="reference internal" href="ales-c04.html">Chapter 4</a></li>





<li class="toctree-l2"><a class="reference internal" href="ales-c05.html">Chapter 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c06.html">Chapter 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c08.html">Chapter 8</a></li>
<li class="toctree-l2"><a class="reference internal" href="ales-c09.html">Chapter 9</a></li>



<li class="toctree-l2"><a class="reference internal" href="ales-c10.html">Chapter 10</a></li>


<li class="toctree-l2"><a class="reference internal" href="ales-c12.html">Chapter 12</a></li>



</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/ales-c03.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 3</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Chapter 3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-1-two-kinds-of-loops">ALE 3.1: Two kinds of loops</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-2-getting-comfortable-with-range">ALE 3.2: Getting comfortable with `range`</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-3-return-with-something">ALE 3.3: Return with something</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-4-visualize-a-function-call">ALE 3.4: Visualize a function call</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-5-two-different-sequences">ALE 3.5: Two different sequences</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-6-what-happens-when">ALE 3.6: What happens when?</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-7-imports-and-the-namespace">ALE 3.7: Imports and the namespace?</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-8-scope-and-the-danger-of-globals">ALE 3.8: Scope and the Danger of Globals</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="chapter-3">
<h1>Chapter 3<a class="headerlink" href="#chapter-3" title="Permalink to this heading">#</a></h1>
</section>
<section id="ale-3-1-two-kinds-of-loops">
<h1>ALE 3.1: Two kinds of loops<a class="headerlink" href="#ale-3-1-two-kinds-of-loops" title="Permalink to this heading">#</a></h1>
<p>Here are a few rules-of-thumb for deciding which type of loop to use:</p>
<ul class="simple">
<li><p>Use while-loops when you want to loop until you hit a some exit condition.</p></li>
<li><p>Use for-loops when you want to iterate over a sequence.</p></li>
</ul>
<p>As a bit of practice, consider what the string-find method looks like behind the scenes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">the_string</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">the_string</span><span class="p">)):</span>
<span class="linenos">3</span>        <span class="k">if</span> <span class="n">the_string</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">pattern</span><span class="p">:</span>
<span class="linenos">4</span>            <span class="k">return</span> <span class="n">i</span>
<span class="linenos">5</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">6</span>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>Let’s try it out, i.e., run the next code block.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">a_string</span> <span class="o">=</span> <span class="s1">&#39;Cosmo the dog&#39;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="c1"># a_string.find(&#39;m&#39;)</span>
<span class="linenos">4</span><span class="n">find</span><span class="p">(</span><span class="n">a_string</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> Look carefully at the function body of <code class="docutils literal notranslate"><span class="pre">find</span></code>. By reading the code, do you understand the purpose of the for-loop? Can you describe the conditions under which it returns?</p>
<p>Yes, you can put an <code class="docutils literal notranslate"><span class="pre">else</span></code> on a for-loop. It means “do the else-block if you exhausted the sequence without hitting an exit condition.”</p>
<p><strong>Step 2.</strong> Complete the last statement in the following code block so that it fails to find a <code class="docutils literal notranslate"><span class="pre">pattern</span></code> of your choosing in <code class="docutils literal notranslate"><span class="pre">a_string</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">a_string</span> <span class="o">=</span> <span class="s1">&#39;Cosmo the dog&#39;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="c1"># a_string.find(...)</span>
<span class="linenos">4</span><span class="n">find</span><span class="p">(</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 3.</strong> Think about the connection between a for-loop and a while-loop. Can you create rewrite the <code class="docutils literal notranslate"><span class="pre">find</span></code> function we’ve been using so that it uses a while-loop instead of a for-loop?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">def</span> <span class="nf">find_w</span><span class="p">(</span><span class="n">the_string</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="c1"># Put your code here</span>
</pre></div>
</div>
<p><strong>Step 4.</strong> Create a code block that tests your <code class="docutils literal notranslate"><span class="pre">find_w</span></code> function.</p>
</section>
<section id="ale-3-2-getting-comfortable-with-range">
<h1>ALE 3.2: Getting comfortable with `range`<a class="headerlink" href="#ale-3-2-getting-comfortable-with-range" title="Permalink to this heading">#</a></h1>
<p>What is that <code class="docutils literal notranslate"><span class="pre">range</span></code> command? We discussed it as a function that produces an integer sequence whose length is its input parameter. Used in a for-loop, the loop can then assign each element of the generated sequence to its loop variable (e.g., variable <code class="docutils literal notranslate"><span class="pre">i</span></code> in the example below) and execute the loop body for each element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="linenos">2</span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>Questions:</p>
<ol class="arabic simple">
<li><p>What is the first number printed? Why is that the default for the first value produced by `range`? What does it make easy? There is a way to specify the starting value of the range produced. Can you figure out how to change the starting value?</p></li>
<li><p>What is the difference between our input value to <code class="docutils literal notranslate"><span class="pre">range</span></code> and the final number printed? Why is this? When you change the starting value, what is the final value printed? What does the single parameter to <code class="docutils literal notranslate"><span class="pre">range</span></code> represent if it isn’t the final value printed?</p></li>
</ol>
<p>Feel free to change the code block above as you answer these questions!</p>
</section>
<section id="ale-3-3-return-with-something">
<h1>ALE 3.3: Return with something<a class="headerlink" href="#ale-3-3-return-with-something" title="Permalink to this heading">#</a></h1>
<p>Python functions always return a value. Whether you explicitly use a return-statement without an expression or end your function without a return statement, the Python interpreter will return the special object <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Execute the following code block, which illustrates the ways we can end a function’s execution.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">def</span> <span class="nf">my_f1</span><span class="p">():</span>
<span class="linenos"> 2</span>    <span class="k">return</span> <span class="kc">None</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">my_f2</span><span class="p">():</span>
<span class="linenos"> 5</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">def</span> <span class="nf">my_f3</span><span class="p">():</span>
<span class="linenos"> 8</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos"> 9</span>    <span class="k">return</span> 
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">def</span> <span class="nf">my_f4</span><span class="p">():</span>
<span class="linenos">12</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">13</span>    <span class="k">return</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="nb">print</span><span class="p">(</span><span class="n">my_f1</span><span class="p">(),</span> <span class="n">my_f2</span><span class="p">(),</span> <span class="n">my_f3</span><span class="p">(),</span> <span class="n">my_f4</span><span class="p">())</span>
</pre></div>
</div>
<p>Make sure you can explain why each function returns the value that was printed.</p>
</section>
<section id="ale-3-4-visualize-a-function-call">
<h1>ALE 3.4: Visualize a function call<a class="headerlink" href="#ale-3-4-visualize-a-function-call" title="Permalink to this heading">#</a></h1>
<p>Understanding the execution of a program with functions can be confusing at first, and sometimes it helps to watch a step-by-step visualization of a script’s execution. We talked through the execution of <code class="docutils literal notranslate"><span class="pre">replace7.py</span></code> in the chapter, and now we’d like you to review this execution with the help of a nifty online tool called <a class="reference external" href="https://pythontutor.com/">Python Tutor</a>.</p>
<p>I’ve used the site to configure a simplified version of our <code class="docutils literal notranslate"><span class="pre">replace7.py</span></code> script. By “simplified” I mean that I ripped out the code that read the text from a file and we greatly reduced the amount of input text. In a moment, you’ll see that this simplified script still requires 324 steps to fully execute. After you start stepping around in this code, you’ll begin to appreciate, even at a mere 324 steps, why we humans are glad to let computers keep track of the work in every step of our scripts. It’s tedious work!</p>
<p><strong>Step 1.</strong> <a class="reference external" href="https://pythontutor.com/visualize.html#code=def%20my_replace%28s,%20old,%20new%29%3A%0A%20%20%20%20i%20%3D%200%20%20%20%20%20%20%20%20%20%20%20%20%23%20tracks%20where%20we%20are%20in%20the%20input%20string%0A%20%20%20%20j%20%3D%20len%28old%29%20%20%20%20%20%23%20skip-ahead%20amount%20for%20index%20calculations%20%0A%20%20%20%20new_s%20%3D%20s%5B0%3A0%5D%20%20%20%23%20the%20new%20string%20we're%20building%20%0A%20%0A%20%20%20%20while%20i%20%3C%20len%28s%29%3A%20%0A%20%20%20%20%20%20%20%20if%20s%5Bi%3Ai%2Bj%5D%20%3D%3D%20old%3A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20new_s%20%3D%20new_s%20%2B%20new%20%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20%2B%3D%20j%20%0A%20%20%20%20%20%20%20%20else%3A%20%0A%20%20%20%20%20%20%20%20%20%20%20%20new_s%20%3D%20new_s%20%2B%20s%5Bi%3Ai%2B1%5D%20%0A%20%20%20%20%20%20%20%20%20%20%20%20i%20%2B%3D%201%20%0A%20%0A%20%20%20%20return%20new_s%20%0A%20%0Amy_book%20%3D%20%20%5B%20%0A%20%20%20%20'And%20...',%20%0A%20%20%20%20'The%20Cat%20in%20the%20Hat!',%20%0A%20%20%20%20%5D%20%0Awhile%20len%28my_book%29%20%3E%200%3A%20%0A%20%20%20%20the_line%20%3D%20my_book.pop%280%29%20%0A%20%0A%20%20%20%20%20%23%20Having%20some%20fun%20with%20text%20substitution%20%0A%20%20%20%20the_line%20%3D%20my_replace%28the_line,%20'Cat',%20'%5CN%7Bcat%20face%20with%20wry%20smile%7D'%29%20%0A%20%20%20%20the_line%20%3D%20my_replace%28the_line,%20'Hat',%20'%5CN%7Btop%20hat%7D'%29%20%0A%20%0A%20%20%20%20print%28the_line%29%20%0A&amp;cumulative=false&amp;heapPrimitives=nevernest&amp;mode=edit&amp;origin=opt-frontend.js&amp;py=311&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false">Click this link</a>. It will take you to Python Tutor’s visualization page, which is preloaded with our simplified script. Scroll up and down in the leftmost panel and make sure you recognize the code. The variable <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> has become a list of text lines from which we pop one line at a time for the processing that takes place in our infinite loop. You should otherwise recognize all the code.</p>
<p><strong>Step 2.</strong> Click the “Visualize Execution” button under the code. Then, click the “Next” button that should have appeared under the code. You may need to scroll up to see the location of the green and red arrows. Notice what the interpreter did on this first execution step. It added the name <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> to the namespace of what’s called the “Global frame”. What <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> names is a function object, as represented by the arrow in the rightmost panel.</p>
<p>Keep clicking “Next” and watch the arrows. At step 6, we see another object placed in the global frame’s namespace. At step 8, <code class="docutils literal notranslate"><span class="pre">the_line</span></code> appears and <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> loses its first element as a result of the <code class="docutils literal notranslate"><span class="pre">pop</span></code> operation. You can click “Prev” if you want to replay any steps.</p>
<p>Keep stepping and watch what happens at the call to our <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function. Make sure you understand why <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">old</span></code>, and <code class="docutils literal notranslate"><span class="pre">new</span></code> were initialized with the values you see in the frame named <code class="docutils literal notranslate"><span class="pre">my_replace</span></code>. Notice that the program is using this <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> frame while it is executing inside the <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function. It won’t touch the global frame again until it hits the <code class="docutils literal notranslate"><span class="pre">return</span></code> statement.</p>
<p><strong>Step 3.</strong> What happens between steps 43 and 44?</p>
<p>That’s right! The frame that was created for first execution of <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> disappears. That’s because we don’t need it anymore after we’re done with the first function call. The machine will create another frame as scratchpad space for its next invocation of <code class="docutils literal notranslate"><span class="pre">my_replace</span></code>. Given the way we’ve written our <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function, nothing done in one execution hangs around to affect any later executions. The only thing we care about from an execution of our function is the value we return to the code that called the function.</p>
<p>Go ahead and use the slider to move around in the code and see what happens at different parts of its execution. Feel free to edit the code (click the link below the script’s listing) and then click “Visualize Execution” to return to the visualization mode. You can even put in your own example scripts. Just keep them short and self-contained (i.e., no file I/O)!</p>
</section>
<section id="ale-3-5-two-different-sequences">
<h1>ALE 3.5: Two different sequences<a class="headerlink" href="#ale-3-5-two-different-sequences" title="Permalink to this heading">#</a></h1>
<p>We’ve discussed two different types of objects that adhere to the Python sequence abstraction: strings and lists. The following code block defines one of each of these objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Two sequences</span>
<span class="linenos">2</span><span class="n">a_string</span> <span class="o">=</span> <span class="s1">&#39;Cosmo the dog&#39;</span>
<span class="linenos">3</span><span class="n">a_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Cosmo&#39;</span><span class="p">,</span> <span class="s1">&#39;CatInTheHat.txt&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> What does this mean that both of these objects adhere to the same abstraction? Here are a few examples that might help you come up with an answer to this question:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># What is the length of a sequence?</span>
<span class="linenos">2</span><span class="n">c1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_string</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">c2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Getting an element in a sequence</span>
<span class="linenos">2</span><span class="n">e1</span> <span class="o">=</span> <span class="n">a_string</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="linenos">3</span><span class="n">e2</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Slice out a piece of the sequence</span>
<span class="linenos">2</span><span class="n">s1</span> <span class="o">=</span> <span class="n">a_string</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span>
<span class="linenos">3</span><span class="n">s2</span> <span class="o">=</span> <span class="n">a_list</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Test if an object is a member of the sequence</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m&#39;</span> <span class="ow">in</span> <span class="n">a_string</span><span class="p">)</span>
<span class="linenos">3</span><span class="nb">print</span><span class="p">(</span><span class="mi">0</span> <span class="ow">in</span> <span class="n">a_list</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2.</strong> But strings are not lists and lists are not strings. In addition to sharing an abstraction, strings and lists have their own methods. We’ve used the string-find method, and we can see that it doesn’t work on lists.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">i</span> <span class="o">=</span> <span class="n">a_string</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">i</span> <span class="o">=</span> <span class="n">a_list</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">2</span><span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>What is the equivalent to string-find with a list? Search the online documentation for this answer and try it out on <code class="docutils literal notranslate"><span class="pre">a_list</span></code> (i.e., fix the broken statement containing <code class="docutils literal notranslate"><span class="pre">a_list.find(10)</span></code>).</p>
</section>
<section id="ale-3-6-what-happens-when">
<h1>ALE 3.6: What happens when?<a class="headerlink" href="#ale-3-6-what-happens-when" title="Permalink to this heading">#</a></h1>
<p>Modules are a powerful way of building off code that others have written and published. However, it often isn’t obvious what the <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code> design pattern is doing for us. To better understand this pattern, consider these two silly scripts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/module32.py</span>
<span class="linenos"> 2</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: At start of script&quot;</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize a variable in this module</span>
<span class="linenos"> 5</span><span class="n">i</span> <span class="o">=</span> <span class="mi">42</span>
<span class="linenos"> 6</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: Initialized i&quot;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k">def</span> <span class="nf">still42</span><span class="p">():</span>
<span class="linenos"> 9</span>    <span class="k">return</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">42</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos">12</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: At start of main&quot;</span><span class="p">)</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;module32.py: Before check of __name__ =&quot;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<span class="linenos">15</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">16</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/import.py</span>
<span class="linenos"> 2</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import.py: At start of script&quot;</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">module32</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="linenos"> 7</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import.py: At start of main&quot;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;i = </span><span class="si">{</span><span class="n">module32</span><span class="o">.</span><span class="n">i</span><span class="si">}</span><span class="s2">; &quot;</span><span class="p">)</span>
<span class="linenos">10</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;still42? </span><span class="si">{</span><span class="n">module32</span><span class="o">.</span><span class="n">still42</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import.py: Before check of __name__ =&quot;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
<span class="linenos">13</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">14</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Step 1.</strong> Put these two scripts into a directory.</p>
<p><strong>Step 2.</strong> In the Shell, run: <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">import.py</span></code></p>
<p>Look at the output and then at the code in <code class="docutils literal notranslate"><span class="pre">import.py</span></code> and <code class="docutils literal notranslate"><span class="pre">module32.py</span></code>. Make sure you understand how the Python interpreter moved through each of the files, which statements in each file it executed, and what the value of the special variable <code class="docutils literal notranslate"><span class="pre">__name__</span></code> was as the interpreter processed each file.</p>
<p><strong>Step 3.</strong> In the Shell, run: <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">module32.py</span></code></p>
<p>Compare this output to the last, focusing on the lines that start with <code class="docutils literal notranslate"><span class="pre">module32.py</span></code>. Remember that modules in Python are just scripts that we import to get access to some functions and objects we don’t want to write for ourselves!</p>
</section>
<section id="ale-3-7-imports-and-the-namespace">
<h1>ALE 3.7: Imports and the namespace?<a class="headerlink" href="#ale-3-7-imports-and-the-namespace" title="Permalink to this heading">#</a></h1>
<p>Let’s use the scripts from ALE 3.6 to see what happens to the global namespace as we use two different forms of the import-statement.</p>
<p><strong>Step 1.</strong> In the same directory that you placed <code class="docutils literal notranslate"><span class="pre">import.py</span></code> and <code class="docutils literal notranslate"><span class="pre">module32.py</span></code>, start the interactive Python interpreter (i.e., run <code class="docutils literal notranslate"><span class="pre">python3</span></code> at the Shell prompt).</p>
<p>At the interactive Python interpreter prompt, run: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>This is a list of the names that the interpreter has defined before it reads any of your script.</p>
<p>Next, in the interactive interpreter run: <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module32</span> <span class="pre">import</span> <span class="pre">still42</span></code></p>
<p>You should recognize the printed output from the work you did in ALE 3.6. Notice that the import-statement doesn’t just read a file, but it executes it too.</p>
<p>Finally, in the interactive interpreter, again run: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>Notice what has been added to the namespace. Is it what you expected given the form of the import-statement we used?</p>
<p><strong>Step 2.</strong> Type <code class="docutils literal notranslate"><span class="pre">exit()</span></code> or the key combination <em>control-d</em> at the interactive interpreter’s prompt. This quits the interpreter so that we can again start from a clean environment.</p>
<p><strong>Step 3.</strong> Restart the interactive Python interpreter (i.e., run <code class="docutils literal notranslate"><span class="pre">python3</span></code> at the Shell prompt), and at the interactive Python interpreter prompt, verify that we have a clean environment by running: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>Next, run: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">module32</span></code></p>
<p>Did the printed output change? It won’t because the form of the import-statement doesn’t affect the execution of the script; it only affects what gets put into the namespace.</p>
<p>Finally, in the interactive interpreter, again run: <code class="docutils literal notranslate"><span class="pre">dir()</span></code></p>
<p>Notice what has been added to the namespace. Is it what you expected given the form of the import-statement we used? You might also run <code class="docutils literal notranslate"><span class="pre">dir(module32)</span></code> to see what’s in that particular namespace.</p>
<p><strong>Step 4.</strong> Quit the interactive Python interpreter as you’re done!</p>
</section>
<section id="ale-3-8-scope-and-the-danger-of-globals">
<h1>ALE 3.8: Scope and the Danger of Globals<a class="headerlink" href="#ale-3-8-scope-and-the-danger-of-globals" title="Permalink to this heading">#</a></h1>
<p>Computer scientists talk <em>scope rules</em> when they explain how the interpreter knows which version of a name (i.e., a variable or function) you mean at some point in your script. Scope is a concept closely related to namespaces, which we’ve been discussing since the first chapter. I’ve put off a discussion of scope because it gets … complicated. However, now that you know how to build your own functions, it is time to say a few words about scope.</p>
<p>When we started writing our scripts, we wrote statements without enclosing them in a function, as illustrated with this short script from Chapter 1:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Open the book so we can read it</span>
<span class="linenos">2</span><span class="n">my_open_book</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;CatInTheHat.txt&#39;</span><span class="p">)</span>
<span class="linenos">3</span><span class="c1"># Read the first line using that thing that you computed</span>
<span class="linenos">4</span><span class="n">the_line</span> <span class="o">=</span> <span class="n">my_open_book</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">the_line</span><span class="p">)</span>
</pre></div>
</div>
<p>Since the names <code class="docutils literal notranslate"><span class="pre">my_open_book</span></code> and <code class="docutils literal notranslate"><span class="pre">the_line</span></code> do not reside within a function, they are names in Python’s <em>global</em> scope. This was a fine thing to do when our scripts were very short. But as they grew longer, we’ve learned to chunk our work into sensible pieces and encapsulate those pieces in reusable functions.</p>
<p>With functions, we gained a new scope. Names like <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code>, <code class="docutils literal notranslate"><span class="pre">old</span></code>, and <code class="docutils literal notranslate"><span class="pre">new</span></code> in Chapter 3’s <code class="docutils literal notranslate"><span class="pre">my_replace</span></code> function are in Python’s <em>local</em> scope, which is separate from Python’s global scope.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">def</span> <span class="nf">my_replace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a string replacing all occurrences of old with new.&quot;&quot;&quot;</span>
<span class="linenos"> 3</span>    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>           <span class="c1"># tracks where we are in the input string</span>
<span class="linenos"> 4</span>    <span class="n">j</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>    <span class="c1"># skip-ahead amount for index calculations</span>
<span class="linenos"> 5</span>    <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># the new string we&#39;re building</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos"> 8</span>        <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">old</span><span class="p">:</span>
<span class="linenos"> 9</span>            <span class="n">new_s</span> <span class="o">=</span> <span class="n">new_s</span> <span class="o">+</span> <span class="n">new</span>
<span class="linenos">10</span>            <span class="n">i</span> <span class="o">+=</span> <span class="n">j</span>
<span class="linenos">11</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">12</span>            <span class="n">new_s</span> <span class="o">=</span> <span class="n">new_s</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos">13</span>            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">return</span> <span class="n">new_s</span>
</pre></div>
</div>
<p>What the difference? A local variable like <code class="docutils literal notranslate"><span class="pre">j</span></code> is available only within the enclosing function. It is not known outside of the body of this function. This is a Good Thing because any names we use within this function won’t conflict with any names used within another function. Think about how hard it would be to write your script if you had to know all the names used by the authors of every module you imported!</p>
<p>Global variables, on the other hand, are names that are known anywhere in your module (i.e., anywhere in the file that holds your script). This includes inside any functions you define in that module. Global names within a module can be made global to any other module by importing them.</p>
<p>The following code block illustrates global and local names using an example without any import-statements.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/scope.py</span>
<span class="linenos"> 2</span><span class="n">capitalize</span> <span class="o">=</span> <span class="kc">True</span>   <span class="c1"># a global variable setting a mode for the script</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">my_print</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="k">if</span> <span class="n">capitalize</span><span class="p">:</span>
<span class="linenos"> 6</span>        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="linenos"> 7</span>    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">def</span> <span class="nf">my_scramble</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="linenos">10</span>    <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">11</span>    <span class="k">return</span> <span class="n">new_s</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;just some fun&#39;</span>
<span class="linenos">14</span><span class="n">my_print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="linenos">15</span><span class="nb">print</span><span class="p">(</span><span class="n">my_scramble</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="linenos">16</span><span class="c1">#print(new_s)  # produces a NameError</span>
</pre></div>
</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">capitalize</span></code> is defined outside of any function and is thus available within any of the functions (e.g., in <code class="docutils literal notranslate"><span class="pre">my_print</span></code>, where it tells us whether we should be capitalizing the first letter of the string we’re about to print). Namespaces keep this global name from colliding with the method of the same name in the <code class="docutils literal notranslate"><span class="pre">str</span></code> object.</p>
<p>The name <code class="docutils literal notranslate"><span class="pre">s</span></code> is both a global and a local name. It is a global name when it is defined on line 13, and a local name inside both <code class="docutils literal notranslate"><span class="pre">my_print</span></code> and <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code>, as formal parameters are local names. These local <code class="docutils literal notranslate"><span class="pre">s</span></code> names hide the global <code class="docutils literal notranslate"><span class="pre">s</span></code> within the two functions. By hide, I mean that you cannot access the global <code class="docutils literal notranslate"><span class="pre">s</span></code> inside these functions; Python assumes you mean the local name. Again, this defined behavior is typically what we want.</p>
<p>Finally, the name <code class="docutils literal notranslate"><span class="pre">new_s</span></code> inside <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code> is a local variable. If you try to print the value of this variable by removing the first comment character on the script’s last line, you’ll get an error. The name is thrown away with the local scope of <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code> as <code class="docutils literal notranslate"><span class="pre">my_scramble</span></code> returns. Go ahead and try it.</p>
<p><strong>The danger.</strong> As you begin writing functions, you’ll find that you need to reference a value in the function that you haven’t sent to the function as a parameter. What should you do?</p>
<ol class="arabic simple">
<li><p>You could add a new formal parameter and then change all the call sites to provide a value for that formal parameter.</p></li>
<li><p>Or, you’ll think to yourself, “I could just put the value I need in the global scope and not have to change the function or any of the call sites.”</p></li>
</ol>
<p>Resist the urge to do the second thing except in one limited case, which I’ll describe in a moment. But first, let’s see what happens to our script if we remove the formal parameters—heck, the global variable is already named what the two function bodies reference, right?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">### chap03/scope_broken.py</span>
<span class="linenos"> 2</span><span class="n">capitalize</span> <span class="o">=</span> <span class="kc">True</span>   <span class="c1"># a global variable setting a mode for the script</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">def</span> <span class="nf">my_print</span><span class="p">():</span>
<span class="linenos"> 5</span>    <span class="k">if</span> <span class="n">capitalize</span><span class="p">:</span>
<span class="linenos"> 6</span>        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="linenos"> 7</span>    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">def</span> <span class="nf">my_scramble</span><span class="p">():</span>
<span class="linenos">10</span>    <span class="n">new_s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">11</span>    <span class="k">return</span> <span class="n">new_s</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;just some fun&#39;</span>
<span class="linenos">14</span><span class="n">my_print</span><span class="p">()</span>
<span class="linenos">15</span><span class="nb">print</span><span class="p">(</span><span class="n">my_scramble</span><span class="p">())</span>
</pre></div>
</div>
<p>The script dies with an <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> on line 6, where we tried to update the global variable within the function <code class="docutils literal notranslate"><span class="pre">my_print</span></code>. Python gives you a way to fix this with a global-statement, but you’re just heading down dark and bumpy road with more problems to come. For example, did you really want to update the global variable or just a local copy of it?</p>
<p>The only time in this book that you’ll be encouraged to use a global variable is in situations like we saw with <code class="docutils literal notranslate"><span class="pre">capitalize</span></code>. Think about how we’re using this name: We set it once at the start of the script and then only ever reference its value. We never try to change it. Global variables are great things to read, and a real pain to update. You’ll feel this pain if you ever have to debug a global variable that you read and write all over your (probably long) script.</p>
<p>If you want to know more about scope and the scope rules in Python, I recommend <a class="reference external" href="https://realpython.com/python-scope-legb-rule/">this Real Python tutorial</a>.</p>
<p>[Version 20240127]</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="ales-c02.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 2</p>
      </div>
    </a>
    <a class="right-next"
       href="ales-c04.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chapter 4</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Chapter 3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-1-two-kinds-of-loops">ALE 3.1: Two kinds of loops</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-2-getting-comfortable-with-range">ALE 3.2: Getting comfortable with `range`</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-3-return-with-something">ALE 3.3: Return with something</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-4-visualize-a-function-call">ALE 3.4: Visualize a function call</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-5-two-different-sequences">ALE 3.5: Two different sequences</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-6-what-happens-when">ALE 3.6: What happens when?</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-7-imports-and-the-namespace">ALE 3.7: Imports and the namespace?</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#ale-3-8-scope-and-the-danger-of-globals">ALE 3.8: Scope and the Danger of Globals</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mike Smith
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023 by Michael D. Smith. All rights reserved.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>